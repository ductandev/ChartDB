const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-q52rhXgr.js","assets/index-CjVg0o4A.js","assets/index-ISZhWvXJ.css","assets/react-code-blocks.esm-D4XAcB0l.js","assets/theme-provider-Jqc5CFOj.js","assets/scripts-CENl6Wp_.js","assets/index-Bid0qvHX.js","assets/index-CRwBhgXv.js","assets/index-CCSqFstG.js","assets/editor-desktop-layout-iPvnKuL9.js","assets/canvas-CJteFN-B.js","assets/canvas-K_QcnF3W.css","assets/editor-mobile-layout-DaMO939S.js"])))=>i.map(i=>d[i]);
import{r as d,u as Or,$ as Zu,j as l,P as le,g as Ju,a as ed,b as $i,R as W,c as xe,S as yr,d as Ce,e as Ze,f as Z,h as Qe,i as ct,k as Kn,A as ra,l as Re,D as oa,C as Oi,m as Li,n as fy,o as td,p as aa,q as ne,s as my,t as q,v as py,T as Fs,w as Hs,x as Bs,y as Za,z as Ja,B as es,E as ts,F as ns,G as rs,H as hy,V as nd,I as Fi,J as gy,K as vy,L as sa,M as st,N as Vs,O as xy,Q as yy,_ as rn,U as rd,W as by,X as wy,Y as Ey}from"./index-CjVg0o4A.js";import{D as te,u as Sy,c as Je,S as Cy,d as od,a as Pe,L as mr,B as we,l as _y,b as Lr,e as zs,f as ia,C as Ny,g as Ty,h as ca,i as Ry,s as $n,r as ad,j as qt,m as Ay,v as Dy,k as Py,n as jy,o as sd,p as My,T as Iy,q as ky}from"./theme-provider-Jqc5CFOj.js";var $y="Portal",Fr=d.forwardRef((e,t)=>{var i;const{container:n,...r}=e,[o,a]=d.useState(!1);Or(()=>a(!0),[]);const s=n||o&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return s?Zu.createPortal(l.jsx(le.div,{...r,ref:t}),s):null});Fr.displayName=$y;var Oy={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const Ly=Ju(Oy);var Fy=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function qc(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(Ly[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var o=new RegExp(Fy),a=null;(a=o.exec(e))!==null;)if(a[0].trim())if(a[1]){var s=a[1].trim(),i=[s,""];s.indexOf("=")>-1&&(i=s.split("=")),t.attrs[i[0]]=i[1],o.lastIndex--}else a[2]&&(t.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return t}var Hy=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,By=/^\s*$/,Vy=Object.create(null);function id(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(n){var r=[];for(var o in n)r.push(o+'="'+n[o]+'"');return r.length?" "+r.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(id,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var zy={parse:function(e,t){t||(t={}),t.components||(t.components=Vy);var n,r=[],o=[],a=-1,s=!1;if(e.indexOf("<")!==0){var i=e.indexOf("<");r.push({type:"text",content:i===-1?e:e.substring(0,i)})}return e.replace(Hy,function(u,c){if(s){if(u!=="</"+n.name+">")return;s=!1}var m,f=u.charAt(1)!=="/",p=u.startsWith("<!--"),h=c+u.length,v=e.charAt(h);if(p){var g=qc(u);return a<0?(r.push(g),r):((m=o[a]).children.push(g),r)}if(f&&(a++,(n=qc(u)).type==="tag"&&t.components[n.name]&&(n.type="component",s=!0),n.voidElement||s||!v||v==="<"||n.children.push({type:"text",content:e.slice(h,e.indexOf("<",h))}),a===0&&r.push(n),(m=o[a-1])&&m.children.push(n),o[a]=n),(!f||n.voidElement)&&(a>-1&&(n.voidElement||n.name===u.slice(2,-1))&&(a--,n=a===-1?r:o[a]),!s&&v!=="<"&&v)){m=a===-1?r:o[a].children;var y=e.indexOf("<",h),x=e.slice(h,y===-1?void 0:y);By.test(x)&&(x=" "),(y>-1&&a+m.length>=0||x!==" ")&&m.push({type:"text",content:x})}}),r},stringify:function(e){return e.reduce(function(t,n){return t+id("",n)},"")}};const _o=(...e)=>{console!=null&&console.warn&&(Be(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},Qc={},Mo=(...e)=>{Be(e[0])&&Qc[e[0]]||(Be(e[0])&&(Qc[e[0]]=new Date),_o(...e))},cd=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},Zc=(e,t,n)=>{e.loadNamespaces(t,cd(e,n))},Jc=(e,t,n,r)=>{Be(n)&&(n=[n]),n.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,cd(e,r))},Uy=(e,t,n={})=>!t.languages||!t.languages.length?(Mo("i18n.languages were undefined or empty",t.languages),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,o)=>{var a;if(((a=n.bindI18n)==null?void 0:a.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,e))return!1}}),Be=e=>typeof e=="string",_n=e=>typeof e=="object"&&e!==null,os=(e,t)=>{var r;if(!e)return!1;const n=((r=e.props)==null?void 0:r.children)??e.children;return t?n.length>0:!!n},as=e=>{var n,r;if(!e)return[];const t=((n=e.props)==null?void 0:n.children)??e.children;return(r=e.props)!=null&&r.i18nIsDynamicList?Nn(t):t},Gy=e=>Array.isArray(e)&&e.every(d.isValidElement),Nn=e=>Array.isArray(e)?e:[e],Wy=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},ld=(e,t)=>{if(!e)return"";let n="";const r=Nn(e),o=t!=null&&t.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return r.forEach((a,s)=>{if(Be(a))n+=`${a}`;else if(d.isValidElement(a)){const{props:i,type:u}=a,c=Object.keys(i).length,m=o.indexOf(u)>-1,f=i.children;if(!f&&m&&!c)n+=`<${u}/>`;else if(!f&&(!m||c)||i.i18nIsDynamicList)n+=`<${s}></${s}>`;else if(m&&c===1&&Be(f))n+=`<${u}>${f}</${u}>`;else{const p=ld(f,t);n+=`<${s}>${p}</${s}>`}}else if(a===null)_o("Trans: the passed in value is invalid - seems you passed in a null child.");else if(_n(a)){const{format:i,...u}=a,c=Object.keys(u);if(c.length===1){const m=i?`${c[0]}, ${i}`:c[0];n+=`{{${m}}}`}else _o("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",a)}else _o("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",a)}),n},Ky=(e,t,n,r,o,a)=>{if(t==="")return[];const s=r.transKeepBasicHtmlNodesFor||[],i=t&&new RegExp(s.map(y=>`<${y}`).join("|")).test(t);if(!e&&!i&&!a)return[t];const u={},c=y=>{Nn(y).forEach(S=>{Be(S)||(os(S)?c(as(S)):_n(S)&&!d.isValidElement(S)&&Object.assign(u,S))})};c(e);const m=zy.parse(`<0>${t}</0>`),f={...u,...o},p=(y,x,S)=>{var C;const E=as(y),w=v(E,x.children,S);return Gy(E)&&w.length===0||(C=y.props)!=null&&C.i18nIsDynamicList?E:w},h=(y,x,S,E,w)=>{y.dummy?(y.children=x,S.push(d.cloneElement(y,{key:E},w?void 0:x))):S.push(...d.Children.map([y],C=>{const _={...C.props};return delete _.i18nIsDynamicList,d.createElement(C.type,{..._,key:E,ref:C.ref},w?null:x)}))},v=(y,x,S)=>{const E=Nn(y);return Nn(x).reduce((C,_,N)=>{var A,j;const T=((j=(A=_.children)==null?void 0:A[0])==null?void 0:j.content)&&n.services.interpolator.interpolate(_.children[0].content,f,n.language);if(_.type==="tag"){let k=E[parseInt(_.name,10)];S.length===1&&!k&&(k=S[0][_.name]),k||(k={});const R=Object.keys(_.attrs).length!==0?Wy({props:_.attrs},k):k,D=d.isValidElement(R),b=D&&os(_,!0)&&!_.voidElement,I=i&&_n(R)&&R.dummy&&!D,P=_n(e)&&Object.hasOwnProperty.call(e,_.name);if(Be(R)){const L=n.services.interpolator.interpolate(R,f,n.language);C.push(L)}else if(os(R)||b){const L=p(R,_,S);h(R,L,C,N)}else if(I){const L=v(E,_.children,S);h(R,L,C,N)}else if(Number.isNaN(parseFloat(_.name)))if(P){const L=p(R,_,S);h(R,L,C,N,_.voidElement)}else if(r.transSupportBasicHtmlNodes&&s.indexOf(_.name)>-1)if(_.voidElement)C.push(d.createElement(_.name,{key:`${_.name}-${N}`}));else{const L=v(E,_.children,S);C.push(d.createElement(_.name,{key:`${_.name}-${N}`},L))}else if(_.voidElement)C.push(`<${_.name} />`);else{const L=v(E,_.children,S);C.push(`<${_.name}>${L}</${_.name}>`)}else if(_n(R)&&!D){const L=_.children[0]?T:null;L&&C.push(L)}else h(R,T,C,N,_.children.length!==1||!T)}else if(_.type==="text"){const k=r.transWrapTextNodes,R=a?r.unescape(n.services.interpolator.interpolate(_.content,f,n.language)):n.services.interpolator.interpolate(_.content,f,n.language);k?C.push(d.createElement(k,{key:`${_.name}-${N}`},R)):C.push(R)}return C},[])},g=v([{dummy:!0,children:e||[]}],m,Nn(e||[]));return as(g[0])};function Xy({children:e,count:t,parent:n,i18nKey:r,context:o,tOptions:a={},values:s,defaults:i,components:u,ns:c,i18n:m,t:f,shouldUnescape:p,...h}){var k,R,D,b,I,P;const v=m||$i();if(!v)return Mo("You will need to pass in an i18next instance by using i18nextReactModule"),e;const g=f||v.t.bind(v)||(L=>L),y={...ed(),...(k=v.options)==null?void 0:k.react};let x=c||g.ns||((R=v.options)==null?void 0:R.defaultNS);x=Be(x)?[x]:x||["translation"];const S=ld(e,y),E=i||S||y.transEmptyNodeValue||r,{hashTransKey:w}=y,C=r||(w?w(S||E):S||E);(b=(D=v.options)==null?void 0:D.interpolation)!=null&&b.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...v.options.interpolation.defaultVariables}:{...v.options.interpolation.defaultVariables});const _=s||t!==void 0&&!((P=(I=v.options)==null?void 0:I.interpolation)!=null&&P.alwaysFormat)||!e?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},N={...a,context:o||a.context,count:t,...s,..._,defaultValue:E,ns:x},T=C?g(C,N):E;u&&Object.keys(u).forEach(L=>{const $=u[L];if(typeof $.type=="function"||!$.props||!$.props.children||T.indexOf(`${L}/>`)<0&&T.indexOf(`${L} />`)<0)return;function M(){return d.createElement(d.Fragment,null,$)}u[L]=d.createElement(M)});const A=Ky(u||e,T,v,y,N,p),j=n??y.defaultTransParent;return j?d.createElement(j,h,A):A}const ud=d.createContext();class Yy{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{var r;(r=this.usedNamespaces)[n]??(r[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function pr({children:e,count:t,parent:n,i18nKey:r,context:o,tOptions:a={},values:s,defaults:i,components:u,ns:c,i18n:m,t:f,shouldUnescape:p,...h}){var S;const{i18n:v,defaultNS:g}=d.useContext(ud)||{},y=m||v||$i(),x=f||(y==null?void 0:y.t.bind(y));return Xy({children:e,count:t,parent:n,i18nKey:r,context:o,tOptions:a,values:s,defaults:i,components:u,ns:c||(x==null?void 0:x.ns)||g||((S=y==null?void 0:y.options)==null?void 0:S.defaultNS),i18n:y,t:f,shouldUnescape:p,...h})}const qy=(e,t)=>{const n=d.useRef();return d.useEffect(()=>{n.current=e},[e,t]),n.current},dd=(e,t,n,r)=>e.getFixedT(t,n,r),Qy=(e,t,n,r)=>d.useCallback(dd(e,t,n,r),[e,t,n,r]),Te=(e,t={})=>{var w,C,_,N;const{i18n:n}=t,{i18n:r,defaultNS:o}=d.useContext(ud)||{},a=n||r||$i();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Yy),!a){Mo("You will need to pass in an i18next instance by using initReactI18next");const T=(j,k)=>Be(k)?k:_n(k)&&Be(k.defaultValue)?k.defaultValue:Array.isArray(j)?j[j.length-1]:j,A=[T,{},!1];return A.t=T,A.i18n={},A.ready=!1,A}(w=a.options.react)!=null&&w.wait&&Mo("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...ed(),...a.options.react,...t},{useSuspense:i,keyPrefix:u}=s;let c=o||((C=a.options)==null?void 0:C.defaultNS);c=Be(c)?[c]:c||["translation"],(N=(_=a.reportNamespaces).addUsedNamespaces)==null||N.call(_,c);const m=(a.isInitialized||a.initializedStoreOnce)&&c.every(T=>Uy(T,a,s)),f=Qy(a,t.lng||null,s.nsMode==="fallback"?c:c[0],u),p=()=>f,h=()=>dd(a,t.lng||null,s.nsMode==="fallback"?c:c[0],u),[v,g]=d.useState(p);let y=c.join();t.lng&&(y=`${t.lng}${y}`);const x=qy(y),S=d.useRef(!0);d.useEffect(()=>{const{bindI18n:T,bindI18nStore:A}=s;S.current=!0,!m&&!i&&(t.lng?Jc(a,t.lng,c,()=>{S.current&&g(h)}):Zc(a,c,()=>{S.current&&g(h)})),m&&x&&x!==y&&S.current&&g(h);const j=()=>{S.current&&g(h)};return T&&(a==null||a.on(T,j)),A&&(a==null||a.store.on(A,j)),()=>{S.current=!1,a&&(T==null||T.split(" ").forEach(k=>a.off(k,j))),A&&a&&A.split(" ").forEach(k=>a.store.off(k,j))}},[a,y]),d.useEffect(()=>{S.current&&m&&g(p)},[a,u,m]);const E=[v,a,m];if(E.t=v,E.i18n=a,E.ready=m,m||!m&&!i)return E;throw new Promise(T=>{t.lng?Jc(a,t.lng,c,()=>T()):Zc(a,c,()=>T())})};function _t(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Zy=["color"],Jy=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,Zy);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),e0=["color"],Us=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,e0);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),t0=["color"],gI=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,t0);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),n0=["color"],r0=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,n0);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),o0=["color"],vI=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,o0);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),a0=["color"],An=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,a0);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),s0=["color"],i0=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,s0);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),c0=["color"],xI=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,c0);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),l0=["color"],u0=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=_t(e,l0);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),d.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function d0(e,t=[]){let n=[];function r(a,s){const i=d.createContext(s),u=n.length;n=[...n,s];function c(f){const{scope:p,children:h,...v}=f,g=(p==null?void 0:p[e][u])||i,y=d.useMemo(()=>v,Object.values(v));return l.jsx(g.Provider,{value:y,children:h})}function m(f,p){const h=(p==null?void 0:p[e][u])||i,v=d.useContext(h);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return c.displayName=a+"Provider",[c,m]}const o=()=>{const a=n.map(s=>d.createContext(s));return function(i){const u=(i==null?void 0:i[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return o.scopeName=e,[r,f0(o,...t)]}function f0(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const s=r.reduce((i,{useScope:u,scopeName:c})=>{const f=u(a)[`__scope${c}`];return{...i,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function la(e){const t=e+"CollectionProvider",[n,r]=d0(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=h=>{const{scope:v,children:g}=h,y=W.useRef(null),x=W.useRef(new Map).current;return l.jsx(o,{scope:v,itemMap:x,collectionRef:y,children:g})};s.displayName=t;const i=e+"CollectionSlot",u=W.forwardRef((h,v)=>{const{scope:g,children:y}=h,x=a(i,g),S=xe(v,x.collectionRef);return l.jsx(yr,{ref:S,children:y})});u.displayName=i;const c=e+"CollectionItemSlot",m="data-radix-collection-item",f=W.forwardRef((h,v)=>{const{scope:g,children:y,...x}=h,S=W.useRef(null),E=xe(v,S),w=a(c,g);return W.useEffect(()=>(w.itemMap.set(S,{ref:S,...x}),()=>void w.itemMap.delete(S))),l.jsx(yr,{[m]:"",ref:E,children:y})});f.displayName=c;function p(h){const v=a(e+"CollectionConsumer",h);return W.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((w,C)=>x.indexOf(w.ref.current)-x.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:s,Slot:u,ItemSlot:f},p,r]}var m0=d.createContext(void 0);function Xn(e){const t=d.useContext(m0);return e||t||"ltr"}var ss=0;function Hi(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??el()),document.body.insertAdjacentElement("beforeend",e[1]??el()),ss++,()=>{ss===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ss--}},[])}function el(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var is="focusScope.autoFocusOnMount",cs="focusScope.autoFocusOnUnmount",tl={bubbles:!1,cancelable:!0},p0="FocusScope",ua=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...s}=e,[i,u]=d.useState(null),c=Ce(o),m=Ce(a),f=d.useRef(null),p=xe(t,g=>u(g)),h=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let g=function(E){if(h.paused||!i)return;const w=E.target;i.contains(w)?f.current=w:Mt(f.current,{select:!0})},y=function(E){if(h.paused||!i)return;const w=E.relatedTarget;w!==null&&(i.contains(w)||Mt(f.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const C of E)C.removedNodes.length>0&&Mt(i)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const S=new MutationObserver(x);return i&&S.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),S.disconnect()}}},[r,i,h.paused]),d.useEffect(()=>{if(i){rl.add(h);const g=document.activeElement;if(!i.contains(g)){const x=new CustomEvent(is,tl);i.addEventListener(is,c),i.dispatchEvent(x),x.defaultPrevented||(h0(b0(fd(i)),{select:!0}),document.activeElement===g&&Mt(i))}return()=>{i.removeEventListener(is,c),setTimeout(()=>{const x=new CustomEvent(cs,tl);i.addEventListener(cs,m),i.dispatchEvent(x),x.defaultPrevented||Mt(g??document.body,{select:!0}),i.removeEventListener(cs,m),rl.remove(h)},0)}}},[i,c,m,h]);const v=d.useCallback(g=>{if(!n&&!r||h.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(y&&x){const S=g.currentTarget,[E,w]=g0(S);E&&w?!g.shiftKey&&x===w?(g.preventDefault(),n&&Mt(E,{select:!0})):g.shiftKey&&x===E&&(g.preventDefault(),n&&Mt(w,{select:!0})):x===S&&g.preventDefault()}},[n,r,h.paused]);return l.jsx(le.div,{tabIndex:-1,...s,ref:p,onKeyDown:v})});ua.displayName=p0;function h0(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Mt(r,{select:t}),document.activeElement!==n)return}function g0(e){const t=fd(e),n=nl(t,e),r=nl(t.reverse(),e);return[n,r]}function fd(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function nl(e,t){for(const n of e)if(!v0(n,{upTo:t}))return n}function v0(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function x0(e){return e instanceof HTMLInputElement&&"select"in e}function Mt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&x0(e)&&t&&e.select()}}var rl=y0();function y0(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=ol(e,t),e.unshift(t)},remove(t){var n;e=ol(e,t),(n=e[0])==null||n.resume()}}}function ol(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function b0(e){return e.filter(t=>t.tagName!=="A")}function w0(e,t=[]){let n=[];function r(a,s){const i=d.createContext(s),u=n.length;n=[...n,s];function c(f){const{scope:p,children:h,...v}=f,g=(p==null?void 0:p[e][u])||i,y=d.useMemo(()=>v,Object.values(v));return l.jsx(g.Provider,{value:y,children:h})}function m(f,p){const h=(p==null?void 0:p[e][u])||i,v=d.useContext(h);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return c.displayName=a+"Provider",[c,m]}const o=()=>{const a=n.map(s=>d.createContext(s));return function(i){const u=(i==null?void 0:i[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return o.scopeName=e,[r,E0(o,...t)]}function E0(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const s=r.reduce((i,{useScope:u,scopeName:c})=>{const f=u(a)[`__scope${c}`];return{...i,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var ls="rovingFocusGroup.onEntryFocus",S0={bubbles:!1,cancelable:!0},da="RovingFocusGroup",[Gs,md,C0]=la(da),[_0,Bt]=w0(da,[C0]),[N0,T0]=_0(da),pd=d.forwardRef((e,t)=>l.jsx(Gs.Provider,{scope:e.__scopeRovingFocusGroup,children:l.jsx(Gs.Slot,{scope:e.__scopeRovingFocusGroup,children:l.jsx(R0,{...e,ref:t})})}));pd.displayName=da;var R0=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:m=!1,...f}=e,p=d.useRef(null),h=xe(t,p),v=Xn(a),[g=null,y]=Ze({prop:s,defaultProp:i,onChange:u}),[x,S]=d.useState(!1),E=Ce(c),w=md(n),C=d.useRef(!1),[_,N]=d.useState(0);return d.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(ls,E),()=>T.removeEventListener(ls,E)},[E]),l.jsx(N0,{scope:n,orientation:r,dir:v,loop:o,currentTabStopId:g,onItemFocus:d.useCallback(T=>y(T),[y]),onItemShiftTab:d.useCallback(()=>S(!0),[]),onFocusableItemAdd:d.useCallback(()=>N(T=>T+1),[]),onFocusableItemRemove:d.useCallback(()=>N(T=>T-1),[]),children:l.jsx(le.div,{tabIndex:x||_===0?-1:0,"data-orientation":r,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:Z(e.onMouseDown,()=>{C.current=!0}),onFocus:Z(e.onFocus,T=>{const A=!C.current;if(T.target===T.currentTarget&&A&&!x){const j=new CustomEvent(ls,S0);if(T.currentTarget.dispatchEvent(j),!j.defaultPrevented){const k=w().filter(P=>P.focusable),R=k.find(P=>P.active),D=k.find(P=>P.id===g),I=[R,D,...k].filter(Boolean).map(P=>P.ref.current);vd(I,m)}}C.current=!1}),onBlur:Z(e.onBlur,()=>S(!1))})})}),hd="RovingFocusGroupItem",gd=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...s}=e,i=Qe(),u=a||i,c=T0(hd,n),m=c.currentTabStopId===u,f=md(n),{onFocusableItemAdd:p,onFocusableItemRemove:h}=c;return d.useEffect(()=>{if(r)return p(),()=>h()},[r,p,h]),l.jsx(Gs.ItemSlot,{scope:n,id:u,focusable:r,active:o,children:l.jsx(le.span,{tabIndex:m?0:-1,"data-orientation":c.orientation,...s,ref:t,onMouseDown:Z(e.onMouseDown,v=>{r?c.onItemFocus(u):v.preventDefault()}),onFocus:Z(e.onFocus,()=>c.onItemFocus(u)),onKeyDown:Z(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=P0(v,c.orientation,c.dir);if(g!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=f().filter(S=>S.focusable).map(S=>S.ref.current);if(g==="last")x.reverse();else if(g==="prev"||g==="next"){g==="prev"&&x.reverse();const S=x.indexOf(v.currentTarget);x=c.loop?j0(x,S+1):x.slice(S+1)}setTimeout(()=>vd(x))}})})})});gd.displayName=hd;var A0={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function D0(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function P0(e,t,n){const r=D0(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return A0[r]}function vd(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function j0(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var fa=pd,ma=gd,M0=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},hn=new WeakMap,oo=new WeakMap,ao={},us=0,xd=function(e){return e&&(e.host||xd(e.parentNode))},I0=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=xd(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},k0=function(e,t,n,r){var o=I0(t,Array.isArray(e)?e:[e]);ao[n]||(ao[n]=new WeakMap);var a=ao[n],s=[],i=new Set,u=new Set(o),c=function(f){!f||i.has(f)||(i.add(f),c(f.parentNode))};o.forEach(c);var m=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(p){if(i.has(p))m(p);else try{var h=p.getAttribute(r),v=h!==null&&h!=="false",g=(hn.get(p)||0)+1,y=(a.get(p)||0)+1;hn.set(p,g),a.set(p,y),s.push(p),g===1&&v&&oo.set(p,!0),y===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return m(t),i.clear(),us++,function(){s.forEach(function(f){var p=hn.get(f)-1,h=a.get(f)-1;hn.set(f,p),a.set(f,h),p||(oo.has(f)||f.removeAttribute(r),oo.delete(f)),h||f.removeAttribute(n)}),us--,us||(hn=new WeakMap,hn=new WeakMap,oo=new WeakMap,ao={})}},pa=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=M0(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),k0(r,o,n,"aria-hidden")):function(){return null}},Ws=function(e,t){return Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Ws(e,t)};function yd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ws(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var _e=function(){return _e=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_e.apply(this,arguments)};function Hr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function bd(e,t,n,r){var o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function wd(e,t){return function(n,r){t(n,r,e)}}function $0(e,t,n,r,o,a){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var i=r.kind,u=i==="getter"?"get":i==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,m=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,p=!1,h=n.length-1;h>=0;h--){var v={};for(var g in r)v[g]=g==="access"?{}:r[g];for(var g in r.access)v.access[g]=r.access[g];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(x||null))};var y=(0,n[h])(i==="accessor"?{get:m.get,set:m.set}:m[u],v);if(i==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=s(y.get))&&(m.get=f),(f=s(y.set))&&(m.set=f),(f=s(y.init))&&o.unshift(f)}else(f=s(y))&&(i==="field"?o.unshift(f):m[u]=f)}c&&Object.defineProperty(c,r.name,m),p=!0}function O0(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function L0(e){return typeof e=="symbol"?e:"".concat(e)}function F0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function Ed(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Sd(e,t,n,r){function o(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function i(m){try{c(r.next(m))}catch(f){s(f)}}function u(m){try{c(r.throw(m))}catch(f){s(f)}}function c(m){m.done?a(m.value):o(m.value).then(i,u)}c((r=r.apply(e,t||[])).next())})}function Cd(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function i(c){return function(m){return u([c,m])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(m){c=[6,m],o=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ha=Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function _d(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&ha(t,e,n)}function br(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bi(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,a=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(i){s={error:i}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Nd(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Bi(arguments[t]));return e}function Td(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],s=0,i=a.length;s<i;s++,o++)r[o]=a[s];return r}function ga(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function On(e){return this instanceof On?(this.v=e,this):new On(e)}function Rd(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(v){return Promise.resolve(v).then(h,f)}}function i(h,v){r[h]&&(o[h]=function(g){return new Promise(function(y,x){a.push([h,g,y,x])>1||u(h,g)})},v&&(o[h]=v(o[h])))}function u(h,v){try{c(r[h](v))}catch(g){p(a[0][3],g)}}function c(h){h.value instanceof On?Promise.resolve(h.value.v).then(m,f):p(a[0][2],h)}function m(h){u("next",h)}function f(h){u("throw",h)}function p(h,v){h(v),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Ad(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,a){t[o]=e[o]?function(s){return(n=!n)?{value:On(e[o](s)),done:!1}:a?a(s):s}:a}}function Dd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof br=="function"?br(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(s){return new Promise(function(i,u){s=e[a](s),o(i,u,s.done,s.value)})}}function o(a,s,i,u){Promise.resolve(u).then(function(c){a({value:c,done:i})},s)}}function Pd(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var H0=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function jd(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&ha(t,e,n);return H0(t,e),t}function Md(e){return e&&e.__esModule?e:{default:e}}function Id(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function kd(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function $d(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Od(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var B0=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Ld(e){function t(a){e.error=e.hasError?new B0(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,r=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(o,function(s){return t(s),o()})}else r|=1}catch(s){t(s)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}const V0={__extends:yd,__assign:_e,__rest:Hr,__decorate:bd,__param:wd,__metadata:Ed,__awaiter:Sd,__generator:Cd,__createBinding:ha,__exportStar:_d,__values:br,__read:Bi,__spread:Nd,__spreadArrays:Td,__spreadArray:ga,__await:On,__asyncGenerator:Rd,__asyncDelegator:Ad,__asyncValues:Dd,__makeTemplateObject:Pd,__importStar:jd,__importDefault:Md,__classPrivateFieldGet:Id,__classPrivateFieldSet:kd,__classPrivateFieldIn:$d,__addDisposableResource:Od,__disposeResources:Ld},z0=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Od,get __assign(){return _e},__asyncDelegator:Ad,__asyncGenerator:Rd,__asyncValues:Dd,__await:On,__awaiter:Sd,__classPrivateFieldGet:Id,__classPrivateFieldIn:$d,__classPrivateFieldSet:kd,__createBinding:ha,__decorate:bd,__disposeResources:Ld,__esDecorate:$0,__exportStar:_d,__extends:yd,__generator:Cd,__importDefault:Md,__importStar:jd,__makeTemplateObject:Pd,__metadata:Ed,__param:wd,__propKey:L0,__read:Bi,__rest:Hr,__runInitializers:O0,__setFunctionName:F0,__spread:Nd,__spreadArray:ga,__spreadArrays:Td,__values:br,default:V0},Symbol.toStringTag,{value:"Module"}));var hr="right-scroll-bar-position",gr="width-before-scroll-bar",U0="with-scroll-bars-hidden",G0="--removed-body-scroll-bar-size";function ds(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function W0(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var K0=typeof window<"u"?d.useLayoutEffect:d.useEffect,al=new WeakMap;function Fd(e,t){var n=W0(null,function(r){return e.forEach(function(o){return ds(o,r)})});return K0(function(){var r=al.get(n);if(r){var o=new Set(r),a=new Set(e),s=n.current;o.forEach(function(i){a.has(i)||ds(i,null)}),a.forEach(function(i){o.has(i)||ds(i,s)})}al.set(n,e)},[e]),n}function X0(e){return e}function Y0(e,t){t===void 0&&(t=X0);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var s=t(a,r);return n.push(s),function(){n=n.filter(function(i){return i!==s})}},assignSyncMedium:function(a){for(r=!0;n.length;){var s=n;n=[],s.forEach(a)}n={push:function(i){return a(i)},filter:function(){return n}}},assignMedium:function(a){r=!0;var s=[];if(n.length){var i=n;n=[],i.forEach(a),s=n}var u=function(){var m=s;s=[],m.forEach(a)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(m){s.push(m),c()},filter:function(m){return s=s.filter(m),n}}}};return o}function Hd(e){e===void 0&&(e={});var t=Y0(null);return t.options=_e({async:!0,ssr:!1},e),t}var Bd=function(e){var t=e.sideCar,n=Hr(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,_e({},n))};Bd.isSideCarExport=!0;function Vd(e,t){return e.useMedium(t),Bd}var zd=Hd(),fs=function(){},va=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:fs,onWheelCapture:fs,onTouchMoveCapture:fs}),o=r[0],a=r[1],s=e.forwardProps,i=e.children,u=e.className,c=e.removeScrollBar,m=e.enabled,f=e.shards,p=e.sideCar,h=e.noIsolation,v=e.inert,g=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,S=e.gapMode,E=Hr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=Fd([n,t]),_=_e(_e({},E),o);return d.createElement(d.Fragment,null,m&&d.createElement(w,{sideCar:zd,removeScrollBar:c,shards:f,noIsolation:h,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:S}),s?d.cloneElement(d.Children.only(i),_e(_e({},_),{ref:C})):d.createElement(x,_e({},_,{className:u,ref:C}),i))});va.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};va.classNames={fullWidth:gr,zeroRight:hr};var q0=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Q0(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=q0();return t&&e.setAttribute("nonce",t),e}function Z0(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function J0(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var eb=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Q0())&&(Z0(t,n),J0(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tb=function(){var e=eb();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Vi=function(){var e=tb(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},nb={left:0,top:0,right:0,gap:0},ms=function(e){return parseInt(e||"",10)||0},rb=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[ms(n),ms(r),ms(o)]},ob=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return nb;var t=rb(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},ab=Vi(),Dn="data-scroll-locked",sb=function(e,t,n,r){var o=e.left,a=e.top,s=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(U0,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(i,"px ").concat(r,`;
  }
  body[`).concat(Dn,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hr,` {
    right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(gr,` {
    margin-right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(hr," .").concat(hr,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(gr," .").concat(gr,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Dn,`] {
    `).concat(G0,": ").concat(i,`px;
  }
`)},sl=function(){var e=parseInt(document.body.getAttribute(Dn)||"0",10);return isFinite(e)?e:0},ib=function(){d.useEffect(function(){return document.body.setAttribute(Dn,(sl()+1).toString()),function(){var e=sl()-1;e<=0?document.body.removeAttribute(Dn):document.body.setAttribute(Dn,e.toString())}},[])},Ud=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;ib();var a=d.useMemo(function(){return ob(o)},[o]);return d.createElement(ab,{styles:sb(a,!t,o,n?"":"!important")})},Ks=!1;if(typeof window<"u")try{var so=Object.defineProperty({},"passive",{get:function(){return Ks=!0,!0}});window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Ks=!1}var gn=Ks?{passive:!1}:!1,cb=function(e){return e.tagName==="TEXTAREA"},Gd=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!cb(e)&&n[t]==="visible")},lb=function(e){return Gd(e,"overflowY")},ub=function(e){return Gd(e,"overflowX")},il=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Wd(e,r);if(o){var a=Kd(e,r),s=a[1],i=a[2];if(s>i)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},db=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},fb=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Wd=function(e,t){return e==="v"?lb(t):ub(t)},Kd=function(e,t){return e==="v"?db(t):fb(t)},mb=function(e,t){return e==="h"&&t==="rtl"?-1:1},pb=function(e,t,n,r,o){var a=mb(e,window.getComputedStyle(t).direction),s=a*r,i=n.target,u=t.contains(i),c=!1,m=s>0,f=0,p=0;do{var h=Kd(e,i),v=h[0],g=h[1],y=h[2],x=g-y-a*v;(v||x)&&Wd(e,i)&&(f+=x,p+=v),i instanceof ShadowRoot?i=i.host:i=i.parentNode}while(!u&&i!==document.body||u&&(t.contains(i)||t===i));return(m&&(Math.abs(f)<1||!o)||!m&&(Math.abs(p)<1||!o))&&(c=!0),c},io=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},cl=function(e){return[e.deltaX,e.deltaY]},ll=function(e){return e&&"current"in e?e.current:e},hb=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gb=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vb=0,vn=[];function xb(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),o=d.useState(vb++)[0],a=d.useState(Vi)[0],s=d.useRef(e);d.useEffect(function(){s.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var g=ga([e.lockRef.current],(e.shards||[]).map(ll),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var i=d.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!s.current.allowPinchZoom;var x=io(g),S=n.current,E="deltaX"in g?g.deltaX:S[0]-x[0],w="deltaY"in g?g.deltaY:S[1]-x[1],C,_=g.target,N=Math.abs(E)>Math.abs(w)?"h":"v";if("touches"in g&&N==="h"&&_.type==="range")return!1;var T=il(N,_);if(!T)return!0;if(T?C=N:(C=N==="v"?"h":"v",T=il(N,_)),!T)return!1;if(!r.current&&"changedTouches"in g&&(E||w)&&(r.current=C),!C)return!0;var A=r.current||C;return pb(A,y,g,A==="h"?E:w,!0)},[]),u=d.useCallback(function(g){var y=g;if(!(!vn.length||vn[vn.length-1]!==a)){var x="deltaY"in y?cl(y):io(y),S=t.current.filter(function(C){return C.name===y.type&&(C.target===y.target||y.target===C.shadowParent)&&hb(C.delta,x)})[0];if(S&&S.should){y.cancelable&&y.preventDefault();return}if(!S){var E=(s.current.shards||[]).map(ll).filter(Boolean).filter(function(C){return C.contains(y.target)}),w=E.length>0?i(y,E[0]):!s.current.noIsolation;w&&y.cancelable&&y.preventDefault()}}},[]),c=d.useCallback(function(g,y,x,S){var E={name:g,delta:y,target:x,should:S,shadowParent:yb(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(w){return w!==E})},1)},[]),m=d.useCallback(function(g){n.current=io(g),r.current=void 0},[]),f=d.useCallback(function(g){c(g.type,cl(g),g.target,i(g,e.lockRef.current))},[]),p=d.useCallback(function(g){c(g.type,io(g),g.target,i(g,e.lockRef.current))},[]);d.useEffect(function(){return vn.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",u,gn),document.addEventListener("touchmove",u,gn),document.addEventListener("touchstart",m,gn),function(){vn=vn.filter(function(g){return g!==a}),document.removeEventListener("wheel",u,gn),document.removeEventListener("touchmove",u,gn),document.removeEventListener("touchstart",m,gn)}},[]);var h=e.removeScrollBar,v=e.inert;return d.createElement(d.Fragment,null,v?d.createElement(a,{styles:gb(o)}):null,h?d.createElement(Ud,{gapMode:e.gapMode}):null)}function yb(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const bb=Vd(zd,xb);var xa=d.forwardRef(function(e,t){return d.createElement(va,_e({},e,{ref:t,sideCar:bb}))});xa.classNames=va.classNames;var Xs=["Enter"," "],wb=["ArrowDown","PageUp","Home"],Xd=["ArrowUp","PageDown","End"],Eb=[...wb,...Xd],Sb={ltr:[...Xs,"ArrowRight"],rtl:[...Xs,"ArrowLeft"]},Cb={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Br="Menu",[wr,_b,Nb]=la(Br),[dn,Tb]=ct(Br,[Nb,Kn,Bt]),Vr=Kn(),Yd=Bt(),[qd,Vt]=dn(Br),[Rb,zr]=dn(Br),Qd=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:s=!0}=e,i=Vr(t),[u,c]=d.useState(null),m=d.useRef(!1),f=Ce(a),p=Xn(o);return d.useEffect(()=>{const h=()=>{m.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>m.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),l.jsx(aa,{...i,children:l.jsx(qd,{scope:t,open:n,onOpenChange:f,content:u,onContentChange:c,children:l.jsx(Rb,{scope:t,onClose:d.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:m,dir:p,modal:s,children:r})})})};Qd.displayName=Br;var Ab="MenuAnchor",zi=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Vr(n);return l.jsx(ra,{...o,...r,ref:t})});zi.displayName=Ab;var Ui="MenuPortal",[Db,Zd]=dn(Ui,{forceMount:void 0}),Jd=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=Vt(Ui,t);return l.jsx(Db,{scope:t,forceMount:n,children:l.jsx(Re,{present:n||a.open,children:l.jsx(Fr,{asChild:!0,container:o,children:r})})})};Jd.displayName=Ui;var Ve="MenuContent",[Pb,Gi]=dn(Ve),ef=d.forwardRef((e,t)=>{const n=Zd(Ve,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Vt(Ve,e.__scopeMenu),s=zr(Ve,e.__scopeMenu);return l.jsx(wr.Provider,{scope:e.__scopeMenu,children:l.jsx(Re,{present:r||a.open,children:l.jsx(wr.Slot,{scope:e.__scopeMenu,children:s.modal?l.jsx(jb,{...o,ref:t}):l.jsx(Mb,{...o,ref:t})})})})}),jb=d.forwardRef((e,t)=>{const n=Vt(Ve,e.__scopeMenu),r=d.useRef(null),o=xe(t,r);return d.useEffect(()=>{const a=r.current;if(a)return pa(a)},[]),l.jsx(Wi,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Z(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Mb=d.forwardRef((e,t)=>{const n=Vt(Ve,e.__scopeMenu);return l.jsx(Wi,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Wi=d.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:p,onDismiss:h,disableOutsideScroll:v,...g}=e,y=Vt(Ve,n),x=zr(Ve,n),S=Vr(n),E=Yd(n),w=_b(n),[C,_]=d.useState(null),N=d.useRef(null),T=xe(t,N,y.onContentChange),A=d.useRef(0),j=d.useRef(""),k=d.useRef(0),R=d.useRef(null),D=d.useRef("right"),b=d.useRef(0),I=v?xa:d.Fragment,P=v?{as:yr,allowPinchZoom:!0}:void 0,L=M=>{var K,X;const V=j.current+M,G=w().filter(J=>!J.disabled),O=document.activeElement,H=(K=G.find(J=>J.ref.current===O))==null?void 0:K.textValue,U=G.map(J=>J.textValue),z=Gb(U,V,H),Y=(X=G.find(J=>J.textValue===z))==null?void 0:X.ref.current;(function J(se){j.current=se,window.clearTimeout(A.current),se!==""&&(A.current=window.setTimeout(()=>J(""),1e3))})(V),Y&&setTimeout(()=>Y.focus())};d.useEffect(()=>()=>window.clearTimeout(A.current),[]),Hi();const $=d.useCallback(M=>{var G,O;return D.current===((G=R.current)==null?void 0:G.side)&&Kb(M,(O=R.current)==null?void 0:O.area)},[]);return l.jsx(Pb,{scope:n,searchRef:j,onItemEnter:d.useCallback(M=>{$(M)&&M.preventDefault()},[$]),onItemLeave:d.useCallback(M=>{var V;$(M)||((V=N.current)==null||V.focus(),_(null))},[$]),onTriggerLeave:d.useCallback(M=>{$(M)&&M.preventDefault()},[$]),pointerGraceTimerRef:k,onPointerGraceIntentChange:d.useCallback(M=>{R.current=M},[]),children:l.jsx(I,{...P,children:l.jsx(ua,{asChild:!0,trapped:o,onMountAutoFocus:Z(a,M=>{var V;M.preventDefault(),(V=N.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:l.jsx(oa,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:p,onDismiss:h,children:l.jsx(fa,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:_,onEntryFocus:Z(u,M=>{x.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(Oi,{role:"menu","aria-orientation":"vertical","data-state":xf(y.open),"data-radix-menu-content":"",dir:x.dir,...S,...g,ref:T,style:{outline:"none",...g.style},onKeyDown:Z(g.onKeyDown,M=>{const G=M.target.closest("[data-radix-menu-content]")===M.currentTarget,O=M.ctrlKey||M.altKey||M.metaKey,H=M.key.length===1;G&&(M.key==="Tab"&&M.preventDefault(),!O&&H&&L(M.key));const U=N.current;if(M.target!==U||!Eb.includes(M.key))return;M.preventDefault();const Y=w().filter(K=>!K.disabled).map(K=>K.ref.current);Xd.includes(M.key)&&Y.reverse(),zb(Y)}),onBlur:Z(e.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(A.current),j.current="")}),onPointerMove:Z(e.onPointerMove,Er(M=>{const V=M.target,G=b.current!==M.clientX;if(M.currentTarget.contains(V)&&G){const O=M.clientX>b.current?"right":"left";D.current=O,b.current=M.clientX}}))})})})})})})});ef.displayName=Ve;var Ib="MenuGroup",Ki=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return l.jsx(le.div,{role:"group",...r,ref:t})});Ki.displayName=Ib;var kb="MenuLabel",tf=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return l.jsx(le.div,{...r,ref:t})});tf.displayName=kb;var Io="MenuItem",ul="menu.itemSelect",ya=d.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=d.useRef(null),s=zr(Io,e.__scopeMenu),i=Gi(Io,e.__scopeMenu),u=xe(t,a),c=d.useRef(!1),m=()=>{const f=a.current;if(!n&&f){const p=new CustomEvent(ul,{bubbles:!0,cancelable:!0});f.addEventListener(ul,h=>r==null?void 0:r(h),{once:!0}),td(f,p),p.defaultPrevented?c.current=!1:s.onClose()}};return l.jsx(nf,{...o,ref:u,disabled:n,onClick:Z(e.onClick,m),onPointerDown:f=>{var p;(p=e.onPointerDown)==null||p.call(e,f),c.current=!0},onPointerUp:Z(e.onPointerUp,f=>{var p;c.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:Z(e.onKeyDown,f=>{const p=i.searchRef.current!=="";n||p&&f.key===" "||Xs.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});ya.displayName=Io;var nf=d.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,s=Gi(Io,n),i=Yd(n),u=d.useRef(null),c=xe(t,u),[m,f]=d.useState(!1),[p,h]=d.useState("");return d.useEffect(()=>{const v=u.current;v&&h((v.textContent??"").trim())},[a.children]),l.jsx(wr.ItemSlot,{scope:n,disabled:r,textValue:o??p,children:l.jsx(ma,{asChild:!0,...i,focusable:!r,children:l.jsx(le.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:c,onPointerMove:Z(e.onPointerMove,Er(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Z(e.onPointerLeave,Er(v=>s.onItemLeave(v))),onFocus:Z(e.onFocus,()=>f(!0)),onBlur:Z(e.onBlur,()=>f(!1))})})})}),$b="MenuCheckboxItem",rf=d.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return l.jsx(lf,{scope:e.__scopeMenu,checked:n,children:l.jsx(ya,{role:"menuitemcheckbox","aria-checked":ko(n)?"mixed":n,...o,ref:t,"data-state":qi(n),onSelect:Z(o.onSelect,()=>r==null?void 0:r(ko(n)?!0:!n),{checkForDefaultPrevented:!1})})})});rf.displayName=$b;var of="MenuRadioGroup",[Ob,Lb]=dn(of,{value:void 0,onValueChange:()=>{}}),af=d.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Ce(r);return l.jsx(Ob,{scope:e.__scopeMenu,value:n,onValueChange:a,children:l.jsx(Ki,{...o,ref:t})})});af.displayName=of;var sf="MenuRadioItem",cf=d.forwardRef((e,t)=>{const{value:n,...r}=e,o=Lb(sf,e.__scopeMenu),a=n===o.value;return l.jsx(lf,{scope:e.__scopeMenu,checked:a,children:l.jsx(ya,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":qi(a),onSelect:Z(r.onSelect,()=>{var s;return(s=o.onValueChange)==null?void 0:s.call(o,n)},{checkForDefaultPrevented:!1})})})});cf.displayName=sf;var Xi="MenuItemIndicator",[lf,Fb]=dn(Xi,{checked:!1}),uf=d.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=Fb(Xi,n);return l.jsx(Re,{present:r||ko(a.checked)||a.checked===!0,children:l.jsx(le.span,{...o,ref:t,"data-state":qi(a.checked)})})});uf.displayName=Xi;var Hb="MenuSeparator",df=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return l.jsx(le.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});df.displayName=Hb;var Bb="MenuArrow",ff=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Vr(n);return l.jsx(Li,{...o,...r,ref:t})});ff.displayName=Bb;var Yi="MenuSub",[Vb,mf]=dn(Yi),pf=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,a=Vt(Yi,t),s=Vr(t),[i,u]=d.useState(null),[c,m]=d.useState(null),f=Ce(o);return d.useEffect(()=>(a.open===!1&&f(!1),()=>f(!1)),[a.open,f]),l.jsx(aa,{...s,children:l.jsx(qd,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:m,children:l.jsx(Vb,{scope:t,contentId:Qe(),triggerId:Qe(),trigger:i,onTriggerChange:u,children:n})})})};pf.displayName=Yi;var cr="MenuSubTrigger",hf=d.forwardRef((e,t)=>{const n=Vt(cr,e.__scopeMenu),r=zr(cr,e.__scopeMenu),o=mf(cr,e.__scopeMenu),a=Gi(cr,e.__scopeMenu),s=d.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:u}=a,c={__scopeMenu:e.__scopeMenu},m=d.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return d.useEffect(()=>m,[m]),d.useEffect(()=>{const f=i.current;return()=>{window.clearTimeout(f),u(null)}},[i,u]),l.jsx(zi,{asChild:!0,...c,children:l.jsx(nf,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":xf(n.open),...e,ref:fy(t,o.onTriggerChange),onClick:f=>{var p;(p=e.onClick)==null||p.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Z(e.onPointerMove,Er(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(a.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:Z(e.onPointerLeave,Er(f=>{var h,v;m();const p=(h=n.content)==null?void 0:h.getBoundingClientRect();if(p){const g=(v=n.content)==null?void 0:v.dataset.side,y=g==="right",x=y?-5:5,S=p[y?"left":"right"],E=p[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:S,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:S,y:p.bottom}],side:g}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Z(e.onKeyDown,f=>{var h;const p=a.searchRef.current!=="";e.disabled||p&&f.key===" "||Sb[r.dir].includes(f.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),f.preventDefault())})})})});hf.displayName=cr;var gf="MenuSubContent",vf=d.forwardRef((e,t)=>{const n=Zd(Ve,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Vt(Ve,e.__scopeMenu),s=zr(Ve,e.__scopeMenu),i=mf(gf,e.__scopeMenu),u=d.useRef(null),c=xe(t,u);return l.jsx(wr.Provider,{scope:e.__scopeMenu,children:l.jsx(Re,{present:r||a.open,children:l.jsx(wr.Slot,{scope:e.__scopeMenu,children:l.jsx(Wi,{id:i.contentId,"aria-labelledby":i.triggerId,...o,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var f;s.isUsingKeyboardRef.current&&((f=u.current)==null||f.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Z(e.onFocusOutside,m=>{m.target!==i.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Z(e.onEscapeKeyDown,m=>{s.onClose(),m.preventDefault()}),onKeyDown:Z(e.onKeyDown,m=>{var h;const f=m.currentTarget.contains(m.target),p=Cb[s.dir].includes(m.key);f&&p&&(a.onOpenChange(!1),(h=i.trigger)==null||h.focus(),m.preventDefault())})})})})})});vf.displayName=gf;function xf(e){return e?"open":"closed"}function ko(e){return e==="indeterminate"}function qi(e){return ko(e)?"indeterminate":e?"checked":"unchecked"}function zb(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Ub(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Gb(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let s=Ub(e,Math.max(a,0));o.length===1&&(s=s.filter(c=>c!==n));const u=s.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return u!==n?u:void 0}function Wb(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,s=t.length-1;a<t.length;s=a++){const i=t[a].x,u=t[a].y,c=t[s].x,m=t[s].y;u>r!=m>r&&n<(c-i)*(r-u)/(m-u)+i&&(o=!o)}return o}function Kb(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Wb(n,t)}function Er(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Xb=Qd,Yb=zi,qb=Jd,Qb=ef,Zb=Ki,Jb=tf,ew=ya,tw=rf,nw=af,rw=cf,ow=uf,aw=df,sw=ff,iw=pf,cw=hf,lw=vf,ba="Menubar",[Ys,uw,dw]=la(ba),[yf,yI]=ct(ba,[dw,Bt]),Ae=Tb(),bf=Bt(),[fw,Qi]=yf(ba),wf=d.forwardRef((e,t)=>{const{__scopeMenubar:n,value:r,onValueChange:o,defaultValue:a,loop:s=!0,dir:i,...u}=e,c=Xn(i),m=bf(n),[f="",p]=Ze({prop:r,onChange:o,defaultProp:a}),[h,v]=d.useState(null);return l.jsx(fw,{scope:n,value:f,onMenuOpen:d.useCallback(g=>{p(g),v(g)},[p]),onMenuClose:d.useCallback(()=>p(""),[p]),onMenuToggle:d.useCallback(g=>{p(y=>y?"":g),v(g)},[p]),dir:c,loop:s,children:l.jsx(Ys.Provider,{scope:n,children:l.jsx(Ys.Slot,{scope:n,children:l.jsx(fa,{asChild:!0,...m,orientation:"horizontal",loop:s,dir:c,currentTabStopId:h,onCurrentTabStopIdChange:v,children:l.jsx(le.div,{role:"menubar",...u,ref:t})})})})})});wf.displayName=ba;var Zi="MenubarMenu",[mw,Ef]=yf(Zi),Sf=e=>{const{__scopeMenubar:t,value:n,...r}=e,o=Qe(),a=n||o||"LEGACY_REACT_AUTO_VALUE",s=Qi(Zi,t),i=Ae(t),u=d.useRef(null),c=d.useRef(!1),m=s.value===a;return d.useEffect(()=>{m||(c.current=!1)},[m]),l.jsx(mw,{scope:t,value:a,triggerId:Qe(),triggerRef:u,contentId:Qe(),wasKeyboardTriggerOpenRef:c,children:l.jsx(Xb,{...i,open:m,onOpenChange:f=>{f||s.onMenuClose()},modal:!1,dir:s.dir,...r})})};Sf.displayName=Zi;var qs="MenubarTrigger",Cf=d.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:r=!1,...o}=e,a=bf(n),s=Ae(n),i=Qi(qs,n),u=Ef(qs,n),c=d.useRef(null),m=xe(t,c,u.triggerRef),[f,p]=d.useState(!1),h=i.value===u.value;return l.jsx(Ys.ItemSlot,{scope:n,value:u.value,disabled:r,children:l.jsx(ma,{asChild:!0,...a,focusable:!r,tabStopId:u.value,children:l.jsx(Yb,{asChild:!0,...s,children:l.jsx(le.button,{type:"button",role:"menuitem",id:u.triggerId,"aria-haspopup":"menu","aria-expanded":h,"aria-controls":h?u.contentId:void 0,"data-highlighted":f?"":void 0,"data-state":h?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:m,onPointerDown:Z(e.onPointerDown,v=>{!r&&v.button===0&&v.ctrlKey===!1&&(i.onMenuOpen(u.value),h||v.preventDefault())}),onPointerEnter:Z(e.onPointerEnter,()=>{var g;!!i.value&&!h&&(i.onMenuOpen(u.value),(g=c.current)==null||g.focus())}),onKeyDown:Z(e.onKeyDown,v=>{r||(["Enter"," "].includes(v.key)&&i.onMenuToggle(u.value),v.key==="ArrowDown"&&i.onMenuOpen(u.value),["Enter"," ","ArrowDown"].includes(v.key)&&(u.wasKeyboardTriggerOpenRef.current=!0,v.preventDefault()))}),onFocus:Z(e.onFocus,()=>p(!0)),onBlur:Z(e.onBlur,()=>p(!1))})})})})});Cf.displayName=qs;var pw="MenubarPortal",_f=e=>{const{__scopeMenubar:t,...n}=e,r=Ae(t);return l.jsx(qb,{...r,...n})};_f.displayName=pw;var Qs="MenubarContent",Nf=d.forwardRef((e,t)=>{const{__scopeMenubar:n,align:r="start",...o}=e,a=Ae(n),s=Qi(Qs,n),i=Ef(Qs,n),u=uw(n),c=d.useRef(!1);return l.jsx(Qb,{id:i.contentId,"aria-labelledby":i.triggerId,"data-radix-menubar-content":"",...a,...o,ref:t,align:r,onCloseAutoFocus:Z(e.onCloseAutoFocus,m=>{var p;!!!s.value&&!c.current&&((p=i.triggerRef.current)==null||p.focus()),c.current=!1,m.preventDefault()}),onFocusOutside:Z(e.onFocusOutside,m=>{const f=m.target;u().some(h=>{var v;return(v=h.ref.current)==null?void 0:v.contains(f)})&&m.preventDefault()}),onInteractOutside:Z(e.onInteractOutside,()=>{c.current=!0}),onEntryFocus:m=>{i.wasKeyboardTriggerOpenRef.current||m.preventDefault()},onKeyDown:Z(e.onKeyDown,m=>{if(["ArrowRight","ArrowLeft"].includes(m.key)){const f=m.target,p=f.hasAttribute("data-radix-menubar-subtrigger"),h=f.closest("[data-radix-menubar-content]")!==m.currentTarget,g=(s.dir==="rtl"?"ArrowRight":"ArrowLeft")===m.key;if(!g&&p||h&&g)return;let S=u().filter(C=>!C.disabled).map(C=>C.value);g&&S.reverse();const E=S.indexOf(i.value);S=s.loop?Dw(S,E+1):S.slice(E+1);const[w]=S;w&&s.onMenuOpen(w)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Nf.displayName=Qs;var hw="MenubarGroup",gw=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(Zb,{...o,...r,ref:t})});gw.displayName=hw;var vw="MenubarLabel",Tf=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(Jb,{...o,...r,ref:t})});Tf.displayName=vw;var xw="MenubarItem",Rf=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(ew,{...o,...r,ref:t})});Rf.displayName=xw;var yw="MenubarCheckboxItem",Af=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(tw,{...o,...r,ref:t})});Af.displayName=yw;var bw="MenubarRadioGroup",ww=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(nw,{...o,...r,ref:t})});ww.displayName=bw;var Ew="MenubarRadioItem",Df=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(rw,{...o,...r,ref:t})});Df.displayName=Ew;var Sw="MenubarItemIndicator",Pf=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(ow,{...o,...r,ref:t})});Pf.displayName=Sw;var Cw="MenubarSeparator",jf=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(aw,{...o,...r,ref:t})});jf.displayName=Cw;var _w="MenubarArrow",Nw=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(sw,{...o,...r,ref:t})});Nw.displayName=_w;var Tw="MenubarSub",Mf=e=>{const{__scopeMenubar:t,children:n,open:r,onOpenChange:o,defaultOpen:a}=e,s=Ae(t),[i=!1,u]=Ze({prop:r,defaultProp:a,onChange:o});return l.jsx(iw,{...s,open:i,onOpenChange:u,children:n})};Mf.displayName=Tw;var Rw="MenubarSubTrigger",If=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(cw,{"data-radix-menubar-subtrigger":"",...o,...r,ref:t})});If.displayName=Rw;var Aw="MenubarSubContent",kf=d.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Ae(n);return l.jsx(lw,{...o,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});kf.displayName=Aw;function Dw(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $f=wf,Pw=Sf,Of=Cf,jw=_f,Lf=Nf,Ff=Tf,Hf=Rf,Bf=Af,Vf=Df,zf=Pf,Uf=jf,Mw=Mf,Gf=If,Wf=kf;const co=Pw,xn=Mw,Kf=W.forwardRef(({className:e,...t},n)=>l.jsx($f,{ref:n,className:ne("flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm",e),...t}));Kf.displayName=$f.displayName;const lr=W.forwardRef(({className:e,...t},n)=>l.jsx(Of,{ref:n,className:ne("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));lr.displayName=Of.displayName;const Kt=W.forwardRef(({className:e,inset:t,children:n,...r},o)=>l.jsxs(Gf,{ref:o,className:ne("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,l.jsx(r0,{className:"ml-auto size-4"})]}));Kt.displayName=Gf.displayName;const Xt=W.forwardRef(({className:e,...t},n)=>l.jsx(Wf,{ref:n,className:ne("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Xt.displayName=Wf.displayName;const ur=W.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:r=8,...o},a)=>l.jsx(jw,{children:l.jsx(Lf,{ref:a,align:t,alignOffset:n,sideOffset:r,className:ne("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));ur.displayName=Lf.displayName;const he=W.forwardRef(({className:e,inset:t,...n},r)=>l.jsx(Hf,{ref:r,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));he.displayName=Hf.displayName;const He=W.forwardRef(({className:e,children:t,checked:n,...r},o)=>l.jsxs(Bf,{ref:o,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[l.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:l.jsx(zf,{children:l.jsx(Us,{className:"size-4"})})}),t]}));He.displayName=Bf.displayName;const Iw=W.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(Vf,{ref:r,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[l.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:l.jsx(zf,{children:l.jsx(i0,{className:"size-4 fill-current"})})}),t]}));Iw.displayName=Vf.displayName;const kw=W.forwardRef(({className:e,inset:t,...n},r)=>l.jsx(Ff,{ref:r,className:ne("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));kw.displayName=Ff.displayName;const ot=W.forwardRef(({className:e,...t},n)=>l.jsx(Uf,{ref:n,className:ne("-mx-1 my-1 h-px bg-muted",e),...t}));ot.displayName=Uf.displayName;const at=({className:e,...t})=>l.jsx("span",{className:ne("ml-auto text-xs tracking-widest text-muted-foreground",e),...t});at.displayname="MenubarShortcut";var Xf={};const $w=my(z0);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.default=o;var t=$w,n=d,r=function(){function a(){var s=this;this.subscriptions=new Set,this.emit=function(i){var u,c;try{for(var m=(0,t.__values)(s.subscriptions),f=m.next();!f.done;f=m.next()){var p=f.value;p(i)}}catch(h){u={error:h}}finally{try{f&&!f.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}},this.useSubscription=function(i){var u=(0,n.useRef)();u.current=i,(0,n.useEffect)(function(){function c(m){u.current&&u.current(m)}return s.subscriptions.add(c),function(){s.subscriptions.delete(c)}},[])}}return a}();e.EventEmitter=r;function o(){var a=(0,n.useRef)();return a.current||(a.current=new r),a.current}})(Xf);const Yf=d.createContext({databaseType:te.GENERIC,diagramName:"",diagramId:"",tables:[],relationships:[],dependencies:[],schemas:[],filteredSchemas:[],filterSchemas:q,currentDiagram:{id:"",name:"",databaseType:te.GENERIC,createdAt:new Date,updatedAt:new Date},events:new Xf.EventEmitter,updateDiagramId:q,updateDiagramName:q,updateDiagramUpdatedAt:q,loadDiagram:q,clearDiagramData:q,deleteDiagram:q,updateDatabaseType:q,updateDatabaseEdition:q,createTable:q,getTable:q,addTable:q,addTables:q,removeTable:q,removeTables:q,updateTable:q,updateTablesState:q,updateField:q,removeField:q,createField:q,addField:q,getField:q,createIndex:q,addIndex:q,getIndex:q,removeIndex:q,updateIndex:q,createRelationship:q,addRelationship:q,getRelationship:q,removeRelationship:q,updateRelationship:q,removeRelationships:q,addRelationships:q,createDependency:q,addDependency:q,getDependency:q,removeDependency:q,removeDependencies:q,addDependencies:q,updateDependency:q}),ze=()=>d.useContext(Yf),qf=d.createContext({openCreateDiagramDialog:q,closeCreateDiagramDialog:q,openOpenDiagramDialog:q,closeOpenDiagramDialog:q,openExportSQLDialog:q,closeExportSQLDialog:q,closeAlert:q,showAlert:q,closeCreateRelationshipDialog:q,openCreateRelationshipDialog:q,openImportDatabaseDialog:q,closeImportDatabaseDialog:q,openTableSchemaDialog:q,closeTableSchemaDialog:q,openStarUsDialog:q,closeStarUsDialog:q,openExportImageDialog:q,closeExportImageDialog:q}),Ue=()=>d.useContext(qf),Qf=d.createContext({exportImage:q}),Zf=()=>d.useContext(Qf),Jf=d.createContext({config:void 0,updateConfig:q}),Ur=()=>d.useContext(Jf),Ow=void 0,Lw={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1400px"};function Yn(e){const t=Sy({query:`(min-width: ${Lw[e]})`});return{[`is${e[0].toUpperCase()+e.substring(1)}`]:t}}var bt=(e=>(e.REDO="redo",e.UNDO="undo",e.OPEN_DIAGRAM="open_diagram",e.SAVE_DIAGRAM="save_diagram",e))(bt||{});const dl={redo:{action:"redo",keyCombinationLabelMac:"⇧⌘Z",keyCombinationLabelWin:"Ctrl+Shift+Z",keyCombinationMac:"meta+shift+z",keyCombinationWin:"ctrl+shift+z"},undo:{action:"undo",keyCombinationLabelMac:"⌘Z",keyCombinationLabelWin:"Ctrl+Z",keyCombinationMac:"meta+z",keyCombinationWin:"ctrl+z"},open_diagram:{action:"open_diagram",keyCombinationLabelMac:"⌘O",keyCombinationLabelWin:"Ctrl+O",keyCombinationMac:"meta+o",keyCombinationWin:"ctrl+o"},save_diagram:{action:"save_diagram",keyCombinationLabelMac:"⌘S",keyCombinationLabelWin:"Ctrl+S",keyCombinationMac:"meta+s",keyCombinationWin:"ctrl+s"}},fl=py(),Ot=Object.keys(dl).reduce((e,t)=>{const n=dl[t],r=fl==="mac"?n.keyCombinationLabelMac:n.keyCombinationLabelWin,o=fl==="mac"?n.keyCombinationMac:n.keyCombinationWin;return{...e,[t]:{action:n.action,keyCombinationLabel:r,keyCombination:o}}},{}),em=d.createContext({undo:q,redo:q,hasUndo:!1,hasRedo:!1}),tm=()=>d.useContext(em),nm=d.createContext({openedTableInSidebar:void 0,selectedSidebarSection:"tables",openedRelationshipInSidebar:void 0,openRelationshipFromSidebar:q,closeAllRelationshipsInSidebar:q,openedDependencyInSidebar:void 0,openDependencyFromSidebar:q,closeAllDependenciesInSidebar:q,selectSidebarSection:q,openTableFromSidebar:q,closeAllTablesInSidebar:q,isSidePanelShowed:!1,hideSidePanel:q,showSidePanel:q,isSelectSchemaOpen:!1,openSelectSchema:q,closeSelectSchema:q}),Ji=()=>d.useContext(nm);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=Je("Annoyed",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M8 9h2",key:"1g203m"}],["path",{d:"M14 9h2",key:"116p9w"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=Je("FileMinus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=Je("FileOutput",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 7V4a2 2 0 0 1 2-2 2 2 0 0 0-2 2",key:"1vk7w2"}],["path",{d:"M4.063 20.999a2 2 0 0 0 2 1L18 22a2 2 0 0 0 2-2V7l-5-5H6",key:"1jink5"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=Je("FileType2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 13v-1h6v1",key:"1dh9dg"}],["path",{d:"M5 12v6",key:"150t9c"}],["path",{d:"M4 18h2",key:"1xrofg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=Je("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=Je("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=Je("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=Je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=Je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=Je("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),rm=W.forwardRef(({className:e,type:t,...n},r)=>l.jsx("input",{type:t,className:ne("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));rm.displayName="Input";function Yw(){var e=d.useRef(!0);return e.current?(e.current=!1,!0):e.current}var qw=function(e,t){var n=Yw();d.useEffect(function(){if(!n)return e()},t)},Qw=function(){};function om(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function am(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var Zw=typeof window<"u",Jw=["mousedown","touchstart"],eE=function(e,t,n){n===void 0&&(n=Jw);var r=d.useRef(t);d.useEffect(function(){r.current=t},[t]),d.useEffect(function(){for(var o=function(u){var c=e.current;c&&!c.contains(u.target)&&r.current(u)},a=0,s=n;a<s.length;a++){var i=s[a];om(document,i,o)}return function(){for(var u=0,c=n;u<c.length;u++){var m=c[u];am(document,m,o)}}},[n,e])},tE=Zw?window:null,pl=function(e){return!!e.addEventListener},hl=function(e){return!!e.on},nE=function(e,t,n,r){n===void 0&&(n=tE),d.useEffect(function(){if(t&&n)return pl(n)?om(n,e,t,r):hl(n)&&n.on(e,t,r),function(){pl(n)?am(n,e,t,r):hl(n)&&n.off(e,t,r)}},[e,t,n,JSON.stringify(r)])},rE=function(e){return typeof e=="function"?e:typeof e=="string"?function(t){return t.key===e}:e?function(){return!0}:function(){return!1}},gl=function(e,t,n,r){t===void 0&&(t=Qw),n===void 0&&(n={}),r===void 0&&(r=[e]);var o=n.event,a=o===void 0?"keydown":o,s=n.target,i=n.options,u=d.useMemo(function(){var c=rE(e),m=function(f){if(c(f))return t(f)};return m},r);nE(a,u,s,i)},oE=function(e){var t=d.useState([!1,null]),n=t[0],r=t[1];return gl(e,function(o){return r([!0,o])},{event:"keydown"},[n]),gl(e,function(o){return r([!1,o])},{event:"keyup"},[n]),n},aE=function(e,t,n,r){r===void 0&&(r=oE);var o=r(e),a=o[0],s=o[1];qw(function(){!a&&n?n(s):a&&t&&t(s)},[a])};const sE="/assets/supabase-iL5W9P0f.png",iE="/assets/timescale-B780uPT1.png",cE="/assets/mysql_5_7-B1Fg8tcc.png";var lE=(e=>(e.POSTGRESQL_SUPABASE="supabase",e.POSTGRESQL_TIMESCALE="timescale",e.MYSQL_5_7="mysql_5_7",e.SQL_SERVER_2016_AND_BELOW="sql_server_2016_and_below",e))(lE||{});const No={supabase:"Supabase",timescale:"Timescale",mysql_5_7:"V5.7",sql_server_2016_and_below:"2016 and below"},sm={supabase:sE,timescale:iE,mysql_5_7:cE,sql_server_2016_and_below:Cy},vl={[te.POSTGRESQL]:["supabase","timescale"],[te.MYSQL]:["mysql_5_7"],[te.SQL_SERVER]:["sql_server_2016_and_below"],[te.SQLITE]:[],[te.GENERIC]:[],[te.MARIADB]:[]},ec=W.forwardRef(({diagram:e},t)=>e.databaseEdition?l.jsxs(Fs,{children:[l.jsx(Hs,{className:"mr-1",ref:t,children:l.jsx("img",{src:sm[e.databaseEdition],className:"h-5 max-w-fit rounded-full",alt:"database"})}),l.jsx(Bs,{children:No[e.databaseEdition]})]}):l.jsxs(Fs,{children:[l.jsx(Hs,{className:"mr-2",ref:t,children:l.jsx("img",{src:od[e.databaseType],className:"h-5 max-w-fit",alt:"database"})}),l.jsx(Bs,{children:Pe[e.databaseType]})]}));ec.displayName="DiagramIcon";const xl=()=>{const{diagramName:e,updateDiagramName:t,currentDiagram:n}=ze(),{t:r}=Te(),{isMd:o}=Yn("md"),[a,s]=d.useState(!1),[i,u]=W.useState(e),c=W.useRef(null);d.useEffect(()=>{u(e)},[e]);const m=d.useCallback(()=>{a&&(i.trim()&&t(i.trim()),s(!1))},[i,t,a]);eE(c,m),aE("Enter",m);const f=p=>{p.stopPropagation(),s(!0)};return l.jsxs(l.Fragment,{children:[l.jsx(ec,{diagram:n}),l.jsx("div",{className:"flex",children:o?l.jsxs(mr,{children:[r("diagrams"),"/"]}):null}),l.jsx("div",{className:"flex flex-row items-center gap-1",children:a?l.jsxs(l.Fragment,{children:[l.jsx(rm,{ref:c,autoFocus:!0,type:"text",placeholder:e,value:i,onClick:p=>p.stopPropagation(),onChange:p=>u(p.target.value),className:"ml-1 h-7 focus-visible:ring-0"}),l.jsx(we,{variant:"ghost",className:"hidden size-7 p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 group-hover:flex dark:text-slate-400 dark:hover:text-slate-300",onClick:m,children:l.jsx(Hw,{})})]}):l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:ne(_y()),children:e}),l.jsx(we,{variant:"ghost",className:"hidden size-7 p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 group-hover:flex dark:text-slate-400 dark:hover:text-slate-300",onClick:f,children:l.jsx(Kw,{})})]})})]})};var uE=["second","minute","hour","day","week","month","year"];function dE(e,t){if(t===0)return["just now","right now"];var n=uE[Math.floor(t/2)];return e>1&&(n+="s"),[e+" "+n+" ago","in "+e+" "+n]}var fE=["秒","分钟","小时","天","周","个月","年"];function mE(e,t){if(t===0)return["刚刚","片刻后"];var n=fE[~~(t/2)];return[e+" "+n+"前",e+" "+n+"后"]}var Zs={},im=function(e,t){Zs[e]=t},cm=function(e){return Zs[e]||Zs.en_US},Zt=[60,60,24,7,365/7/12,12];function yl(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function lm(e,t){var n=e<0?1:0;e=Math.abs(e);for(var r=e,o=0;e>=Zt[o]&&o<Zt.length;o++)e/=Zt[o];return e=Math.floor(e),o*=2,e>(o===0?9:1)&&(o+=1),t(e,o,r)[n].replace("%s",e.toString())}function um(e,t){var n=t?yl(t):new Date;return(+n-+yl(e))/1e3}function pE(e){for(var t=1,n=0,r=Math.abs(e);e>=Zt[n]&&n<Zt.length;n++)e/=Zt[n],t*=Zt[n];return r=r%t,r=r?t-r:t,Math.ceil(r)}var hE=function(e,t,n){var r=um(e,n&&n.relativeDate);return lm(r,cm(t))},dm="timeago-id";function gE(e){return e.getAttribute("datetime")}function vE(e,t){e.setAttribute(dm,t)}function fm(e){return parseInt(e.getAttribute(dm))}var tc={},Js=function(e){clearTimeout(e),delete tc[e]};function mm(e,t,n,r){Js(fm(e));var o=r.relativeDate,a=r.minInterval,s=um(t,o);e.innerText=lm(s,n);var i=setTimeout(function(){mm(e,t,n,r)},Math.min(Math.max(pE(s),a||1)*1e3,2147483647));tc[i]=0,vE(e,i)}function bl(e){e?Js(fm(e)):Object.keys(tc).forEach(Js)}function xE(e,t,n){var r=e.length?e:[e];return r.forEach(function(o){mm(o,gE(o),cm(t),n||{})}),r}im("en_US",dE);im("zh_CN",mE);var yE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ei=function(){return ei=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ei.apply(this,arguments)},bE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},wE=function(e){return""+(e instanceof Date?e.getTime():e)},EE=function(e){yE(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dom=null,n}return t.prototype.componentDidMount=function(){this.renderTimeAgo()},t.prototype.componentDidUpdate=function(){this.renderTimeAgo()},t.prototype.renderTimeAgo=function(){var n=this.props,r=n.live,o=n.datetime,a=n.locale,s=n.opts;bl(this.dom),r!==!1&&(this.dom.setAttribute("datetime",wE(o)),xE(this.dom,a,s))},t.prototype.componentWillUnmount=function(){bl(this.dom)},t.prototype.render=function(){var n=this,r=this.props,o=r.datetime;r.live;var a=r.locale,s=r.opts,i=bE(r,["datetime","live","locale","opts"]);return d.createElement("time",ei({ref:function(u){n.dom=u}},i),hE(o,a,s))},t.defaultProps={live:!0,className:""},t}(d.PureComponent);const SE=Lr("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function CE({className:e,variant:t,...n}){return l.jsx("div",{className:ne(SE({variant:t}),e),...n})}const wl=()=>{const{currentDiagram:e}=ze(),{t}=Te(),{isMd:n}=Yn("md");return l.jsxs(Fs,{children:[l.jsx(Hs,{children:l.jsxs(CE,{variant:"secondary",className:"flex gap-1",children:[t(n?"last_saved":"saved"),l.jsx(EE,{datetime:e.updatedAt})]})}),l.jsx(Bs,{children:e.updatedAt.toLocaleString()})]})},_E=()=>{const{clearDiagramData:e,deleteDiagram:t,updateDiagramUpdatedAt:n}=ze(),{openCreateDiagramDialog:r,openOpenDiagramDialog:o,openExportSQLDialog:a,openImportDatabaseDialog:s,showAlert:i,openExportImageDialog:u}=Ue(),{setTheme:c,theme:m}=zs(),{hideSidePanel:f,isSidePanelShowed:p,showSidePanel:h}=Ji(),{scrollAction:v,setScrollAction:g,setShowCardinality:y,showCardinality:x,setShowDependenciesOnCanvas:S,showDependenciesOnCanvas:E}=ia(),{effectiveTheme:w}=zs(),{t:C,i18n:_}=Te(),{redo:N,undo:T,hasRedo:A,hasUndo:j}=tm(),{isMd:k}=Yn("md"),{config:R,updateConfig:D}=Ur(),{exportImage:b}=Zf(),I=()=>{r()},P=()=>{o()},L=d.useCallback(()=>{b("svg",1)},[b]),$=d.useCallback(()=>{u({format:"png"})},[u]),M=d.useCallback(()=>{u({format:"jpeg"})},[u]),V=d.useCallback(()=>{window.location.href="https://chartdb.io"},[]),G=d.useCallback(()=>{window.open("https://discord.gg/QeFwyWSKwC","_blank")},[]),O=d.useCallback(()=>{window.open("https://calendly.com/fishner/15min","_blank")},[]),H=d.useCallback(se=>{if(se===te.GENERIC){a({targetDatabaseType:te.GENERIC});return}a({targetDatabaseType:se})},[R==null?void 0:R.exportActions,D,i,a]),U=d.useCallback(()=>l.jsx("iframe",{src:`https://ghbtns.com/github-btn.html?user=chartdb&repo=chartdb&type=star&size=${k?"large":"small"}&text=false`,width:k?"40":"25",height:k?"30":"20",title:"GitHub"}),[k]),z=d.useCallback(()=>{p?f():h()},[p,h,f]),Y=d.useCallback(()=>{y(!x)},[x,y]),K=d.useCallback(()=>{S(!E)},[E,S]),X="✨",J=d.useCallback(se=>{_.changeLanguage(se)},[_]);return l.jsxs("nav",{className:"flex h-20 flex-col justify-between border-b px-3 md:h-12 md:flex-row md:items-center md:px-4",children:[l.jsxs("div",{className:"flex flex-1 justify-between gap-x-3 md:justify-normal",children:[l.jsx("div",{className:"flex py-[10px] font-primary md:items-center md:py-0",children:l.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:l.jsx("img",{src:w==="light"?Ny:Ty,alt:"chartDB",className:"h-4 max-w-fit"})})}),l.jsx("div",{children:l.jsxs(Kf,{className:"border-none shadow-none",children:[l.jsxs(co,{children:[l.jsx(lr,{children:C("menu.file.file")}),l.jsxs(ur,{children:[l.jsx(he,{onClick:I,children:C("menu.file.new")}),l.jsxs(he,{onClick:P,children:[C("menu.file.open"),l.jsx(at,{children:Ot[bt.OPEN_DIAGRAM].keyCombinationLabel})]}),l.jsxs(he,{onClick:n,children:[C("menu.file.save"),l.jsx(at,{children:Ot[bt.SAVE_DIAGRAM].keyCombinationLabel})]}),l.jsx(ot,{}),l.jsxs(xn,{children:[l.jsx(Kt,{children:C("menu.file.import_database")}),l.jsxs(Xt,{children:[l.jsx(he,{onClick:()=>s({databaseType:te.POSTGRESQL}),children:Pe.postgresql}),l.jsx(he,{onClick:()=>s({databaseType:te.MYSQL}),children:Pe.mysql}),l.jsx(he,{onClick:()=>s({databaseType:te.SQL_SERVER}),children:Pe.sql_server}),l.jsx(he,{onClick:()=>s({databaseType:te.MARIADB}),children:Pe.mariadb}),l.jsx(he,{onClick:()=>s({databaseType:te.SQLITE}),children:Pe.sqlite})]})]}),l.jsx(ot,{}),l.jsxs(xn,{children:[l.jsx(Kt,{children:C("menu.file.export_sql")}),l.jsxs(Xt,{children:[l.jsx(he,{onClick:()=>H(te.GENERIC),children:Pe.generic}),l.jsxs(he,{onClick:()=>H(te.POSTGRESQL),children:[Pe.postgresql,l.jsx(at,{className:"text-base",children:X})]}),l.jsxs(he,{onClick:()=>H(te.MYSQL),children:[Pe.mysql,l.jsx(at,{className:"text-base",children:X})]}),l.jsxs(he,{onClick:()=>H(te.SQL_SERVER),children:[Pe.sql_server,l.jsx(at,{className:"text-base",children:X})]}),l.jsxs(he,{onClick:()=>H(te.MARIADB),children:[Pe.mariadb,l.jsx(at,{className:"text-base",children:X})]}),l.jsxs(he,{onClick:()=>H(te.SQLITE),children:[Pe.sqlite,l.jsx(at,{className:"text-base",children:X})]})]})]}),l.jsxs(xn,{children:[l.jsx(Kt,{children:C("menu.file.export_as")}),l.jsxs(Xt,{children:[l.jsx(he,{onClick:$,children:"PNG"}),l.jsx(he,{onClick:M,children:"JPG"}),l.jsx(he,{onClick:L,children:"SVG"})]})]}),l.jsx(ot,{}),l.jsx(he,{onClick:()=>i({title:C("delete_diagram_alert.title"),description:C("delete_diagram_alert.description"),actionLabel:C("delete_diagram_alert.delete"),closeLabel:C("delete_diagram_alert.cancel"),onAction:t}),children:C("menu.file.delete_diagram")}),l.jsx(ot,{}),l.jsx(he,{children:C("menu.file.exit")})]})]}),l.jsxs(co,{children:[l.jsx(lr,{children:C("menu.edit.edit")}),l.jsxs(ur,{children:[l.jsxs(he,{onClick:T,disabled:!j,children:[C("menu.edit.undo"),l.jsx(at,{children:Ot[bt.UNDO].keyCombinationLabel})]}),l.jsxs(he,{onClick:N,disabled:!A,children:[C("menu.edit.redo"),l.jsx(at,{children:Ot[bt.REDO].keyCombinationLabel})]}),l.jsx(ot,{}),l.jsx(he,{onClick:()=>i({title:C("clear_diagram_alert.title"),description:C("clear_diagram_alert.description"),actionLabel:C("clear_diagram_alert.clear"),closeLabel:C("clear_diagram_alert.cancel"),onAction:e}),children:C("menu.edit.clear")})]})]}),l.jsxs(co,{children:[l.jsx(lr,{children:C("menu.view.view")}),l.jsxs(ur,{children:[l.jsx(he,{onClick:z,children:C(p?"menu.view.hide_sidebar":"menu.view.show_sidebar")}),l.jsx(ot,{}),l.jsx(he,{onClick:Y,children:C(x?"menu.view.hide_cardinality":"menu.view.show_cardinality")}),l.jsx(he,{onClick:K,children:C(E?"menu.view.hide_dependencies":"menu.view.show_dependencies")}),l.jsx(ot,{}),l.jsxs(xn,{children:[l.jsx(Kt,{children:C("menu.view.zoom_on_scroll")}),l.jsxs(Xt,{children:[l.jsx(He,{checked:v==="zoom",onClick:()=>g("zoom"),children:C("zoom.on")}),l.jsx(He,{checked:v==="pan",onClick:()=>g("pan"),children:C("zoom.off")})]})]}),l.jsx(ot,{}),l.jsxs(xn,{children:[l.jsx(Kt,{children:C("menu.view.theme")}),l.jsxs(Xt,{children:[l.jsx(He,{checked:m==="system",onClick:()=>c("system"),children:C("theme.system")}),l.jsx(He,{checked:m==="light",onClick:()=>c("light"),children:C("theme.light")}),l.jsx(He,{checked:m==="dark",onClick:()=>c("dark"),children:C("theme.dark")})]})]}),l.jsx(ot,{}),l.jsxs(xn,{children:[l.jsx(Kt,{children:C("menu.view.change_language")}),l.jsxs(Xt,{children:[l.jsx(He,{onClick:()=>J(Za.code),checked:_.language===Za.code,children:Za.name}),l.jsx(He,{onClick:()=>J(Ja.code),checked:_.language===Ja.code,children:Ja.name}),l.jsx(He,{onClick:()=>J(es.code),checked:_.language===es.code,children:es.name}),l.jsx(He,{onClick:()=>J(ts.code),checked:_.language===ts.code,children:ts.name}),l.jsx(He,{onClick:()=>J(ns.code),checked:_.language===ns.code,children:ns.name}),l.jsx(He,{onClick:()=>J(rs.code),checked:_.language===rs.code,children:rs.name})]})]})]})]}),l.jsxs(co,{children:[l.jsx(lr,{children:C("menu.help.help")}),l.jsxs(ur,{children:[l.jsx(he,{onClick:V,children:C("menu.help.visit_website")}),l.jsx(he,{onClick:G,children:C("menu.help.join_discord")}),l.jsx(he,{onClick:O,children:C("menu.help.schedule_a_call")})]})]})]})})]}),k?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"group flex flex-1 flex-row items-center justify-center",children:l.jsx(xl,{})}),l.jsxs("div",{className:"hidden flex-1 items-center justify-end gap-2 sm:flex",children:[l.jsx(wl,{}),U()]})]}):l.jsxs("div",{className:"flex flex-1 flex-row justify-between gap-2",children:[l.jsx("div",{className:"group flex flex-1 flex-row items-center",children:l.jsx(xl,{})}),l.jsx("div",{className:"flex items-center",children:l.jsx(wl,{})}),l.jsx("div",{className:"flex items-center",children:U()})]})]})},pm=d.createContext({redoStack:[],undoStack:[],addRedoAction:q,addUndoAction:q,resetRedoStack:q,resetUndoStack:q,hasRedo:!1,hasUndo:!1}),wa=()=>d.useContext(pm);var nc="ToastProvider",[rc,NE,TE]=la("Toast"),[hm,bI]=ct("Toast",[TE]),[RE,Ea]=hm(nc),gm=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:a=50,children:s}=e,[i,u]=d.useState(null),[c,m]=d.useState(0),f=d.useRef(!1),p=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${nc}\`. Expected non-empty \`string\`.`),l.jsx(rc.Provider,{scope:t,children:l.jsx(RE,{scope:t,label:n,duration:r,swipeDirection:o,swipeThreshold:a,toastCount:c,viewport:i,onViewportChange:u,onToastAdd:d.useCallback(()=>m(h=>h+1),[]),onToastRemove:d.useCallback(()=>m(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:s})})};gm.displayName=nc;var vm="ToastViewport",AE=["F8"],ti="toast.viewportPause",ni="toast.viewportResume",xm=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=AE,label:o="Notifications ({hotkey})",...a}=e,s=Ea(vm,n),i=NE(n),u=d.useRef(null),c=d.useRef(null),m=d.useRef(null),f=d.useRef(null),p=xe(t,f,s.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=s.toastCount>0;d.useEffect(()=>{const y=x=>{var E;r.length!==0&&r.every(w=>x[w]||x.code===w)&&((E=f.current)==null||E.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),d.useEffect(()=>{const y=u.current,x=f.current;if(v&&y&&x){const S=()=>{if(!s.isClosePausedRef.current){const _=new CustomEvent(ti);x.dispatchEvent(_),s.isClosePausedRef.current=!0}},E=()=>{if(s.isClosePausedRef.current){const _=new CustomEvent(ni);x.dispatchEvent(_),s.isClosePausedRef.current=!1}},w=_=>{!y.contains(_.relatedTarget)&&E()},C=()=>{y.contains(document.activeElement)||E()};return y.addEventListener("focusin",S),y.addEventListener("focusout",w),y.addEventListener("pointermove",S),y.addEventListener("pointerleave",C),window.addEventListener("blur",S),window.addEventListener("focus",E),()=>{y.removeEventListener("focusin",S),y.removeEventListener("focusout",w),y.removeEventListener("pointermove",S),y.removeEventListener("pointerleave",C),window.removeEventListener("blur",S),window.removeEventListener("focus",E)}}},[v,s.isClosePausedRef]);const g=d.useCallback(({tabbingDirection:y})=>{const S=i().map(E=>{const w=E.ref.current,C=[w,...VE(w)];return y==="forwards"?C:C.reverse()});return(y==="forwards"?S.reverse():S).flat()},[i]);return d.useEffect(()=>{const y=f.current;if(y){const x=S=>{var C,_,N;const E=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!E){const T=document.activeElement,A=S.shiftKey;if(S.target===y&&A){(C=c.current)==null||C.focus();return}const R=g({tabbingDirection:A?"backwards":"forwards"}),D=R.findIndex(b=>b===T);ps(R.slice(D+1))?S.preventDefault():A?(_=c.current)==null||_.focus():(N=m.current)==null||N.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[i,g]),l.jsxs(hy,{ref:u,role:"region","aria-label":o.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&l.jsx(ri,{ref:c,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});ps(y)}}),l.jsx(rc.Slot,{scope:n,children:l.jsx(le.ol,{tabIndex:-1,...a,ref:p})}),v&&l.jsx(ri,{ref:m,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});ps(y)}})]})});xm.displayName=vm;var ym="ToastFocusProxy",ri=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=e,a=Ea(ym,n);return l.jsx(nd,{"aria-hidden":!0,tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:s=>{var c;const i=s.relatedTarget;!((c=a.viewport)!=null&&c.contains(i))&&r()}})});ri.displayName=ym;var Sa="Toast",DE="toast.swipeStart",PE="toast.swipeMove",jE="toast.swipeCancel",ME="toast.swipeEnd",bm=d.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:a,...s}=e,[i=!0,u]=Ze({prop:r,defaultProp:o,onChange:a});return l.jsx(Re,{present:n||i,children:l.jsx($E,{open:i,...s,ref:t,onClose:()=>u(!1),onPause:Ce(e.onPause),onResume:Ce(e.onResume),onSwipeStart:Z(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(e.onSwipeMove,c=>{const{x:m,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Z(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(e.onSwipeEnd,c=>{const{x:m,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),u(!1)})})})});bm.displayName=Sa;var[IE,kE]=hm(Sa,{onClose(){}}),$E=d.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:a,onClose:s,onEscapeKeyDown:i,onPause:u,onResume:c,onSwipeStart:m,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:h,...v}=e,g=Ea(Sa,n),[y,x]=d.useState(null),S=xe(t,b=>x(b)),E=d.useRef(null),w=d.useRef(null),C=o||g.duration,_=d.useRef(0),N=d.useRef(C),T=d.useRef(0),{onToastAdd:A,onToastRemove:j}=g,k=Ce(()=>{var I;(y==null?void 0:y.contains(document.activeElement))&&((I=g.viewport)==null||I.focus()),s()}),R=d.useCallback(b=>{!b||b===1/0||(window.clearTimeout(T.current),_.current=new Date().getTime(),T.current=window.setTimeout(k,b))},[k]);d.useEffect(()=>{const b=g.viewport;if(b){const I=()=>{R(N.current),c==null||c()},P=()=>{const L=new Date().getTime()-_.current;N.current=N.current-L,window.clearTimeout(T.current),u==null||u()};return b.addEventListener(ti,P),b.addEventListener(ni,I),()=>{b.removeEventListener(ti,P),b.removeEventListener(ni,I)}}},[g.viewport,C,u,c,R]),d.useEffect(()=>{a&&!g.isClosePausedRef.current&&R(C)},[a,C,g.isClosePausedRef,R]),d.useEffect(()=>(A(),()=>j()),[A,j]);const D=d.useMemo(()=>y?Tm(y):null,[y]);return g.viewport?l.jsxs(l.Fragment,{children:[D&&l.jsx(OE,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),l.jsx(IE,{scope:n,onClose:k,children:Fi.createPortal(l.jsx(rc.ItemSlot,{scope:n,children:l.jsx(gy,{asChild:!0,onEscapeKeyDown:Z(i,()=>{g.isFocusedToastEscapeKeyDownRef.current||k(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:S,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Z(e.onKeyDown,b=>{b.key==="Escape"&&(i==null||i(b.nativeEvent),b.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:Z(e.onPointerDown,b=>{b.button===0&&(E.current={x:b.clientX,y:b.clientY})}),onPointerMove:Z(e.onPointerMove,b=>{if(!E.current)return;const I=b.clientX-E.current.x,P=b.clientY-E.current.y,L=!!w.current,$=["left","right"].includes(g.swipeDirection),M=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,V=$?M(0,I):0,G=$?0:M(0,P),O=b.pointerType==="touch"?10:2,H={x:V,y:G},U={originalEvent:b,delta:H};L?(w.current=H,lo(PE,f,U,{discrete:!1})):El(H,g.swipeDirection,O)?(w.current=H,lo(DE,m,U,{discrete:!1}),b.target.setPointerCapture(b.pointerId)):(Math.abs(I)>O||Math.abs(P)>O)&&(E.current=null)}),onPointerUp:Z(e.onPointerUp,b=>{const I=w.current,P=b.target;if(P.hasPointerCapture(b.pointerId)&&P.releasePointerCapture(b.pointerId),w.current=null,E.current=null,I){const L=b.currentTarget,$={originalEvent:b,delta:I};El(I,g.swipeDirection,g.swipeThreshold)?lo(ME,h,$,{discrete:!0}):lo(jE,p,$,{discrete:!0}),L.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),OE=e=>{const{__scopeToast:t,children:n,...r}=e,o=Ea(Sa,t),[a,s]=d.useState(!1),[i,u]=d.useState(!1);return HE(()=>s(!0)),d.useEffect(()=>{const c=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(c)},[]),i?null:l.jsx(Fr,{asChild:!0,children:l.jsx(nd,{...r,children:a&&l.jsxs(l.Fragment,{children:[o.label," ",n]})})})},LE="ToastTitle",wm=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(le.div,{...r,ref:t})});wm.displayName=LE;var FE="ToastDescription",Em=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(le.div,{...r,ref:t})});Em.displayName=FE;var Sm="ToastAction",Cm=d.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?l.jsx(Nm,{altText:n,asChild:!0,children:l.jsx(oc,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Sm}\`. Expected non-empty \`string\`.`),null)});Cm.displayName=Sm;var _m="ToastClose",oc=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,o=kE(_m,n);return l.jsx(Nm,{asChild:!0,children:l.jsx(le.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,o.onClose)})})});oc.displayName=_m;var Nm=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...o}=e;return l.jsx(le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:t})});function Tm(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),BE(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!o)if(a){const s=r.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...Tm(r))}}),t}function lo(e,t,n,{discrete:r}){const o=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?td(o,a):o.dispatchEvent(a)}var El=(e,t,n=0)=>{const r=Math.abs(e.x),o=Math.abs(e.y),a=r>o;return t==="left"||t==="right"?a&&r>n:!a&&o>n};function HE(e=()=>{}){const t=Ce(e);Or(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function BE(e){return e.nodeType===e.ELEMENT_NODE}function VE(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ps(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var zE=gm,Rm=xm,Am=bm,Dm=wm,Pm=Em,jm=Cm,Mm=oc;const UE=zE,Im=W.forwardRef(({className:e,...t},n)=>l.jsx(Rm,{ref:n,className:ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Im.displayName=Rm.displayName;const GE=Lr("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),km=W.forwardRef(({className:e,variant:t,...n},r)=>l.jsx(Am,{ref:r,className:ne(GE({variant:t}),e),...n}));km.displayName=Am.displayName;const oi=W.forwardRef(({className:e,...t},n)=>l.jsx(jm,{ref:n,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));oi.displayName=jm.displayName;const $m=W.forwardRef(({className:e,...t},n)=>l.jsx(Mm,{ref:n,className:ne("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:l.jsx(An,{className:"size-4"})}));$m.displayName=Mm.displayName;const Om=W.forwardRef(({className:e,...t},n)=>l.jsx(Dm,{ref:n,className:ne("text-sm font-semibold [&+div]:text-xs",e),...t}));Om.displayName=Dm.displayName;const Lm=W.forwardRef(({className:e,...t},n)=>l.jsx(Pm,{ref:n,className:ne("text-sm opacity-90",e),...t}));Lm.displayName=Pm.displayName;const WE=1,KE=1e6;let hs=0;function XE(){return hs=(hs+1)%Number.MAX_SAFE_INTEGER,hs.toString()}const gs=new Map,Sl=e=>{if(gs.has(e))return;const t=setTimeout(()=>{gs.delete(e),vr({type:"REMOVE_TOAST",toastId:e})},KE);gs.set(e,t)},YE=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,WE)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Sl(n):e.toasts.forEach(r=>{Sl(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},To=[];let Ro={toasts:[]};function vr(e){Ro=YE(Ro,e),To.forEach(t=>{t(Ro)})}function qE({...e}){const t=XE(),n=o=>vr({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>vr({type:"DISMISS_TOAST",toastId:t});return vr({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function Fm(){const[e,t]=W.useState(Ro);return W.useEffect(()=>(To.push(t),()=>{const n=To.indexOf(t);n>-1&&To.splice(n,1)}),[e]),{...e,toast:qE,dismiss:n=>vr({type:"DISMISS_TOAST",toastId:n})}}function QE(){const{toasts:e}=Fm();return l.jsxs(UE,{children:[e.map(function({id:t,title:n,description:r,action:o,layout:a="row",...s}){return l.jsxs(km,{...s,children:[l.jsxs("div",{className:`grid gap-1${a==="column"?" w-full":""}`,children:[n&&l.jsx(Om,{children:n}),r&&l.jsx(Lm,{children:r}),a==="column"?l.jsx("div",{className:"mt-2",children:o}):null]}),a==="row"?o:null,l.jsx($m,{})]},t)}),l.jsx(Im,{})]})}const Hm=d.createContext({showLoader:q,hideLoader:q}),Bm=()=>d.useContext(Hm);var ac="Dialog",[Vm,zm]=ct(ac),[ZE,et]=Vm(ac),Um=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:s=!0}=e,i=d.useRef(null),u=d.useRef(null),[c=!1,m]=Ze({prop:r,defaultProp:o,onChange:a});return l.jsx(ZE,{scope:t,triggerRef:i,contentRef:u,contentId:Qe(),titleId:Qe(),descriptionId:Qe(),open:c,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(f=>!f),[m]),modal:s,children:n})};Um.displayName=ac;var Gm="DialogTrigger",Wm=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=et(Gm,n),a=xe(t,o.triggerRef);return l.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":lc(o.open),...r,ref:a,onClick:Z(e.onClick,o.onOpenToggle)})});Wm.displayName=Gm;var sc="DialogPortal",[JE,Km]=Vm(sc,{forceMount:void 0}),Xm=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=et(sc,t);return l.jsx(JE,{scope:t,forceMount:n,children:d.Children.map(r,s=>l.jsx(Re,{present:n||a.open,children:l.jsx(Fr,{asChild:!0,container:o,children:s})}))})};Xm.displayName=sc;var $o="DialogOverlay",Ym=d.forwardRef((e,t)=>{const n=Km($o,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=et($o,e.__scopeDialog);return a.modal?l.jsx(Re,{present:r||a.open,children:l.jsx(eS,{...o,ref:t})}):null});Ym.displayName=$o;var eS=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=et($o,n);return l.jsx(xa,{as:yr,allowPinchZoom:!0,shards:[o.contentRef],children:l.jsx(le.div,{"data-state":lc(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),on="DialogContent",qm=d.forwardRef((e,t)=>{const n=Km(on,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=et(on,e.__scopeDialog);return l.jsx(Re,{present:r||a.open,children:a.modal?l.jsx(tS,{...o,ref:t}):l.jsx(nS,{...o,ref:t})})});qm.displayName=on;var tS=d.forwardRef((e,t)=>{const n=et(on,e.__scopeDialog),r=d.useRef(null),o=xe(t,n.contentRef,r);return d.useEffect(()=>{const a=r.current;if(a)return pa(a)},[]),l.jsx(Qm,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(e.onCloseAutoFocus,a=>{var s;a.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Z(e.onPointerDownOutside,a=>{const s=a.detail.originalEvent,i=s.button===0&&s.ctrlKey===!0;(s.button===2||i)&&a.preventDefault()}),onFocusOutside:Z(e.onFocusOutside,a=>a.preventDefault())})}),nS=d.forwardRef((e,t)=>{const n=et(on,e.__scopeDialog),r=d.useRef(!1),o=d.useRef(!1);return l.jsx(Qm,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,i;(s=e.onCloseAutoFocus)==null||s.call(e,a),a.defaultPrevented||(r.current||(i=n.triggerRef.current)==null||i.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=a.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),Qm=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...s}=e,i=et(on,n),u=d.useRef(null),c=xe(t,u);return Hi(),l.jsxs(l.Fragment,{children:[l.jsx(ua,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:l.jsx(oa,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":lc(i.open),...s,ref:c,onDismiss:()=>i.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(oS,{titleId:i.titleId}),l.jsx(sS,{contentRef:u,descriptionId:i.descriptionId})]})]})}),ic="DialogTitle",cc=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=et(ic,n);return l.jsx(le.h2,{id:o.titleId,...r,ref:t})});cc.displayName=ic;var Zm="DialogDescription",Jm=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=et(Zm,n);return l.jsx(le.p,{id:o.descriptionId,...r,ref:t})});Jm.displayName=Zm;var ep="DialogClose",tp=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=et(ep,n);return l.jsx(le.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,()=>o.onOpenChange(!1))})});tp.displayName=ep;function lc(e){return e?"open":"closed"}var np="DialogTitleWarning",[rS,rp]=vy(np,{contentName:on,titleName:ic,docsSlug:"dialog"}),oS=({titleId:e})=>{const t=rp(np),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},aS="DialogDescriptionWarning",sS=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${rp(aS).contentName}}.`;return d.useEffect(()=>{var a;const o=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},op=Um,ap=Wm,uc=Xm,Gr=Ym,Wr=qm,Kr=cc,Xr=Jm,Yr=tp;const lt=op,iS=uc,ke=Yr,sp=W.forwardRef(({className:e,...t},n)=>l.jsx(Gr,{ref:n,className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));sp.displayName=Gr.displayName;const tt=W.forwardRef(({className:e,children:t,showClose:n,...r},o)=>l.jsxs(iS,{children:[l.jsx(sp,{}),l.jsxs(Wr,{ref:o,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n&&l.jsxs(Yr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(An,{className:"size-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tt.displayName=Wr.displayName;const Nt=({className:e,...t})=>l.jsx("div",{className:ne("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Nt.displayName="DialogHeader";const Tt=({className:e,...t})=>l.jsx("div",{className:ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Tt.displayName="DialogFooter";const ut=W.forwardRef(({className:e,...t},n)=>l.jsx(Kr,{ref:n,className:ne("text-lg font-semibold leading-none tracking-tight",e),...t}));ut.displayName=Kr.displayName;const dt=W.forwardRef(({className:e,...t},n)=>l.jsx(Xr,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));dt.displayName=Xr.displayName;const cS=Lr("flex-col items-center justify-center",{variants:{show:{true:"flex",false:"hidden"}},defaultVariants:{show:!0}}),lS=Lr("animate-spin text-primary",{variants:{size:{small:"size-6",medium:"size-8",large:"size-12"}},defaultVariants:{size:"medium"}});function Sr({size:e,show:t,children:n,className:r}){return l.jsxs("span",{className:cS({show:t}),children:[l.jsx(Ww,{className:ne(lS({size:e}),r)}),n]})}const uS=({children:e})=>{const[t,n]=W.useState(!1),[r,o]=W.useState(!0),a=W.useCallback(()=>{n(!1)},[]),s=W.useCallback(i=>{o((i==null?void 0:i.animated)??!0),n(!0)},[]);return l.jsxs(Hm.Provider,{value:{showLoader:s,hideLoader:a},children:[e,l.jsx(lt,{open:t,children:l.jsxs(tt,{className:"justify-center border-none bg-transparent shadow-none outline-none",children:[l.jsx(cc,{className:"hidden"}),l.jsx(dt,{className:"hidden"}),l.jsx("div",{className:"w-fit rounded-xl bg-primary-foreground p-3",children:r?l.jsx(Sr,{size:"large",className:"text-primary"}):l.jsx(zw,{className:"size-12 text-primary"})})]})})]})},dS=({children:e})=>{const{isMd:t}=Yn("md"),[n,r]=W.useState(),[o,a]=W.useState(),[s,i]=W.useState(),[u,c]=W.useState("tables"),[m,f]=W.useState(t),[p,h]=W.useState(!1),v=()=>r(""),g=()=>a(""),y=()=>i(""),x=()=>f(!1),S=()=>f(!0),E=T=>{S(),c("tables"),r(T)},w=T=>{S(),c("relationships"),a(T)},C=T=>{S(),c("dependencies"),i(T)},_=()=>h(!0),N=()=>h(!1);return l.jsx(nm.Provider,{value:{openedTableInSidebar:n,selectedSidebarSection:u,openTableFromSidebar:E,selectSidebarSection:c,openedRelationshipInSidebar:o,openRelationshipFromSidebar:w,closeAllTablesInSidebar:v,closeAllRelationshipsInSidebar:g,isSidePanelShowed:m,hideSidePanel:x,showSidePanel:S,isSelectSchemaOpen:p,openSelectSchema:_,closeSelectSchema:N,openedDependencyInSidebar:s,openDependencyFromSidebar:C,closeAllDependenciesInSidebar:y},children:e})},fS=({children:e})=>{const{getConfig:t,updateConfig:n}=ca(),[r,o]=W.useState();d.useEffect(()=>{(async()=>{const i=await t();o(i)})()},[t]);const a=async s=>{await n(s),o(i=>i?{...i,...s}:{defaultDiagramId:"",...s})};return l.jsx(Jf.Provider,{value:{config:r,updateConfig:a},children:e})},mS=({children:e})=>{const[t,n]=W.useState([]),[r,o]=W.useState([]),a=d.useCallback(f=>{o(p=>[...p,f])},[o]),s=d.useCallback(f=>{n(p=>[...p,f])},[n]),i=d.useCallback(()=>{o([])},[o]),u=d.useCallback(()=>{n([])},[n]),c=r.length>0,m=t.length>0;return l.jsx(pm.Provider,{value:{redoStack:r,undoStack:t,addRedoAction:a,addUndoAction:s,resetRedoStack:i,resetUndoStack:u,hasRedo:c,hasUndo:m},children:e})},pS={[te.POSTGRESQL]:"public",[te.SQL_SERVER]:"dbo"};var hS=function(){function e(){var t=this;this.subscriptions=new Set,this.emit=function(n){var r,o;try{for(var a=br(t.subscriptions),s=a.next();!s.done;s=a.next()){var i=s.value;i(n)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}},this.useSubscription=function(n){var r=d.useRef();r.current=n,d.useEffect(function(){function o(a){r.current&&r.current(a)}return t.subscriptions.add(o),function(){t.subscriptions.delete(o)}},[])}}return e}();function gS(){var e=d.useRef();return e.current||(e.current=new hS),e.current}const vS=({children:e})=>{const t=ca(),n=gS(),r=sa(),{setSchemasFilter:o,schemasFilter:a}=ia(),{addUndoAction:s,resetRedoStack:i,resetUndoStack:u}=wa(),[c,m]=d.useState(""),[f,p]=d.useState(""),{updateConfig:h}=Ur(),[v,g]=d.useState(new Date),[y,x]=d.useState(new Date),[S,E]=d.useState(te.GENERIC),[w,C]=d.useState(),[_,N]=d.useState([]),[T,A]=d.useState([]),[j,k]=d.useState([]),R=pS[S];d.useEffect(()=>{f?document.title=`ChartDB - ${f} Diagram | Visualize Database Schemas`:document.title="ChartDB - Create & Visualize Database Schema Diagrams"},[f]);const D=d.useMemo(()=>Ry.includes(S)?[...new Set(_.map(F=>F.schema).filter(F=>!!F))].sort((F,B)=>F===R?-1:F.localeCompare(B)).map(F=>({id:$n(F),name:F,tableCount:_.filter(B=>B.schema===F).length})):[],[_,R,S]),b=d.useCallback(F=>{o(B=>({...B,[c]:F}))},[c,o]),I=d.useMemo(()=>{var B,ee;return D.length===0?void 0:((a[c]??[]).length===0?void 0:a[c])??[((B=D.find(Q=>Q.name===R))==null?void 0:B.id)??((ee=D[0])==null?void 0:ee.id)]},[a,c,D,R]),P=d.useMemo(()=>({id:c,name:f,createdAt:v,updatedAt:y,databaseType:S,databaseEdition:w,tables:_,relationships:T,dependencies:j}),[c,f,S,w,_,T,j,v,y]),L=d.useCallback(async()=>{const F=new Date;N([]),A([]),k([]),x(F),i(),u(),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:F}}),t.deleteDiagramTables(c),t.deleteDiagramRelationships(c),t.deleteDiagramDependencies(c)])},[t,c,i,u]),$=d.useCallback(async()=>{m(""),p(""),E(te.GENERIC),C(void 0),N([]),A([]),k([]),i(),u();const[F]=await Promise.all([t.getConfig(),t.deleteDiagramTables(c),t.deleteDiagramRelationships(c),t.deleteDiagram(c),t.deleteDiagramDependencies(c)]);if((F==null?void 0:F.defaultDiagramId)===c){const B=await t.listDiagrams();if(B.length>0){const ee=B[0].id;await h({defaultDiagramId:ee}),r(`/diagrams/${ee}`)}else await h({defaultDiagramId:""}),r("/")}},[t,c,r,i,u,h]),M=d.useCallback(async()=>{const F=new Date;x(F),await t.updateDiagram({id:c,attributes:{updatedAt:F}})},[t,c,x]),V=d.useCallback(async F=>{E(F),await t.updateDiagram({id:c,attributes:{databaseType:F}})},[t,c,E]),G=d.useCallback(async F=>{C(F),await t.updateDiagram({id:c,attributes:{databaseEdition:F}})},[t,c,C]),O=d.useCallback(async F=>{const B=c;m(F),await t.updateDiagram({id:B,attributes:{id:F}})},[t,c,m]),H=d.useCallback(async(F,B={updateHistory:!0})=>{const ee=f;p(F);const Q=new Date;x(Q),await t.updateDiagram({id:c,attributes:{name:F,updatedAt:Q}}),B.updateHistory&&(s({action:"updateDiagramName",redoData:{name:F},undoData:{name:ee}}),i())},[t,c,p,s,f,i]),U=d.useCallback(async(F,B={updateHistory:!0})=>{N(Q=>[...Q,...F]);const ee=new Date;x(ee),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:ee}}),...F.map(Q=>t.addTable({diagramId:c,table:Q}))]),n.emit({action:"add_tables",data:{tables:F}}),B.updateHistory&&(s({action:"addTables",redoData:{tables:F},undoData:{tableIds:F.map(Q=>Q.id)}}),i())},[t,c,N,s,i,n]),z=d.useCallback(async(F,B={updateHistory:!0})=>U([F],B),[U]),Y=d.useCallback(async F=>{const B={id:st(),name:`table_${_.length+1}`,x:0,y:0,fields:[{id:st(),name:"id",type:S===te.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!0,nullable:!1,primaryKey:!0,createdAt:Date.now()}],indexes:[],color:ad(),createdAt:Date.now(),isView:!1,...F};return await z(B),B},[z,_,S]),K=d.useCallback(F=>_.find(B=>B.id===F)??null,[_]),X=d.useCallback(async(F,B)=>{const ee=F.map(ae=>K(ae)).filter(ae=>!!ae),Q=T.filter(ae=>F.includes(ae.sourceTableId)||F.includes(ae.targetTableId)),re=j.filter(ae=>F.includes(ae.tableId)||F.includes(ae.dependentTableId));A(ae=>ae.filter(fe=>!Q.some(de=>de.id===fe.id))),k(ae=>ae.filter(fe=>!re.some(de=>de.id===fe.id))),N(ae=>ae.filter(fe=>!F.includes(fe.id))),n.emit({action:"remove_tables",data:{tableIds:F}});const ce=new Date;x(ce),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:ce}}),...Q.map(ae=>t.deleteRelationship({diagramId:c,id:ae.id})),...re.map(ae=>t.deleteDependency({diagramId:c,id:ae.id})),...F.map(ae=>t.deleteTable({diagramId:c,id:ae}))]),ee.length>0&&(B!=null&&B.updateHistory)&&(s({action:"removeTables",redoData:{tableIds:F},undoData:{tables:ee,relationships:Q,dependencies:re}}),i())},[t,c,N,s,i,K,T,n,j]),J=d.useCallback(async(F,B={updateHistory:!0})=>X([F],B),[X]),se=d.useCallback(async(F,B,ee={updateHistory:!0})=>{const Q=K(F);N(ce=>ce.map(ae=>ae.id===F?{...ae,...B}:ae)),n.emit({action:"update_table",data:{id:F,table:B}});const re=new Date;x(re),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:re}}),t.updateTable({id:F,attributes:B})]),Q&&ee.updateHistory&&(s({action:"updateTable",redoData:{tableId:F,table:B},undoData:{tableId:F,table:Q}}),i())},[t,N,s,i,K,c,n]),ue=d.useCallback(async(F,B={updateHistory:!0,forceOverride:!1})=>{const ee=ge=>{const Ne=F(ge);return B.forceOverride?Ne:ge.map(Ke=>{const pn=Ne.find(qa=>qa.id===Ke.id);return pn?{...Ke,...pn}:Ke}).filter(Ke=>Ne.some(pn=>pn.id===Ke.id))},Q=Vs(_),re=ee(_),ce=Q.filter(ge=>!re.some(Ne=>Ne.id===ge.id)),ae=T.filter(ge=>ce.some(Ne=>Ne.id===ge.sourceTableId||Ne.id===ge.targetTableId)),fe=j.filter(ge=>ce.some(Ne=>Ne.id===ge.tableId||Ne.id===ge.dependentTableId));A(ge=>ge.filter(Ne=>!ae.some(Ke=>Ke.id===Ne.id))),k(ge=>ge.filter(Ne=>!fe.some(Ke=>Ke.id===Ne.id))),N(ee),n.emit({action:"remove_tables",data:{tableIds:ce.map(ge=>ge.id)}});const de=[];for(const ge of re)de.push(t.putTable({diagramId:c,table:ge}));for(const ge of ce)de.push(t.deleteTable({diagramId:c,id:ge.id}));for(const ge of ae)de.push(t.deleteRelationship({diagramId:c,id:ge.id}));for(const ge of fe)de.push(t.deleteDependency({diagramId:c,id:ge.id}));const Se=new Date;x(Se),de.push(t.updateDiagram({id:c,attributes:{updatedAt:Se}})),await Promise.all(de),B.updateHistory&&(s({action:"updateTablesState",redoData:{tables:re},undoData:{tables:Q,relationships:ae,dependencies:fe}}),i())},[t,_,N,c,s,i,T,n,j]),oe=d.useCallback((F,B)=>{const ee=K(F);return(ee==null?void 0:ee.fields.find(Q=>Q.id===B))??null},[K]),pe=d.useCallback(async(F,B,ee,Q={updateHistory:!0})=>{const re=oe(F,B);N(fe=>fe.map(de=>de.id===F?{...de,fields:de.fields.map(Se=>Se.id===B?{...Se,...ee}:Se)}:de));const ce=await t.getTable({diagramId:c,id:F});if(!ce)return;const ae=new Date;x(ae),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:ae}}),t.updateTable({id:F,attributes:{...ce,fields:ce.fields.map(fe=>fe.id===B?{...fe,...ee}:fe)}})]),re&&Q.updateHistory&&(s({action:"updateField",redoData:{tableId:F,fieldId:B,field:{...re,...ee}},undoData:{tableId:F,fieldId:B,field:re}}),i())},[t,c,N,s,i,oe]),ve=d.useCallback(async(F,B,ee={updateHistory:!0})=>{var fe;const Q=((fe=K(F))==null?void 0:fe.fields)??[],re=oe(F,B);N(de=>de.map(Se=>Se.id===F?{...Se,fields:Se.fields.filter(ge=>ge.id!==B)}:Se)),n.emit({action:"remove_field",data:{tableId:F,fieldId:B,fields:Q.filter(de=>de.id!==B)}});const ce=await t.getTable({diagramId:c,id:F});if(!ce)return;const ae=new Date;x(ae),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:ae}}),t.updateTable({id:F,attributes:{...ce,fields:ce.fields.filter(de=>de.id!==B)}})]),re&&ee.updateHistory&&(s({action:"removeField",redoData:{tableId:F,fieldId:B},undoData:{tableId:F,field:re}}),i())},[t,c,N,s,i,oe,K,n]),De=d.useCallback(async(F,B,ee={updateHistory:!0})=>{var ae;const Q=((ae=K(F))==null?void 0:ae.fields)??[];N(fe=>fe.map(de=>de.id===F?{...de,fields:[...de.fields,B]}:de)),n.emit({action:"add_field",data:{tableId:F,field:B,fields:[...Q,B]}});const re=await t.getTable({diagramId:c,id:F});if(!re)return;const ce=new Date;x(ce),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:ce}}),t.updateTable({id:F,attributes:{...re,fields:[...re.fields,B]}})]),ee.updateHistory&&(s({action:"addField",redoData:{tableId:F,field:B},undoData:{tableId:F,fieldId:B.id}}),i())},[t,c,N,s,i,n,K]),rt=d.useCallback(async F=>{var Q;const B=K(F),ee={id:st(),name:`field_${(((Q=B==null?void 0:B.fields)==null?void 0:Q.length)??0)+1}`,type:S===te.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!1,nullable:!0,primaryKey:!1,createdAt:Date.now()};return await De(F,ee),ee},[De,K,S]),pt=d.useCallback((F,B)=>{const ee=K(F);return(ee==null?void 0:ee.indexes.find(Q=>Q.id===B))??null},[K]),Ut=d.useCallback(async(F,B,ee={updateHistory:!0})=>{N(ce=>ce.map(ae=>ae.id===F?{...ae,indexes:[...ae.indexes,B]}:ae));const Q=await t.getTable({diagramId:c,id:F});if(!Q)return;const re=new Date;x(re),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:re}}),t.updateTable({id:F,attributes:{...Q,indexes:[...Q.indexes,B]}})]),ee.updateHistory&&(s({action:"addIndex",redoData:{tableId:F,index:B},undoData:{tableId:F,indexId:B.id}}),i())},[t,c,N,s,i]),Zn=d.useCallback(async(F,B,ee={updateHistory:!0})=>{const Q=pt(F,B);N(ae=>ae.map(fe=>fe.id===F?{...fe,indexes:fe.indexes.filter(de=>de.id!==B)}:fe));const re=await t.getTable({diagramId:c,id:F});if(!re)return;const ce=new Date;x(ce),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:ce}}),t.updateTable({id:F,attributes:{...re,indexes:re.indexes.filter(ae=>ae.id!==B)}})]),Q&&ee.updateHistory&&(s({action:"removeIndex",redoData:{indexId:B,tableId:F},undoData:{tableId:F,index:Q}}),i())},[t,c,N,s,i,pt]),Gt=d.useCallback(async F=>{var Q;const B=K(F),ee={id:st(),name:`index_${(((Q=B==null?void 0:B.indexes)==null?void 0:Q.length)??0)+1}`,fieldIds:[],unique:!1,createdAt:Date.now()};return await Ut(F,ee),ee},[Ut,K]),Jn=d.useCallback(async(F,B,ee,Q={updateHistory:!0})=>{const re=pt(F,B);N(fe=>fe.map(de=>de.id===F?{...de,indexes:de.indexes.map(Se=>Se.id===B?{...Se,...ee}:Se)}:de));const ce=await t.getTable({diagramId:c,id:F});if(!ce)return;const ae=new Date;x(ae),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:ae}}),t.updateTable({id:F,attributes:{...ce,indexes:ce.indexes.map(fe=>fe.id===B?{...fe,...ee}:fe)}})]),re&&Q.updateHistory&&(s({action:"updateIndex",redoData:{tableId:F,indexId:B,index:ee},undoData:{tableId:F,indexId:B,index:re}}),i())},[t,c,N,s,i,pt]),ht=d.useCallback(async(F,B={updateHistory:!0})=>{A(Q=>[...Q,...F]);const ee=new Date;x(ee),await Promise.all([...F.map(Q=>t.addRelationship({diagramId:c,relationship:Q})),t.updateDiagram({id:c,attributes:{updatedAt:ee}})]),B.updateHistory&&(s({action:"addRelationships",redoData:{relationships:F},undoData:{relationshipIds:F.map(Q=>Q.id)}}),i())},[t,c,A,s,i]),gt=d.useCallback(async(F,B={updateHistory:!0})=>ht([F],B),[ht]),er=d.useCallback(async({sourceTableId:F,targetTableId:B,sourceFieldId:ee,targetFieldId:Q})=>{const re=K(F),ce=(re==null?void 0:re.name)??"",ae=re==null?void 0:re.fields.find(Se=>Se.id===ee),fe=(ae==null?void 0:ae.name)??"",de={id:st(),name:`${ce}_${fe}_fk`,sourceSchema:re==null?void 0:re.schema,sourceTableId:F,targetSchema:re==null?void 0:re.schema,targetTableId:B,sourceFieldId:ee,targetFieldId:Q,sourceCardinality:"one",targetCardinality:"one",createdAt:Date.now()};return await gt(de),de},[gt,K]),vt=d.useCallback(F=>T.find(B=>B.id===F)??null,[T]),xt=d.useCallback(async(F,B={updateHistory:!0})=>{const ee=[...T.filter(re=>F.includes(re.id))];A(re=>re.filter(ce=>!F.includes(ce.id)));const Q=new Date;x(Q),await Promise.all([...F.map(re=>t.deleteRelationship({diagramId:c,id:re})),t.updateDiagram({id:c,attributes:{updatedAt:Q}})]),ee.length>0&&B.updateHistory&&(s({action:"removeRelationships",redoData:{relationshipsIds:F},undoData:{relationships:ee}}),i())},[t,c,A,T,s,i]),mn=d.useCallback(async(F,B={updateHistory:!0})=>xt([F],B),[xt]),Ga=d.useCallback(async(F,B,ee={updateHistory:!0})=>{const Q=vt(F);A(ce=>ce.map(ae=>ae.id===F?{...ae,...B}:ae));const re=new Date;x(re),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:re}}),t.updateRelationship({id:F,attributes:B})]),Q&&ee.updateHistory&&(s({action:"updateRelationship",redoData:{relationshipId:F,relationship:B},undoData:{relationshipId:F,relationship:Q}}),i())},[t,A,s,vt,i,c]),Wt=d.useCallback(async(F,B={updateHistory:!0})=>{k(Q=>[...Q,...F]);const ee=new Date;x(ee),await Promise.all([...F.map(Q=>t.addDependency({diagramId:c,dependency:Q})),t.updateDiagram({id:c,attributes:{updatedAt:ee}})]),B.updateHistory&&(s({action:"addDependencies",redoData:{dependencies:F},undoData:{dependenciesIds:F.map(Q=>Q.id)}}),i())},[t,c,k,s,i]),tr=d.useCallback(async(F,B={updateHistory:!0})=>Wt([F],B),[Wt]),Wa=d.useCallback(async({tableId:F,dependentTableId:B})=>{const ee=K(F),Q=K(B),re={id:st(),tableId:F,dependentTableId:B,dependentSchema:Q==null?void 0:Q.schema,schema:ee==null?void 0:ee.schema,createdAt:Date.now()};return await tr(re),re},[tr,K]),nr=d.useCallback(F=>j.find(B=>B.id===F)??null,[j]),rr=d.useCallback(async(F,B={updateHistory:!0})=>{const ee=[...j.filter(re=>F.includes(re.id))];k(re=>re.filter(ce=>!F.includes(ce.id)));const Q=new Date;x(Q),await Promise.all([...F.map(re=>t.deleteDependency({diagramId:c,id:re})),t.updateDiagram({id:c,attributes:{updatedAt:Q}})]),ee.length>0&&B.updateHistory&&(s({action:"removeDependencies",redoData:{dependenciesIds:F},undoData:{dependencies:ee}}),i())},[t,c,k,s,i,j]),Ka=d.useCallback(async(F,B={updateHistory:!0})=>rr([F],B),[rr]),Xa=d.useCallback(async(F,B,ee={updateHistory:!0})=>{const Q=nr(F);k(ce=>ce.map(ae=>ae.id===F?{...ae,...B}:ae));const re=new Date;x(re),await Promise.all([t.updateDiagram({id:c,attributes:{updatedAt:re}}),t.updateDependency({id:F,attributes:B})]),Q&&ee.updateHistory&&(s({action:"updateDependency",redoData:{dependencyId:F,dependency:B},undoData:{dependencyId:F,dependency:Q}}),i())},[t,c,k,s,i,nr]),Ya=d.useCallback(async F=>{const B=await t.getDiagram(F,{includeRelationships:!0,includeTables:!0,includeDependencies:!0});return B&&(m(B.id),p(B.name),E(B.databaseType),C(B.databaseEdition),N((B==null?void 0:B.tables)??[]),A((B==null?void 0:B.relationships)??[]),k((B==null?void 0:B.dependencies)??[]),g(B.createdAt),x(B.updatedAt),n.emit({action:"load_diagram",data:{diagram:B}})),B},[t,m,p,E,C,N,A,k,g,x,n]);return l.jsx(Yf.Provider,{value:{diagramId:c,diagramName:f,databaseType:S,tables:_,relationships:T,dependencies:j,currentDiagram:P,schemas:D,filteredSchemas:I,events:n,filterSchemas:b,updateDiagramId:O,updateDiagramName:H,loadDiagram:Ya,updateDatabaseType:V,updateDatabaseEdition:G,clearDiagramData:L,deleteDiagram:$,updateDiagramUpdatedAt:M,createTable:Y,addTable:z,addTables:U,getTable:K,removeTable:J,removeTables:X,updateTable:se,updateTablesState:ue,updateField:pe,removeField:ve,createField:rt,addField:De,addIndex:Ut,createIndex:Gt,removeIndex:Zn,getField:oe,getIndex:pt,updateIndex:Jn,addRelationship:gt,addRelationships:ht,createRelationship:er,getRelationship:vt,removeRelationship:mn,removeRelationships:xt,updateRelationship:Ga,addDependency:tr,addDependencies:Wt,createDependency:Wa,getDependency:nr,removeDependency:Ka,removeDependencies:rr,updateDependency:Xa},children:e})},xS=({children:e})=>{const{addRedoAction:t,addUndoAction:n,undoStack:r,redoStack:o,hasRedo:a,hasUndo:s}=wa(),{addTables:i,removeTables:u,updateTable:c,updateDiagramName:m,removeField:f,addField:p,updateField:h,addRelationships:v,addDependencies:g,removeDependencies:y,updateDependency:x,updateRelationship:S,updateTablesState:E,addIndex:w,removeIndex:C,updateIndex:_,removeRelationships:N}=ze(),T=d.useMemo(()=>({updateDiagramName:({redoData:{name:R}})=>m(R,{updateHistory:!1}),addTables:({redoData:{tables:R}})=>i(R,{updateHistory:!1}),removeTables:({redoData:{tableIds:R}})=>u(R,{updateHistory:!1}),updateTable:({redoData:{tableId:R,table:D}})=>c(R,D,{updateHistory:!1}),updateTablesState:({redoData:{tables:R}})=>E(()=>R,{updateHistory:!1,forceOverride:!0}),addField:({redoData:{tableId:R,field:D}})=>p(R,D,{updateHistory:!1}),removeField:({redoData:{tableId:R,fieldId:D}})=>f(R,D,{updateHistory:!1}),updateField:({redoData:{tableId:R,fieldId:D,field:b}})=>h(R,D,b,{updateHistory:!1}),addRelationships:({redoData:{relationships:R}})=>v(R,{updateHistory:!1}),updateRelationship:({redoData:{relationshipId:R,relationship:D}})=>S(R,D,{updateHistory:!1}),removeRelationships:({redoData:{relationshipsIds:R}})=>N(R,{updateHistory:!1}),addDependencies:({redoData:{dependencies:R}})=>g(R,{updateHistory:!1}),removeDependencies:({redoData:{dependenciesIds:R}})=>y(R,{updateHistory:!1}),updateDependency:({redoData:{dependencyId:R,dependency:D}})=>x(R,D,{updateHistory:!1}),addIndex:({redoData:{tableId:R,index:D}})=>w(R,D,{updateHistory:!1}),removeIndex:({redoData:{tableId:R,indexId:D}})=>C(R,D,{updateHistory:!1}),updateIndex:({redoData:{tableId:R,indexId:D,index:b}})=>_(R,D,b,{updateHistory:!1})}),[i,u,c,m,f,p,h,v,S,E,w,C,_,N,g,y,x]),A=d.useMemo(()=>({updateDiagramName:({undoData:{name:R}})=>m(R,{updateHistory:!1}),addTables:({undoData:{tableIds:R}})=>u(R,{updateHistory:!1}),removeTables:async({undoData:{tables:R,relationships:D,dependencies:b}})=>{await Promise.all([i(R,{updateHistory:!1}),v(D,{updateHistory:!1}),g(b,{updateHistory:!1})])},updateTable:({undoData:{tableId:R,table:D}})=>c(R,D,{updateHistory:!1}),addField:({undoData:{fieldId:R,tableId:D}})=>f(D,R,{updateHistory:!1}),removeField:({undoData:{tableId:R,field:D}})=>p(R,D,{updateHistory:!1}),updateField:({undoData:{tableId:R,fieldId:D,field:b}})=>h(R,D,b,{updateHistory:!1}),addRelationships:({undoData:{relationshipIds:R}})=>N(R,{updateHistory:!1}),removeRelationships:({undoData:{relationships:R}})=>v(R,{updateHistory:!1}),updateRelationship:({undoData:{relationshipId:R,relationship:D}})=>S(R,D,{updateHistory:!1}),addDependencies:({undoData:{dependenciesIds:R}})=>y(R,{updateHistory:!1}),removeDependencies:({undoData:{dependencies:R}})=>g(R,{updateHistory:!1}),updateDependency:({undoData:{dependencyId:R,dependency:D}})=>x(R,D,{updateHistory:!1}),updateTablesState:async({undoData:{tables:R,relationships:D,dependencies:b}})=>{await Promise.all([E(()=>R,{updateHistory:!1,forceOverride:!0}),v(D,{updateHistory:!1}),g(b,{updateHistory:!1})])},addIndex:({undoData:{tableId:R,indexId:D}})=>C(R,D,{updateHistory:!1}),removeIndex:({undoData:{tableId:R,index:D}})=>w(R,D,{updateHistory:!1}),updateIndex:({undoData:{tableId:R,indexId:D,index:b}})=>_(R,D,b,{updateHistory:!1})}),[i,u,c,m,f,p,h,v,S,E,w,C,_,N,g,y,x]),j=async()=>{const R=r.pop();if(!R)return;const D=A[R.action];t(R),await(D==null?void 0:D({undoData:R.undoData}))},k=async()=>{const R=o.pop();if(!R)return;const D=T[R.action];n(R),await(D==null?void 0:D({redoData:R.redoData}))};return l.jsx(em.Provider,{value:{undo:j,redo:k,hasRedo:a,hasUndo:s},children:e})};function Ee(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ee(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yS={value:()=>{}};function Ca(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ao(n)}function Ao(e){this._=e}function bS(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ao.prototype=Ca.prototype={constructor:Ao,on:function(e,t){var n=this._,r=bS(e+"",n),o,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((o=(e=r[a]).type)&&(o=wS(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(o=(e=r[a]).type)n[o]=Cl(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Cl(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ao(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function wS(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Cl(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=yS,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ai="http://www.w3.org/1999/xhtml";const _l={svg:"http://www.w3.org/2000/svg",xhtml:ai,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _a(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),_l.hasOwnProperty(t)?{space:_l[t],local:e}:e}function ES(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ai&&t.documentElement.namespaceURI===ai?t.createElement(e):t.createElementNS(n,e)}}function SS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ip(e){var t=_a(e);return(t.local?SS:ES)(t)}function CS(){}function dc(e){return e==null?CS:function(){return this.querySelector(e)}}function _S(e){typeof e!="function"&&(e=dc(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],s=a.length,i=r[o]=new Array(s),u,c,m=0;m<s;++m)(u=a[m])&&(c=e.call(u,u.__data__,m,a))&&("__data__"in u&&(c.__data__=u.__data__),i[m]=c);return new Fe(r,this._parents)}function NS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function TS(){return[]}function cp(e){return e==null?TS:function(){return this.querySelectorAll(e)}}function RS(e){return function(){return NS(e.apply(this,arguments))}}function AS(e){typeof e=="function"?e=RS(e):e=cp(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var s=t[a],i=s.length,u,c=0;c<i;++c)(u=s[c])&&(r.push(e.call(u,u.__data__,c,s)),o.push(u));return new Fe(r,o)}function lp(e){return function(){return this.matches(e)}}function up(e){return function(t){return t.matches(e)}}var DS=Array.prototype.find;function PS(e){return function(){return DS.call(this.children,e)}}function jS(){return this.firstElementChild}function MS(e){return this.select(e==null?jS:PS(typeof e=="function"?e:up(e)))}var IS=Array.prototype.filter;function kS(){return Array.from(this.children)}function $S(e){return function(){return IS.call(this.children,e)}}function OS(e){return this.selectAll(e==null?kS:$S(typeof e=="function"?e:up(e)))}function LS(e){typeof e!="function"&&(e=lp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],s=a.length,i=r[o]=[],u,c=0;c<s;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&i.push(u);return new Fe(r,this._parents)}function dp(e){return new Array(e.length)}function FS(){return new Fe(this._enter||this._groups.map(dp),this._parents)}function Oo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Oo.prototype={constructor:Oo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function HS(e){return function(){return e}}function BS(e,t,n,r,o,a){for(var s=0,i,u=t.length,c=a.length;s<c;++s)(i=t[s])?(i.__data__=a[s],r[s]=i):n[s]=new Oo(e,a[s]);for(;s<u;++s)(i=t[s])&&(o[s]=i)}function VS(e,t,n,r,o,a,s){var i,u,c=new Map,m=t.length,f=a.length,p=new Array(m),h;for(i=0;i<m;++i)(u=t[i])&&(p[i]=h=s.call(u,u.__data__,i,t)+"",c.has(h)?o[i]=u:c.set(h,u));for(i=0;i<f;++i)h=s.call(e,a[i],i,a)+"",(u=c.get(h))?(r[i]=u,u.__data__=a[i],c.delete(h)):n[i]=new Oo(e,a[i]);for(i=0;i<m;++i)(u=t[i])&&c.get(p[i])===u&&(o[i]=u)}function zS(e){return e.__data__}function US(e,t){if(!arguments.length)return Array.from(this,zS);var n=t?VS:BS,r=this._parents,o=this._groups;typeof e!="function"&&(e=HS(e));for(var a=o.length,s=new Array(a),i=new Array(a),u=new Array(a),c=0;c<a;++c){var m=r[c],f=o[c],p=f.length,h=GS(e.call(m,m&&m.__data__,c,r)),v=h.length,g=i[c]=new Array(v),y=s[c]=new Array(v),x=u[c]=new Array(p);n(m,f,g,y,x,h,t);for(var S=0,E=0,w,C;S<v;++S)if(w=g[S]){for(S>=E&&(E=S+1);!(C=y[E])&&++E<v;);w._next=C||null}}return s=new Fe(s,r),s._enter=i,s._exit=u,s}function GS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function WS(){return new Fe(this._exit||this._groups.map(dp),this._parents)}function KS(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function XS(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,s=Math.min(o,a),i=new Array(o),u=0;u<s;++u)for(var c=n[u],m=r[u],f=c.length,p=i[u]=new Array(f),h,v=0;v<f;++v)(h=c[v]||m[v])&&(p[v]=h);for(;u<o;++u)i[u]=n[u];return new Fe(i,this._parents)}function YS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],s;--o>=0;)(s=r[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function qS(e){e||(e=QS);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var s=n[a],i=s.length,u=o[a]=new Array(i),c,m=0;m<i;++m)(c=s[m])&&(u[m]=c);u.sort(t)}return new Fe(o,this._parents).order()}function QS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ZS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function JS(){return Array.from(this)}function e1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var s=r[o];if(s)return s}return null}function t1(){let e=0;for(const t of this)++e;return e}function n1(){return!this.node()}function r1(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,s=o.length,i;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this}function o1(e){return function(){this.removeAttribute(e)}}function a1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function s1(e,t){return function(){this.setAttribute(e,t)}}function i1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function c1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function l1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function u1(e,t){var n=_a(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?a1:o1:typeof t=="function"?n.local?l1:c1:n.local?i1:s1)(n,t))}function fp(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function d1(e){return function(){this.style.removeProperty(e)}}function f1(e,t,n){return function(){this.style.setProperty(e,t,n)}}function m1(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function p1(e,t,n){return arguments.length>1?this.each((t==null?d1:typeof t=="function"?m1:f1)(e,t,n??"")):Ln(this.node(),e)}function Ln(e,t){return e.style.getPropertyValue(t)||fp(e).getComputedStyle(e,null).getPropertyValue(t)}function h1(e){return function(){delete this[e]}}function g1(e,t){return function(){this[e]=t}}function v1(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function x1(e,t){return arguments.length>1?this.each((t==null?h1:typeof t=="function"?v1:g1)(e,t)):this.node()[e]}function mp(e){return e.trim().split(/^|\s+/)}function fc(e){return e.classList||new pp(e)}function pp(e){this._node=e,this._names=mp(e.getAttribute("class")||"")}pp.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hp(e,t){for(var n=fc(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function gp(e,t){for(var n=fc(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function y1(e){return function(){hp(this,e)}}function b1(e){return function(){gp(this,e)}}function w1(e,t){return function(){(t.apply(this,arguments)?hp:gp)(this,e)}}function E1(e,t){var n=mp(e+"");if(arguments.length<2){for(var r=fc(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?w1:t?y1:b1)(n,t))}function S1(){this.textContent=""}function C1(e){return function(){this.textContent=e}}function _1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function N1(e){return arguments.length?this.each(e==null?S1:(typeof e=="function"?_1:C1)(e)):this.node().textContent}function T1(){this.innerHTML=""}function R1(e){return function(){this.innerHTML=e}}function A1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function D1(e){return arguments.length?this.each(e==null?T1:(typeof e=="function"?A1:R1)(e)):this.node().innerHTML}function P1(){this.nextSibling&&this.parentNode.appendChild(this)}function j1(){return this.each(P1)}function M1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function I1(){return this.each(M1)}function k1(e){var t=typeof e=="function"?e:ip(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $1(){return null}function O1(e,t){var n=typeof e=="function"?e:ip(e),r=t==null?$1:typeof t=="function"?t:dc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function L1(){var e=this.parentNode;e&&e.removeChild(this)}function F1(){return this.each(L1)}function H1(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function B1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function V1(e){return this.select(e?B1:H1)}function z1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function U1(e){return function(t){e.call(this,t,this.__data__)}}function G1(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function W1(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function K1(e,t,n){return function(){var r=this.__on,o,a=U1(t);if(r){for(var s=0,i=r.length;s<i;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function X1(e,t,n){var r=G1(e+""),o,a=r.length,s;if(arguments.length<2){var i=this.node().__on;if(i){for(var u=0,c=i.length,m;u<c;++u)for(o=0,m=i[u];o<a;++o)if((s=r[o]).type===m.type&&s.name===m.name)return m.value}return}for(i=t?K1:W1,o=0;o<a;++o)this.each(i(r[o],t,n));return this}function vp(e,t,n){var r=fp(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Y1(e,t){return function(){return vp(this,e,t)}}function q1(e,t){return function(){return vp(this,e,t.apply(this,arguments))}}function Q1(e,t){return this.each((typeof t=="function"?q1:Y1)(e,t))}function*Z1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,s;o<a;++o)(s=r[o])&&(yield s)}var xp=[null];function Fe(e,t){this._groups=e,this._parents=t}function qr(){return new Fe([[document.documentElement]],xp)}function J1(){return this}Fe.prototype=qr.prototype={constructor:Fe,select:_S,selectAll:AS,selectChild:MS,selectChildren:OS,filter:LS,data:US,enter:FS,exit:WS,join:KS,merge:XS,selection:J1,order:YS,sort:qS,call:ZS,nodes:JS,node:e1,size:t1,empty:n1,each:r1,attr:u1,style:p1,property:x1,classed:E1,text:N1,html:D1,raise:j1,lower:I1,append:k1,insert:O1,remove:F1,clone:V1,datum:z1,on:X1,dispatch:Q1,[Symbol.iterator]:Z1};function Le(e){return typeof e=="string"?new Fe([[document.querySelector(e)]],[document.documentElement]):new Fe([[e]],xp)}function eC(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xe(e,t){if(e=eC(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const tC={passive:!1},Cr={capture:!0,passive:!1};function vs(e){e.stopImmediatePropagation()}function Pn(e){e.preventDefault(),e.stopImmediatePropagation()}function yp(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",Pn,Cr);"onselectstart"in t?n.on("selectstart.drag",Pn,Cr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function bp(e,t){var n=e.document.documentElement,r=Le(e).on("dragstart.drag",null);t&&(r.on("click.drag",Pn,Cr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const uo=e=>()=>e;function si(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:s,y:i,dx:u,dy:c,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:m}})}si.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function nC(e){return!e.ctrlKey&&!e.button}function rC(){return this.parentNode}function oC(e,t){return t??{x:e.x,y:e.y}}function aC(){return navigator.maxTouchPoints||"ontouchstart"in this}function wp(){var e=nC,t=rC,n=oC,r=aC,o={},a=Ca("start","drag","end"),s=0,i,u,c,m,f=0;function p(w){w.on("mousedown.drag",h).filter(r).on("touchstart.drag",y).on("touchmove.drag",x,tC).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,C){if(!(m||!e.call(this,w,C))){var _=E(this,t.call(this,w,C),w,C,"mouse");_&&(Le(w.view).on("mousemove.drag",v,Cr).on("mouseup.drag",g,Cr),yp(w.view),vs(w),c=!1,i=w.clientX,u=w.clientY,_("start",w))}}function v(w){if(Pn(w),!c){var C=w.clientX-i,_=w.clientY-u;c=C*C+_*_>f}o.mouse("drag",w)}function g(w){Le(w.view).on("mousemove.drag mouseup.drag",null),bp(w.view,c),Pn(w),o.mouse("end",w)}function y(w,C){if(e.call(this,w,C)){var _=w.changedTouches,N=t.call(this,w,C),T=_.length,A,j;for(A=0;A<T;++A)(j=E(this,N,w,C,_[A].identifier,_[A]))&&(vs(w),j("start",w,_[A]))}}function x(w){var C=w.changedTouches,_=C.length,N,T;for(N=0;N<_;++N)(T=o[C[N].identifier])&&(Pn(w),T("drag",w,C[N]))}function S(w){var C=w.changedTouches,_=C.length,N,T;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),N=0;N<_;++N)(T=o[C[N].identifier])&&(vs(w),T("end",w,C[N]))}function E(w,C,_,N,T,A){var j=a.copy(),k=Xe(A||_,C),R,D,b;if((b=n.call(w,new si("beforestart",{sourceEvent:_,target:p,identifier:T,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:j}),N))!=null)return R=b.x-k[0]||0,D=b.y-k[1]||0,function I(P,L,$){var M=k,V;switch(P){case"start":o[T]=I,V=s++;break;case"end":delete o[T],--s;case"drag":k=Xe($||L,C),V=s;break}j.call(P,w,new si(P,{sourceEvent:L,subject:b,target:p,identifier:T,active:V,x:k[0]+R,y:k[1]+D,dx:k[0]-M[0],dy:k[1]-M[1],dispatch:j}),N)}}return p.filter=function(w){return arguments.length?(e=typeof w=="function"?w:uo(!!w),p):e},p.container=function(w){return arguments.length?(t=typeof w=="function"?w:uo(w),p):t},p.subject=function(w){return arguments.length?(n=typeof w=="function"?w:uo(w),p):n},p.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:uo(!!w),p):r},p.on=function(){var w=a.on.apply(a,arguments);return w===a?p:w},p.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,p):Math.sqrt(f)},p}function mc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ep(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qr(){}var _r=.7,Lo=1/_r,jn="\\s*([+-]?\\d+)\\s*",Nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sC=/^#([0-9a-f]{3,8})$/,iC=new RegExp(`^rgb\\(${jn},${jn},${jn}\\)$`),cC=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),lC=new RegExp(`^rgba\\(${jn},${jn},${jn},${Nr}\\)$`),uC=new RegExp(`^rgba\\(${it},${it},${it},${Nr}\\)$`),dC=new RegExp(`^hsl\\(${Nr},${it},${it}\\)$`),fC=new RegExp(`^hsla\\(${Nr},${it},${it},${Nr}\\)$`),Nl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mc(Qr,Tr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Tl,formatHex:Tl,formatHex8:mC,formatHsl:pC,formatRgb:Rl,toString:Rl});function Tl(){return this.rgb().formatHex()}function mC(){return this.rgb().formatHex8()}function pC(){return Sp(this).formatHsl()}function Rl(){return this.rgb().formatRgb()}function Tr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sC.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Al(t):n===3?new Me(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iC.exec(e))?new Me(t[1],t[2],t[3],1):(t=cC.exec(e))?new Me(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lC.exec(e))?fo(t[1],t[2],t[3],t[4]):(t=uC.exec(e))?fo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dC.exec(e))?jl(t[1],t[2]/100,t[3]/100,1):(t=fC.exec(e))?jl(t[1],t[2]/100,t[3]/100,t[4]):Nl.hasOwnProperty(e)?Al(Nl[e]):e==="transparent"?new Me(NaN,NaN,NaN,0):null}function Al(e){return new Me(e>>16&255,e>>8&255,e&255,1)}function fo(e,t,n,r){return r<=0&&(e=t=n=NaN),new Me(e,t,n,r)}function hC(e){return e instanceof Qr||(e=Tr(e)),e?(e=e.rgb(),new Me(e.r,e.g,e.b,e.opacity)):new Me}function ii(e,t,n,r){return arguments.length===1?hC(e):new Me(e,t,n,r??1)}function Me(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}mc(Me,ii,Ep(Qr,{brighter(e){return e=e==null?Lo:Math.pow(Lo,e),new Me(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_r:Math.pow(_r,e),new Me(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Me(tn(this.r),tn(this.g),tn(this.b),Fo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dl,formatHex:Dl,formatHex8:gC,formatRgb:Pl,toString:Pl}));function Dl(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function gC(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pl(){const e=Fo(this.opacity);return`${e===1?"rgb(":"rgba("}${tn(this.r)}, ${tn(this.g)}, ${tn(this.b)}${e===1?")":`, ${e})`}`}function Fo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jt(e){return e=tn(e),(e<16?"0":"")+e.toString(16)}function jl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ye(e,t,n,r)}function Sp(e){if(e instanceof Ye)return new Ye(e.h,e.s,e.l,e.opacity);if(e instanceof Qr||(e=Tr(e)),!e)return new Ye;if(e instanceof Ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,i=a-o,u=(a+o)/2;return i?(t===a?s=(n-r)/i+(n<r)*6:n===a?s=(r-t)/i+2:s=(t-n)/i+4,i/=u<.5?a+o:2-a-o,s*=60):i=u>0&&u<1?0:s,new Ye(s,i,u,e.opacity)}function vC(e,t,n,r){return arguments.length===1?Sp(e):new Ye(e,t,n,r??1)}function Ye(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mc(Ye,vC,Ep(Qr,{brighter(e){return e=e==null?Lo:Math.pow(Lo,e),new Ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_r:Math.pow(_r,e),new Ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Me(xs(e>=240?e-240:e+120,o,r),xs(e,o,r),xs(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Ye(Ml(this.h),mo(this.s),mo(this.l),Fo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Fo(this.opacity);return`${e===1?"hsl(":"hsla("}${Ml(this.h)}, ${mo(this.s)*100}%, ${mo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ml(e){return e=(e||0)%360,e<0?e+360:e}function mo(e){return Math.max(0,Math.min(1,e||0))}function xs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Cp=e=>()=>e;function xC(e,t){return function(n){return e+n*t}}function yC(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bC(e){return(e=+e)==1?_p:function(t,n){return n-t?yC(t,n,e):Cp(isNaN(t)?n:t)}}function _p(e,t){var n=t-e;return n?xC(e,n):Cp(isNaN(e)?t:e)}const Il=function e(t){var n=bC(t);function r(o,a){var s=n((o=ii(o)).r,(a=ii(a)).r),i=n(o.g,a.g),u=n(o.b,a.b),c=_p(o.opacity,a.opacity);return function(m){return o.r=s(m),o.g=i(m),o.b=u(m),o.opacity=c(m),o+""}}return r.gamma=e,r}(1);function kt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ci=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ys=new RegExp(ci.source,"g");function wC(e){return function(){return e}}function EC(e){return function(t){return e(t)+""}}function SC(e,t){var n=ci.lastIndex=ys.lastIndex=0,r,o,a,s=-1,i=[],u=[];for(e=e+"",t=t+"";(r=ci.exec(e))&&(o=ys.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),i[s]?i[s]+=a:i[++s]=a),(r=r[0])===(o=o[0])?i[s]?i[s]+=o:i[++s]=o:(i[++s]=null,u.push({i:s,x:kt(r,o)})),n=ys.lastIndex;return n<t.length&&(a=t.slice(n),i[s]?i[s]+=a:i[++s]=a),i.length<2?u[0]?EC(u[0].x):wC(t):(t=u.length,function(c){for(var m=0,f;m<t;++m)i[(f=u[m]).i]=f.x(c);return i.join("")})}var kl=180/Math.PI,li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Np(e,t,n,r,o,a){var s,i,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(i=Math.sqrt(n*n+r*r))&&(n/=i,r/=i,u/=i),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*kl,skewX:Math.atan(u)*kl,scaleX:s,scaleY:i}}var po;function CC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?li:Np(t.a,t.b,t.c,t.d,t.e,t.f)}function _C(e){return e==null||(po||(po=document.createElementNS("http://www.w3.org/2000/svg","g")),po.setAttribute("transform",e),!(e=po.transform.baseVal.consolidate()))?li:(e=e.matrix,Np(e.a,e.b,e.c,e.d,e.e,e.f))}function Tp(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function a(c,m,f,p,h,v){if(c!==f||m!==p){var g=h.push("translate(",null,t,null,n);v.push({i:g-4,x:kt(c,f)},{i:g-2,x:kt(m,p)})}else(f||p)&&h.push("translate("+f+t+p+n)}function s(c,m,f,p){c!==m?(c-m>180?m+=360:m-c>180&&(c+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:kt(c,m)})):m&&f.push(o(f)+"rotate("+m+r)}function i(c,m,f,p){c!==m?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:kt(c,m)}):m&&f.push(o(f)+"skewX("+m+r)}function u(c,m,f,p,h,v){if(c!==f||m!==p){var g=h.push(o(h)+"scale(",null,",",null,")");v.push({i:g-4,x:kt(c,f)},{i:g-2,x:kt(m,p)})}else(f!==1||p!==1)&&h.push(o(h)+"scale("+f+","+p+")")}return function(c,m){var f=[],p=[];return c=e(c),m=e(m),a(c.translateX,c.translateY,m.translateX,m.translateY,f,p),s(c.rotate,m.rotate,f,p),i(c.skewX,m.skewX,f,p),u(c.scaleX,c.scaleY,m.scaleX,m.scaleY,f,p),c=m=null,function(h){for(var v=-1,g=p.length,y;++v<g;)f[(y=p[v]).i]=y.x(h);return f.join("")}}}var NC=Tp(CC,"px, ","px)","deg)"),TC=Tp(_C,", ",")",")"),RC=1e-12;function $l(e){return((e=Math.exp(e))+1/e)/2}function AC(e){return((e=Math.exp(e))-1/e)/2}function DC(e){return((e=Math.exp(2*e))-1)/(e+1)}const PC=function e(t,n,r){function o(a,s){var i=a[0],u=a[1],c=a[2],m=s[0],f=s[1],p=s[2],h=m-i,v=f-u,g=h*h+v*v,y,x;if(g<RC)x=Math.log(p/c)/t,y=function(N){return[i+N*h,u+N*v,c*Math.exp(t*N*x)]};else{var S=Math.sqrt(g),E=(p*p-c*c+r*g)/(2*c*n*S),w=(p*p-c*c-r*g)/(2*p*n*S),C=Math.log(Math.sqrt(E*E+1)-E),_=Math.log(Math.sqrt(w*w+1)-w);x=(_-C)/t,y=function(N){var T=N*x,A=$l(C),j=c/(n*S)*(A*DC(t*T+C)-AC(C));return[i+j*h,u+j*v,c*A/$l(t*T+C)]}}return y.duration=x*1e3*t/Math.SQRT2,y}return o.rho=function(a){var s=Math.max(.001,+a),i=s*s,u=i*i;return e(s,i,u)},o}(Math.SQRT2,2,4);var Fn=0,dr=0,or=0,Rp=1e3,Ho,fr,Bo=0,an=0,Na=0,Rr=typeof performance=="object"&&performance.now?performance:Date,Ap=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pc(){return an||(Ap(jC),an=Rr.now()+Na)}function jC(){an=0}function Vo(){this._call=this._time=this._next=null}Vo.prototype=Dp.prototype={constructor:Vo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pc():+n)+(t==null?0:+t),!this._next&&fr!==this&&(fr?fr._next=this:Ho=this,fr=this),this._call=e,this._time=n,ui()},stop:function(){this._call&&(this._call=null,this._time=1/0,ui())}};function Dp(e,t,n){var r=new Vo;return r.restart(e,t,n),r}function MC(){pc(),++Fn;for(var e=Ho,t;e;)(t=an-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Fn}function Ol(){an=(Bo=Rr.now())+Na,Fn=dr=0;try{MC()}finally{Fn=0,kC(),an=0}}function IC(){var e=Rr.now(),t=e-Bo;t>Rp&&(Na-=t,Bo=e)}function kC(){for(var e,t=Ho,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ho=n);fr=e,ui(r)}function ui(e){if(!Fn){dr&&(dr=clearTimeout(dr));var t=e-an;t>24?(e<1/0&&(dr=setTimeout(Ol,e-Rr.now()-Na)),or&&(or=clearInterval(or))):(or||(Bo=Rr.now(),or=setInterval(IC,Rp)),Fn=1,Ap(Ol))}}function Ll(e,t,n){var r=new Vo;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var $C=Ca("start","end","cancel","interrupt"),OC=[],Pp=0,Fl=1,di=2,Do=3,Hl=4,fi=5,Po=6;function Ta(e,t,n,r,o,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;LC(e,n,{name:t,index:r,group:o,on:$C,tween:OC,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Pp})}function hc(e,t){var n=nt(e,t);if(n.state>Pp)throw new Error("too late; already scheduled");return n}function ft(e,t){var n=nt(e,t);if(n.state>Do)throw new Error("too late; already running");return n}function nt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function LC(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Dp(a,0,n.time);function a(c){n.state=Fl,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var m,f,p,h;if(n.state!==Fl)return u();for(m in r)if(h=r[m],h.name===n.name){if(h.state===Do)return Ll(s);h.state===Hl?(h.state=Po,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[m]):+m<t&&(h.state=Po,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[m])}if(Ll(function(){n.state===Do&&(n.state=Hl,n.timer.restart(i,n.delay,n.time),i(c))}),n.state=di,n.on.call("start",e,e.__data__,n.index,n.group),n.state===di){for(n.state=Do,o=new Array(p=n.tween.length),m=0,f=-1;m<p;++m)(h=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=h);o.length=f+1}}function i(c){for(var m=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=fi,1),f=-1,p=o.length;++f<p;)o[f].call(e,m);n.state===fi&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Po,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function jo(e,t){var n=e.__transition,r,o,a=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){a=!1;continue}o=r.state>di&&r.state<fi,r.state=Po,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}a&&delete e.__transition}}function FC(e){return this.each(function(){jo(this,e)})}function HC(e,t){var n,r;return function(){var o=ft(this,e),a=o.tween;if(a!==n){r=n=a;for(var s=0,i=r.length;s<i;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function BC(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=ft(this,e),s=a.tween;if(s!==r){o=(r=s).slice();for(var i={name:t,value:n},u=0,c=o.length;u<c;++u)if(o[u].name===t){o[u]=i;break}u===c&&o.push(i)}a.tween=o}}function VC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=nt(this.node(),n).tween,o=0,a=r.length,s;o<a;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?HC:BC)(n,e,t))}function gc(e,t,n){var r=e._id;return e.each(function(){var o=ft(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return nt(o,r).value[t]}}function jp(e,t){var n;return(typeof t=="number"?kt:t instanceof Tr?Il:(n=Tr(t))?(t=n,Il):SC)(e,t)}function zC(e){return function(){this.removeAttribute(e)}}function UC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function GC(e,t,n){var r,o=n+"",a;return function(){var s=this.getAttribute(e);return s===o?null:s===r?a:a=t(r=s,n)}}function WC(e,t,n){var r,o=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?a:a=t(r=s,n)}}function KC(e,t,n){var r,o,a;return function(){var s,i=n(this),u;return i==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=i+"",s===u?null:s===r&&u===o?a:(o=u,a=t(r=s,i)))}}function XC(e,t,n){var r,o,a;return function(){var s,i=n(this),u;return i==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=i+"",s===u?null:s===r&&u===o?a:(o=u,a=t(r=s,i)))}}function YC(e,t){var n=_a(e),r=n==="transform"?TC:jp;return this.attrTween(e,typeof t=="function"?(n.local?XC:KC)(n,r,gc(this,"attr."+e,t)):t==null?(n.local?UC:zC)(n):(n.local?WC:GC)(n,r,t))}function qC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function QC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ZC(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&QC(e,a)),n}return o._value=t,o}function JC(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&qC(e,a)),n}return o._value=t,o}function e_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_a(e);return this.tween(n,(r.local?ZC:JC)(r,t))}function t_(e,t){return function(){hc(this,e).delay=+t.apply(this,arguments)}}function n_(e,t){return t=+t,function(){hc(this,e).delay=t}}function r_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?t_:n_)(t,e)):nt(this.node(),t).delay}function o_(e,t){return function(){ft(this,e).duration=+t.apply(this,arguments)}}function a_(e,t){return t=+t,function(){ft(this,e).duration=t}}function s_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?o_:a_)(t,e)):nt(this.node(),t).duration}function i_(e,t){if(typeof t!="function")throw new Error;return function(){ft(this,e).ease=t}}function c_(e){var t=this._id;return arguments.length?this.each(i_(t,e)):nt(this.node(),t).ease}function l_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ft(this,e).ease=n}}function u_(e){if(typeof e!="function")throw new Error;return this.each(l_(this._id,e))}function d_(e){typeof e!="function"&&(e=lp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],s=a.length,i=r[o]=[],u,c=0;c<s;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&i.push(u);return new Ct(r,this._parents,this._name,this._id)}function f_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),s=new Array(r),i=0;i<a;++i)for(var u=t[i],c=n[i],m=u.length,f=s[i]=new Array(m),p,h=0;h<m;++h)(p=u[h]||c[h])&&(f[h]=p);for(;i<r;++i)s[i]=t[i];return new Ct(s,this._parents,this._name,this._id)}function m_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function p_(e,t,n){var r,o,a=m_(t)?hc:ft;return function(){var s=a(this,e),i=s.on;i!==r&&(o=(r=i).copy()).on(t,n),s.on=o}}function h_(e,t){var n=this._id;return arguments.length<2?nt(this.node(),n).on.on(e):this.each(p_(n,e,t))}function g_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function v_(){return this.on("end.remove",g_(this._id))}function x_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=dc(e));for(var r=this._groups,o=r.length,a=new Array(o),s=0;s<o;++s)for(var i=r[s],u=i.length,c=a[s]=new Array(u),m,f,p=0;p<u;++p)(m=i[p])&&(f=e.call(m,m.__data__,p,i))&&("__data__"in m&&(f.__data__=m.__data__),c[p]=f,Ta(c[p],t,n,p,c,nt(m,n)));return new Ct(a,this._parents,t,n)}function y_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cp(e));for(var r=this._groups,o=r.length,a=[],s=[],i=0;i<o;++i)for(var u=r[i],c=u.length,m,f=0;f<c;++f)if(m=u[f]){for(var p=e.call(m,m.__data__,f,u),h,v=nt(m,n),g=0,y=p.length;g<y;++g)(h=p[g])&&Ta(h,t,n,g,p,v);a.push(p),s.push(m)}return new Ct(a,s,t,n)}var b_=qr.prototype.constructor;function w_(){return new b_(this._groups,this._parents)}function E_(e,t){var n,r,o;return function(){var a=Ln(this,e),s=(this.style.removeProperty(e),Ln(this,e));return a===s?null:a===n&&s===r?o:o=t(n=a,r=s)}}function Mp(e){return function(){this.style.removeProperty(e)}}function S_(e,t,n){var r,o=n+"",a;return function(){var s=Ln(this,e);return s===o?null:s===r?a:a=t(r=s,n)}}function C_(e,t,n){var r,o,a;return function(){var s=Ln(this,e),i=n(this),u=i+"";return i==null&&(u=i=(this.style.removeProperty(e),Ln(this,e))),s===u?null:s===r&&u===o?a:(o=u,a=t(r=s,i))}}function __(e,t){var n,r,o,a="style."+t,s="end."+a,i;return function(){var u=ft(this,e),c=u.on,m=u.value[a]==null?i||(i=Mp(t)):void 0;(c!==n||o!==m)&&(r=(n=c).copy()).on(s,o=m),u.on=r}}function N_(e,t,n){var r=(e+="")=="transform"?NC:jp;return t==null?this.styleTween(e,E_(e,r)).on("end.style."+e,Mp(e)):typeof t=="function"?this.styleTween(e,C_(e,r,gc(this,"style."+e,t))).each(__(this._id,e)):this.styleTween(e,S_(e,r,t),n).on("end.style."+e,null)}function T_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function R_(e,t,n){var r,o;function a(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&T_(e,s,n)),r}return a._value=t,a}function A_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,R_(e,t,n??""))}function D_(e){return function(){this.textContent=e}}function P_(e){return function(){var t=e(this);this.textContent=t??""}}function j_(e){return this.tween("text",typeof e=="function"?P_(gc(this,"text",e)):D_(e==null?"":e+""))}function M_(e){return function(t){this.textContent=e.call(this,t)}}function I_(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&M_(o)),t}return r._value=e,r}function k_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,I_(e))}function $_(){for(var e=this._name,t=this._id,n=Ip(),r=this._groups,o=r.length,a=0;a<o;++a)for(var s=r[a],i=s.length,u,c=0;c<i;++c)if(u=s[c]){var m=nt(u,t);Ta(u,e,n,c,s,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Ct(r,this._parents,e,n)}function O_(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,s){var i={value:s},u={value:function(){--o===0&&a()}};n.each(function(){var c=ft(this,r),m=c.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(u)),c.on=t}),o===0&&a()})}var L_=0;function Ct(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ip(){return++L_}var yt=qr.prototype;Ct.prototype={constructor:Ct,select:x_,selectAll:y_,selectChild:yt.selectChild,selectChildren:yt.selectChildren,filter:d_,merge:f_,selection:w_,transition:$_,call:yt.call,nodes:yt.nodes,node:yt.node,size:yt.size,empty:yt.empty,each:yt.each,on:h_,attr:YC,attrTween:e_,style:N_,styleTween:A_,text:j_,textTween:k_,remove:v_,tween:VC,delay:r_,duration:s_,ease:c_,easeVarying:u_,end:O_,[Symbol.iterator]:yt[Symbol.iterator]};function F_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var H_={time:null,delay:0,duration:250,ease:F_};function B_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function V_(e){var t,n;e instanceof Ct?(t=e._id,e=e._name):(t=Ip(),(n=H_).time=pc(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var s=r[a],i=s.length,u,c=0;c<i;++c)(u=s[c])&&Ta(u,e,t,c,s,n||B_(u,t));return new Ct(r,this._parents,e,t)}qr.prototype.interrupt=FC;qr.prototype.transition=V_;const ho=e=>()=>e;function z_(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function wt(e,t,n){this.k=e,this.x=t,this.y=n}wt.prototype={constructor:wt,scale:function(e){return e===1?this:new wt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ra=new wt(1,0,0);kp.prototype=wt.prototype;function kp(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ra;return e.__zoom}function bs(e){e.stopImmediatePropagation()}function ar(e){e.preventDefault(),e.stopImmediatePropagation()}function U_(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function G_(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bl(){return this.__zoom||Ra}function W_(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function K_(){return navigator.maxTouchPoints||"ontouchstart"in this}function X_(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function $p(){var e=U_,t=G_,n=X_,r=W_,o=K_,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],i=250,u=PC,c=Ca("start","zoom","end"),m,f,p,h=500,v=150,g=0,y=10;function x(b){b.property("__zoom",Bl).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",j).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(b,I,P,L){var $=b.selection?b.selection():b;$.property("__zoom",Bl),b!==$?C(b,I,P,L):$.interrupt().each(function(){_(this,arguments).event(L).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},x.scaleBy=function(b,I,P,L){x.scaleTo(b,function(){var $=this.__zoom.k,M=typeof I=="function"?I.apply(this,arguments):I;return $*M},P,L)},x.scaleTo=function(b,I,P,L){x.transform(b,function(){var $=t.apply(this,arguments),M=this.__zoom,V=P==null?w($):typeof P=="function"?P.apply(this,arguments):P,G=M.invert(V),O=typeof I=="function"?I.apply(this,arguments):I;return n(E(S(M,O),V,G),$,s)},P,L)},x.translateBy=function(b,I,P,L){x.transform(b,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),s)},null,L)},x.translateTo=function(b,I,P,L,$){x.transform(b,function(){var M=t.apply(this,arguments),V=this.__zoom,G=L==null?w(M):typeof L=="function"?L.apply(this,arguments):L;return n(Ra.translate(G[0],G[1]).scale(V.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof P=="function"?-P.apply(this,arguments):-P),M,s)},L,$)};function S(b,I){return I=Math.max(a[0],Math.min(a[1],I)),I===b.k?b:new wt(I,b.x,b.y)}function E(b,I,P){var L=I[0]-P[0]*b.k,$=I[1]-P[1]*b.k;return L===b.x&&$===b.y?b:new wt(b.k,L,$)}function w(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function C(b,I,P,L){b.on("start.zoom",function(){_(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(L).end()}).tween("zoom",function(){var $=this,M=arguments,V=_($,M).event(L),G=t.apply($,M),O=P==null?w(G):typeof P=="function"?P.apply($,M):P,H=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),U=$.__zoom,z=typeof I=="function"?I.apply($,M):I,Y=u(U.invert(O).concat(H/U.k),z.invert(O).concat(H/z.k));return function(K){if(K===1)K=z;else{var X=Y(K),J=H/X[2];K=new wt(J,O[0]-X[0]*J,O[1]-X[1]*J)}V.zoom(null,K)}})}function _(b,I,P){return!P&&b.__zooming||new N(b,I)}function N(b,I){this.that=b,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,I),this.taps=0}N.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,I){return this.mouse&&b!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var I=Le(this.that).datum();c.call(b,this.that,new z_(b,{sourceEvent:this.sourceEvent,target:x,type:b,transform:this.that.__zoom,dispatch:c}),I)}};function T(b,...I){if(!e.apply(this,arguments))return;var P=_(this,I).event(b),L=this.__zoom,$=Math.max(a[0],Math.min(a[1],L.k*Math.pow(2,r.apply(this,arguments)))),M=Xe(b);if(P.wheel)(P.mouse[0][0]!==M[0]||P.mouse[0][1]!==M[1])&&(P.mouse[1]=L.invert(P.mouse[0]=M)),clearTimeout(P.wheel);else{if(L.k===$)return;P.mouse=[M,L.invert(M)],jo(this),P.start()}ar(b),P.wheel=setTimeout(V,v),P.zoom("mouse",n(E(S(L,$),P.mouse[0],P.mouse[1]),P.extent,s));function V(){P.wheel=null,P.end()}}function A(b,...I){if(p||!e.apply(this,arguments))return;var P=b.currentTarget,L=_(this,I,!0).event(b),$=Le(b.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",H,!0),M=Xe(b,P),V=b.clientX,G=b.clientY;yp(b.view),bs(b),L.mouse=[M,this.__zoom.invert(M)],jo(this),L.start();function O(U){if(ar(U),!L.moved){var z=U.clientX-V,Y=U.clientY-G;L.moved=z*z+Y*Y>g}L.event(U).zoom("mouse",n(E(L.that.__zoom,L.mouse[0]=Xe(U,P),L.mouse[1]),L.extent,s))}function H(U){$.on("mousemove.zoom mouseup.zoom",null),bp(U.view,L.moved),ar(U),L.event(U).end()}}function j(b,...I){if(e.apply(this,arguments)){var P=this.__zoom,L=Xe(b.changedTouches?b.changedTouches[0]:b,this),$=P.invert(L),M=P.k*(b.shiftKey?.5:2),V=n(E(S(P,M),L,$),t.apply(this,I),s);ar(b),i>0?Le(this).transition().duration(i).call(C,V,L,b):Le(this).call(x.transform,V,L,b)}}function k(b,...I){if(e.apply(this,arguments)){var P=b.touches,L=P.length,$=_(this,I,b.changedTouches.length===L).event(b),M,V,G,O;for(bs(b),V=0;V<L;++V)G=P[V],O=Xe(G,this),O=[O,this.__zoom.invert(O),G.identifier],$.touch0?!$.touch1&&$.touch0[2]!==O[2]&&($.touch1=O,$.taps=0):($.touch0=O,M=!0,$.taps=1+!!m);m&&(m=clearTimeout(m)),M&&($.taps<2&&(f=O[0],m=setTimeout(function(){m=null},h)),jo(this),$.start())}}function R(b,...I){if(this.__zooming){var P=_(this,I).event(b),L=b.changedTouches,$=L.length,M,V,G,O;for(ar(b),M=0;M<$;++M)V=L[M],G=Xe(V,this),P.touch0&&P.touch0[2]===V.identifier?P.touch0[0]=G:P.touch1&&P.touch1[2]===V.identifier&&(P.touch1[0]=G);if(V=P.that.__zoom,P.touch1){var H=P.touch0[0],U=P.touch0[1],z=P.touch1[0],Y=P.touch1[1],K=(K=z[0]-H[0])*K+(K=z[1]-H[1])*K,X=(X=Y[0]-U[0])*X+(X=Y[1]-U[1])*X;V=S(V,Math.sqrt(K/X)),G=[(H[0]+z[0])/2,(H[1]+z[1])/2],O=[(U[0]+Y[0])/2,(U[1]+Y[1])/2]}else if(P.touch0)G=P.touch0[0],O=P.touch0[1];else return;P.zoom("touch",n(E(V,G,O),P.extent,s))}}function D(b,...I){if(this.__zooming){var P=_(this,I).event(b),L=b.changedTouches,$=L.length,M,V;for(bs(b),p&&clearTimeout(p),p=setTimeout(function(){p=null},h),M=0;M<$;++M)V=L[M],P.touch0&&P.touch0[2]===V.identifier?delete P.touch0:P.touch1&&P.touch1[2]===V.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(V=Xe(V,this),Math.hypot(f[0]-V[0],f[1]-V[1])<y)){var G=Le(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return x.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:ho(+b),x):r},x.filter=function(b){return arguments.length?(e=typeof b=="function"?b:ho(!!b),x):e},x.touchable=function(b){return arguments.length?(o=typeof b=="function"?b:ho(!!b),x):o},x.extent=function(b){return arguments.length?(t=typeof b=="function"?b:ho([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),x):t},x.scaleExtent=function(b){return arguments.length?(a[0]=+b[0],a[1]=+b[1],x):[a[0],a[1]]},x.translateExtent=function(b){return arguments.length?(s[0][0]=+b[0][0],s[1][0]=+b[1][0],s[0][1]=+b[0][1],s[1][1]=+b[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(b){return arguments.length?(n=b,x):n},x.duration=function(b){return arguments.length?(i=+b,x):i},x.interpolate=function(b){return arguments.length?(u=b,x):u},x.on=function(){var b=c.on.apply(c,arguments);return b===c?x:b},x.clickDistance=function(b){return arguments.length?(g=(b=+b)*b,x):Math.sqrt(g)},x.tapDistance=function(b){return arguments.length?(y=+b,x):y},x}const Rt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Ar=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Op=["Enter"," ","Escape"];var Hn;(function(e){e.Strict="strict",e.Loose="loose"})(Hn||(Hn={}));var nn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(nn||(nn={}));var Dr;(function(e){e.Partial="partial",e.Full="full"})(Dr||(Dr={}));const Lp={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var $t;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})($t||($t={}));var zo;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(zo||(zo={}));var ie;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ie||(ie={}));const Vl={[ie.Left]:ie.Right,[ie.Right]:ie.Left,[ie.Top]:ie.Bottom,[ie.Bottom]:ie.Top};function Fp(e){return e===null?null:e?"valid":"invalid"}const Hp=e=>"id"in e&&"source"in e&&"target"in e,Y_=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),vc=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Zr=(e,t=[0,0])=>{const{width:n,height:r}=At(e),o=e.origin??t,a=n*o[0],s=r*o[1];return{x:e.position.x-a,y:e.position.y-s}},q_=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const a=typeof o=="string";let s=!t.nodeLookup&&!a?o:void 0;t.nodeLookup&&(s=a?t.nodeLookup.get(o):vc(o)?o:t.nodeLookup.get(o.id));const i=s?Uo(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Aa(r,i)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Da(n)},Jr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=Uo(r);n=Aa(n,o)}}),Da(n)},Bp=(e,t,[n,r,o]=[0,0,1],a=!1,s=!1)=>{const i={...eo(t,[n,r,o]),width:t.width/o,height:t.height/o},u=[];for(const c of e.values()){const{measured:m,selectable:f=!0,hidden:p=!1}=c;if(s&&!f||p)continue;const h=m.width??c.width??c.initialWidth??null,v=m.height??c.height??c.initialHeight??null,g=Pr(i,Vn(c)),y=(h??0)*(v??0),x=a&&g>0;(!c.internals.handleBounds||x||g>=y||c.dragging)&&u.push(c)}return u},Q_=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function mi(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function pi({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},s){if(e.size===0)return Promise.resolve(!1);const i=Jr(e),u=xc(i,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??a,(s==null?void 0:s.padding)??.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Vp({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){const s=n.get(e),i=s.parentId?n.get(s.parentId):void 0,{x:u,y:c}=i?i.internals.positionAbsolute:{x:0,y:0},m=s.origin??r;let f=o;if(s.extent==="parent"&&!s.expandParent)if(!i)a==null||a("005",Rt.error005());else{const h=i.measured.width,v=i.measured.height;h&&v&&(f=[[u,c],[u+h,c+v]])}else i&&zn(s.extent)&&(f=[[s.extent[0][0]+u,s.extent[0][1]+c],[s.extent[1][0]+u,s.extent[1][1]+c]]);const p=zn(f)?sn(t,f,s.measured):t;return{position:{x:p.x-u+s.measured.width*m[0],y:p.y-c+s.measured.height*m[1]},positionAbsolute:p}}async function Z_({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const a=new Set(e.map(p=>p.id)),s=[];for(const p of n){if(p.deletable===!1)continue;const h=a.has(p.id),v=!h&&p.parentId&&s.find(g=>g.id===p.parentId);(h||v)&&s.push(p)}const i=new Set(t.map(p=>p.id)),u=r.filter(p=>p.deletable!==!1),m=Q_(s,u);for(const p of u)i.has(p.id)&&!m.find(v=>v.id===p.id)&&m.push(p);if(!o)return{edges:m,nodes:s};const f=await o({nodes:s,edges:m});return typeof f=="boolean"?f?{edges:m,nodes:s}:{edges:[],nodes:[]}:f}const Bn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),sn=(e={x:0,y:0},t,n)=>({x:Bn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Bn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function zp(e,t,n){const{width:r,height:o}=At(n),{x:a,y:s}=n.internals.positionAbsolute;return sn(e,[[a,s],[a+r,s+o]],t)}const zl=(e,t,n)=>e<t?Bn(Math.abs(e-t),1,t)/t:e>n?-Bn(Math.abs(e-n),1,t)/t:0,Up=(e,t,n=15,r=40)=>{const o=zl(e.x,r,t.width-r)*n,a=zl(e.y,r,t.height-r)*n;return[o,a]},Aa=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),hi=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Da=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Vn=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=vc(e)?e.internals.positionAbsolute:Zr(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},Uo=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=vc(e)?e.internals.positionAbsolute:Zr(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},Gp=(e,t)=>Da(Aa(hi(e),hi(t))),Pr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Ul=e=>qe(e.width)&&qe(e.height)&&qe(e.x)&&qe(e.y),qe=e=>!isNaN(e)&&isFinite(e),J_=(e,t)=>{},Pa=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),eo=({x:e,y:t},[n,r,o],a=!1,s=[1,1])=>{const i={x:(e-n)/o,y:(t-r)/o};return a?Pa(i,s):i},Wp=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),xc=(e,t,n,r,o,a)=>{const s=t/(e.width*(1+a)),i=n/(e.height*(1+a)),u=Math.min(s,i),c=Bn(u,r,o),m=e.x+e.width/2,f=e.y+e.height/2,p=t/2-m*c,h=n/2-f*c;return{x:p,y:h,zoom:c}},Go=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function zn(e){return e!==void 0&&e!=="parent"}function At(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Kp(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Xp(e,t={width:0,height:0},n,r,o){let a=n;const s={...e};for(;a;){const i=r.get(a);if(a=i==null?void 0:i.parentId,i){const u=i.origin||o;s.x+=i.internals.positionAbsolute.x-(t.width??0)*u[0],s.y+=i.internals.positionAbsolute.y-(t.height??0)*u[1]}}return s}function xr(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r}){const{x:o,y:a}=Et(e),s=eo({x:o,y:a},r),{x:i,y:u}=n?Pa(s,t):s;return{xSnapped:i,ySnapped:u,...s}}const ja=e=>({width:e.offsetWidth,height:e.offsetHeight}),Yp=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},eN=["INPUT","SELECT","TEXTAREA"];function gi(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return eN.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const qp=e=>"clientX"in e,Et=(e,t)=>{var a,s;const n=qp(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Gl=(e,t,n,r,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(s=>{const i=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...ja(s)}})};function Qp({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:s,targetControlY:i}){const u=e*.125+o*.375+s*.375+n*.125,c=t*.125+a*.375+i*.375+r*.125,m=Math.abs(u-e),f=Math.abs(c-t);return[u,c,m,f]}function go(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Wl({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case ie.Left:return[t-go(t-r,a),n];case ie.Right:return[t+go(r-t,a),n];case ie.Top:return[t,n-go(n-o,a)];case ie.Bottom:return[t,n+go(o-n,a)]}}function Zp({sourceX:e,sourceY:t,sourcePosition:n=ie.Bottom,targetX:r,targetY:o,targetPosition:a=ie.Top,curvature:s=.25}){const[i,u]=Wl({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[c,m]=Wl({pos:a,x1:r,y1:o,x2:e,y2:t,c:s}),[f,p,h,v]=Qp({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:u,targetControlX:c,targetControlY:m});return[`M${e},${t} C${i},${u} ${c},${m} ${r},${o}`,f,p,h,v]}function Jp({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,s=Math.abs(r-t)/2,i=r<t?r+s:r-s;return[a,i,o,s]}function tN({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const a=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(a?s:0)}function nN({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const a=Aa(Uo(e),Uo(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return Pr(s,Da(a))>0}const rN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,oN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),aN=(e,t)=>{if(!e.source||!e.target)return t;let n;return Hp(e)?n={...e}:n={...e,id:rN(e)},oN(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function eh({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,s,i]=Jp({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,s,i]}const Kl={[ie.Left]:{x:-1,y:0},[ie.Right]:{x:1,y:0},[ie.Top]:{x:0,y:-1},[ie.Bottom]:{x:0,y:1}},sN=({source:e,sourcePosition:t=ie.Bottom,target:n})=>t===ie.Left||t===ie.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Xl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function iN({source:e,sourcePosition:t=ie.Bottom,target:n,targetPosition:r=ie.Top,center:o,offset:a}){const s=Kl[t],i=Kl[r],u={x:e.x+s.x*a,y:e.y+s.y*a},c={x:n.x+i.x*a,y:n.y+i.y*a},m=sN({source:u,sourcePosition:t,target:c}),f=m.x!==0?"x":"y",p=m[f];let h=[],v,g;const y={x:0,y:0},x={x:0,y:0},[S,E,w,C]=Jp({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*i[f]===-1){v=o.x??S,g=o.y??E;const N=[{x:v,y:u.y},{x:v,y:c.y}],T=[{x:u.x,y:g},{x:c.x,y:g}];s[f]===p?h=f==="x"?N:T:h=f==="x"?T:N}else{const N=[{x:u.x,y:c.y}],T=[{x:c.x,y:u.y}];if(f==="x"?h=s.x===p?T:N:h=s.y===p?N:T,t===r){const D=Math.abs(e[f]-n[f]);if(D<=a){const b=Math.min(a-1,a-D);s[f]===p?y[f]=(u[f]>e[f]?-1:1)*b:x[f]=(c[f]>n[f]?-1:1)*b}}if(t!==r){const D=f==="x"?"y":"x",b=s[f]===i[D],I=u[D]>c[D],P=u[D]<c[D];(s[f]===1&&(!b&&I||b&&P)||s[f]!==1&&(!b&&P||b&&I))&&(h=f==="x"?N:T)}const A={x:u.x+y.x,y:u.y+y.y},j={x:c.x+x.x,y:c.y+x.y},k=Math.max(Math.abs(A.x-h[0].x),Math.abs(j.x-h[0].x)),R=Math.max(Math.abs(A.y-h[0].y),Math.abs(j.y-h[0].y));k>=R?(v=(A.x+j.x)/2,g=h[0].y):(v=h[0].x,g=(A.y+j.y)/2)}return[[e,{x:u.x+y.x,y:u.y+y.y},...h,{x:c.x+x.x,y:c.y+x.y},n],v,g,w,C]}function cN(e,t,n,r){const o=Math.min(Xl(e,t)/2,Xl(t,n)/2,r),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${a+o*c},${s}Q ${a},${s} ${a},${s+o*m}`}const i=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${a},${s+o*u}Q ${a},${s} ${a+o*i},${s}`}function vi({sourceX:e,sourceY:t,sourcePosition:n=ie.Bottom,targetX:r,targetY:o,targetPosition:a=ie.Top,borderRadius:s=5,centerX:i,centerY:u,offset:c=20}){const[m,f,p,h,v]=iN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:i,y:u},offset:c});return[m.reduce((y,x,S)=>{let E="";return S>0&&S<m.length-1?E=cN(m[S-1],x,m[S+1],s):E=`${S===0?"M":"L"}${x.x} ${x.y}`,y+=E,y},""),f,p,h,v]}function Yl(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function lN(e){var f;const{sourceNode:t,targetNode:n}=e;if(!Yl(t)||!Yl(n))return null;const r=t.internals.handleBounds||ql(t.handles),o=n.internals.handleBounds||ql(n.handles),a=Ql((r==null?void 0:r.source)??[],e.sourceHandle),s=Ql(e.connectionMode===Hn.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!a||!s)return(f=e.onError)==null||f.call(e,"008",Rt.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const i=(a==null?void 0:a.position)||ie.Bottom,u=(s==null?void 0:s.position)||ie.Top,c=jr(t,a,i),m=jr(n,s,u);return{sourceX:c.x,sourceY:c.y,targetX:m.x,targetY:m.y,sourcePosition:i,targetPosition:u}}function ql(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function jr(e,t,n=ie.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:i}=t??At(e);if(r)return{x:o+s/2,y:a+i/2};switch((t==null?void 0:t.position)??n){case ie.Top:return{x:o+s/2,y:a};case ie.Right:return{x:o+s,y:a+i/2};case ie.Bottom:return{x:o+s/2,y:a+i};case ie.Left:return{x:o,y:a+i/2}}}function Ql(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function xi(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function uN(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const a=new Set;return e.reduce((s,i)=>([i.markerStart||r,i.markerEnd||o].forEach(u=>{if(u&&typeof u=="object"){const c=xi(u,t);a.has(c)||(s.push({id:c,color:u.color||n,...u}),a.add(c))}}),s),[]).sort((s,i)=>s.id.localeCompare(i.id))}const yc={nodeOrigin:[0,0],nodeExtent:Ar,elevateNodesOnSelect:!0,defaults:{}},dN={...yc,checkEquality:!0};function bc(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function fN(e,t,n){const r=bc(yc,n);for(const o of e.values())if(o.parentId)wc(o,e,t,r);else{const a=Zr(o,r.nodeOrigin),s=zn(o.extent)?o.extent:r.nodeExtent,i=sn(a,s,At(o));o.internals.positionAbsolute=i}}function yi(e,t,n,r){var i,u;const o=bc(dN,r),a=new Map(t),s=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let m=a.get(c.id);if(o.checkEquality&&c===(m==null?void 0:m.internals.userNode))t.set(c.id,m);else{const f=Zr(c,o.nodeOrigin),p=zn(c.extent)?c.extent:o.nodeExtent,h=sn(f,p,At(c));m={...o.defaults,...c,measured:{width:(i=c.measured)==null?void 0:i.width,height:(u=c.measured)==null?void 0:u.height},internals:{positionAbsolute:h,handleBounds:c.measured?m==null?void 0:m.internals.handleBounds:void 0,z:th(c,s),userNode:c}},t.set(c.id,m)}c.parentId&&wc(m,t,n,r)}}function mN(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function wc(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:s}=bc(yc,r),i=e.parentId,u=t.get(i);if(!u){console.warn(`Parent node ${i} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}mN(e,n);const c=o?1e3:0,{x:m,y:f,z:p}=pN(e,u,a,s,c),{positionAbsolute:h}=e.internals,v=m!==h.x||f!==h.y;(v||p!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:v?{x:m,y:f}:h,z:p})}function th(e,t){return(qe(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function pN(e,t,n,r,o){const{x:a,y:s}=t.internals.positionAbsolute,i=At(e),u=Zr(e,n),c=zn(e.extent)?sn(u,e.extent,i):u;let m=sn({x:a+c.x,y:s+c.y},r,i);e.extent==="parent"&&(m=zp(m,i,t));const f=th(e,o),p=t.internals.z??0;return{x:m.x,y:m.y,z:p>f?p:f}}function Ec(e,t,n,r=[0,0]){var s;const o=[],a=new Map;for(const i of e){const u=t.get(i.parentId);if(!u)continue;const c=((s=a.get(i.parentId))==null?void 0:s.expandedRect)??Vn(u),m=Gp(c,i.rect);a.set(i.parentId,{expandedRect:m,parent:u})}return a.size>0&&a.forEach(({expandedRect:i,parent:u},c)=>{var E;const m=u.internals.positionAbsolute,f=At(u),p=u.origin??r,h=i.x<m.x?Math.round(Math.abs(m.x-i.x)):0,v=i.y<m.y?Math.round(Math.abs(m.y-i.y)):0,g=Math.max(f.width,Math.round(i.width)),y=Math.max(f.height,Math.round(i.height)),x=(g-f.width)*p[0],S=(y-f.height)*p[1];(h>0||v>0||x||S)&&(o.push({id:c,type:"position",position:{x:u.position.x-h+x,y:u.position.y-v+S}}),(E=n.get(c))==null||E.forEach(w=>{e.some(C=>C.id===w.id)||o.push({id:w.id,type:"position",position:{x:w.position.x+h,y:w.position.y+v}})})),(f.width<i.width||f.height<i.height||h||v)&&o.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:g+(h?p[0]*h-x:0),height:y+(v?p[1]*v-S:0)}})}),o}function hN(e,t,n,r,o,a){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let i=!1;if(!s)return{changes:[],updatedInternals:i};const u=[],c=window.getComputedStyle(s),{m22:m}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const p of e.values()){const h=t.get(p.id);if(h)if(h.hidden)h.internals={...h.internals,handleBounds:void 0},i=!0;else{const v=ja(p.nodeElement),g=h.measured.width!==v.width||h.measured.height!==v.height;if(!!(v.width&&v.height&&(g||!h.internals.handleBounds||p.force))){const x=p.nodeElement.getBoundingClientRect(),S=zn(h.extent)?h.extent:a;let{positionAbsolute:E}=h.internals;h.parentId&&h.extent==="parent"?E=zp(E,v,t.get(h.parentId)):S&&(E=sn(E,S,v)),h.measured=v,h.internals={...h.internals,positionAbsolute:E,handleBounds:{source:Gl("source",p.nodeElement,x,m,h.id),target:Gl("target",p.nodeElement,x,m,h.id)}},h.parentId&&wc(h,t,n,{nodeOrigin:o}),i=!0,g&&(u.push({id:h.id,type:"dimensions",dimensions:v}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:Vn(h,o)}))}}}if(f.length>0){const p=Ec(f,t,n,o);u.push(...p)}return{changes:u,updatedInternals:i}}async function gN({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r),i=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(i)}function nh(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:a,sourceHandle:s=null,targetHandle:i=null}=r,u=`${o}-source-${s}`,c=`${a}-target-${i}`,m=e.get(u)||new Map,f=e.get(c)||new Map,p={edgeId:r.id,source:o,target:a,sourceHandle:s,targetHandle:i};t.set(r.id,r),e.set(u,m.set(`${a}-${i}`,p)),e.set(c,f.set(`${o}-${s}`,p))}}function rh(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:rh(n,t):!1}function Zl(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function vN(e,t,n,r){const o=new Map;for(const[a,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!rh(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const i=e.get(a);i&&o.set(a,{id:a,position:i.position||{x:0,y:0},distance:{x:n.x-i.internals.positionAbsolute.x,y:n.y-i.internals.positionAbsolute.y},extent:i.extent,parentId:i.parentId,origin:i.origin,expandParent:i.expandParent,internals:{positionAbsolute:i.internals.positionAbsolute||{x:0,y:0}},measured:{width:i.measured.width??0,height:i.measured.height??0}})}return o}function ws({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,i;const o=[];for(const[u,c]of t){const m=(s=n.get(u))==null?void 0:s.internals.userNode;m&&o.push({...m,position:c.position,dragging:r})}if(!e)return[o[0],o];const a=n.get(e).internals.userNode;return[{...a,position:((i=t.get(e))==null?void 0:i.position)||a.position,dragging:r},o]}function xN({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},s=0,i=new Map,u=!1,c={x:0,y:0},m=null,f=!1,p=null,h=!1;function v({noDragClassName:y,handleSelector:x,domNode:S,isSelectable:E,nodeId:w,nodeClickDistance:C=0}){p=Le(S);function _({x:j,y:k},R){const{nodeLookup:D,nodeExtent:b,snapGrid:I,snapToGrid:P,nodeOrigin:L,onNodeDrag:$,onSelectionDrag:M,onError:V,updateNodePositions:G}=t();a={x:j,y:k};let O=!1,H={x:0,y:0,x2:0,y2:0};if(i.size>1&&b){const U=Jr(i);H=hi(U)}for(const[U,z]of i){if(!D.has(U))continue;let Y={x:j-z.distance.x,y:k-z.distance.y};P&&(Y=Pa(Y,I));let K=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];if(i.size>1&&b&&!z.extent){const{positionAbsolute:se}=z.internals,ue=se.x-H.x+b[0][0],oe=se.x+z.measured.width-H.x2+b[1][0],pe=se.y-H.y+b[0][1],ve=se.y+z.measured.height-H.y2+b[1][1];K=[[ue,pe],[oe,ve]]}const{position:X,positionAbsolute:J}=Vp({nodeId:U,nextPosition:Y,nodeLookup:D,nodeExtent:K,nodeOrigin:L,onError:V});O=O||z.position.x!==X.x||z.position.y!==X.y,z.position=X,z.internals.positionAbsolute=J}if(O&&(G(i,!0),R&&(r||$||!w&&M))){const[U,z]=ws({nodeId:w,dragItems:i,nodeLookup:D});r==null||r(R,i,U,z),$==null||$(R,U,z),w||M==null||M(R,z)}}async function N(){if(!m)return;const{transform:j,panBy:k,autoPanSpeed:R}=t(),[D,b]=Up(c,m,R);(D!==0||b!==0)&&(a.x=(a.x??0)-D/j[2],a.y=(a.y??0)-b/j[2],await k({x:D,y:b})&&_(a,null)),s=requestAnimationFrame(N)}function T(j){var O;const{nodeLookup:k,multiSelectionActive:R,nodesDraggable:D,transform:b,snapGrid:I,snapToGrid:P,selectNodesOnDrag:L,onNodeDragStart:$,onSelectionDragStart:M,unselectNodesAndEdges:V}=t();f=!0,(!L||!E)&&!R&&w&&((O=k.get(w))!=null&&O.selected||V()),E&&L&&w&&(e==null||e(w));const G=xr(j.sourceEvent,{transform:b,snapGrid:I,snapToGrid:P});if(a=G,i=vN(k,D,G,w),i.size>0&&(n||$||!w&&M)){const[H,U]=ws({nodeId:w,dragItems:i,nodeLookup:k});n==null||n(j.sourceEvent,i,H,U),$==null||$(j.sourceEvent,H,U),w||M==null||M(j.sourceEvent,U)}}const A=wp().clickDistance(C).on("start",j=>{const{domNode:k,nodeDragThreshold:R,transform:D,snapGrid:b,snapToGrid:I}=t();h=!1,R===0&&T(j),a=xr(j.sourceEvent,{transform:D,snapGrid:b,snapToGrid:I}),m=(k==null?void 0:k.getBoundingClientRect())||null,c=Et(j.sourceEvent,m)}).on("drag",j=>{const{autoPanOnNodeDrag:k,transform:R,snapGrid:D,snapToGrid:b,nodeDragThreshold:I,nodeLookup:P}=t(),L=xr(j.sourceEvent,{transform:R,snapGrid:D,snapToGrid:b});if((j.sourceEvent.type==="touchmove"&&j.sourceEvent.touches.length>1||w&&!P.has(w))&&(h=!0),!h){if(!u&&k&&f&&(u=!0,N()),!f){const $=L.xSnapped-(a.x??0),M=L.ySnapped-(a.y??0);Math.sqrt($*$+M*M)>I&&T(j)}(a.x!==L.xSnapped||a.y!==L.ySnapped)&&i&&f&&(c=Et(j.sourceEvent,m),_(L,j.sourceEvent))}}).on("end",j=>{if(!(!f||h)&&(u=!1,f=!1,cancelAnimationFrame(s),i.size>0)){const{nodeLookup:k,updateNodePositions:R,onNodeDragStop:D,onSelectionDragStop:b}=t();if(R(i,!1),o||D||!w&&b){const[I,P]=ws({nodeId:w,dragItems:i,nodeLookup:k,dragging:!1});o==null||o(j.sourceEvent,i,I,P),D==null||D(j.sourceEvent,I,P),w||b==null||b(j.sourceEvent,P)}}}).filter(j=>{const k=j.target;return!j.button&&(!y||!Zl(k,`.${y}`,S))&&(!x||Zl(k,x,S))});p.call(A)}function g(){p==null||p.on(".drag",null)}return{update:v,destroy:g}}function yN(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())Pr(o,Vn(a))>0&&r.push(a);return r}const bN=250;function wN(e,t,n,r){var i,u;let o=[],a=1/0;const s=yN(e,n,t+bN);for(const c of s){const m=[...((i=c.internals.handleBounds)==null?void 0:i.source)??[],...((u=c.internals.handleBounds)==null?void 0:u.target)??[]];for(const f of m){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:p,y:h}=jr(c,f,f.position,!0),v=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(h-e.y,2));v>t||(v<a?(o=[{...f,x:p,y:h}],a=v):v===a&&o.push({...f,x:p,y:h}))}}if(!o.length)return null;if(o.length>1){const c=r.type==="source"?"target":"source";return o.find(m=>m.type===c)??o[0]}return o[0]}function oh(e,t,n,r,o,a=!1){var c,m,f;const s=r.get(e);if(!s)return null;const i=o==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((m=s.internals.handleBounds)==null?void 0:m.source)??[],...((f=s.internals.handleBounds)==null?void 0:f.target)??[]],u=(n?i==null?void 0:i.find(p=>p.id===n):i==null?void 0:i[0])??null;return u&&a?{...u,...jr(s,u,u.position,!0)}:u}function ah(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function EN(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const sh=()=>!0;function SN(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:s,domNode:i,nodeLookup:u,lib:c,autoPanOnConnect:m,flowId:f,panBy:p,cancelConnection:h,onConnectStart:v,onConnect:g,onConnectEnd:y,isValidConnection:x=sh,onReconnectEnd:S,updateConnection:E,getTransform:w,getFromHandle:C,autoPanSpeed:_}){const N=Yp(e.target);let T=0,A;const{x:j,y:k}=Et(e),R=N==null?void 0:N.elementFromPoint(j,k),D=ah(a,R),b=i==null?void 0:i.getBoundingClientRect();if(!b||!D)return;const I=oh(o,D,r,u,t);if(!I)return;let P=Et(e,b),L=!1,$=null,M=!1,V=null;function G(){if(!m||!b)return;const[J,se]=Up(P,b,_);p({x:J,y:se}),T=requestAnimationFrame(G)}const O={...I,nodeId:o,type:D,position:I.position},H=u.get(o),z={inProgress:!0,isValid:null,from:jr(H,O,ie.Left,!0),fromHandle:O,fromPosition:O.position,fromNode:H,to:P,toHandle:null,toPosition:Vl[O.position],toNode:null};E(z);let Y=z;v==null||v(e,{nodeId:o,handleId:r,handleType:D});function K(J){if(!C()||!O){X(J);return}const se=w();P=Et(J,b),A=wN(eo(P,se,!1,[1,1]),n,u,O),L||(G(),L=!0);const ue=ih(J,{handle:A,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:x,doc:N,lib:c,flowId:f,nodeLookup:u});V=ue.handleDomNode,$=ue.connection,M=EN(!!A,ue.isValid);const oe={...Y,isValid:M,to:A&&M?Wp({x:A.x,y:A.y},se):P,toHandle:ue.toHandle,toPosition:M&&ue.toHandle?ue.toHandle.position:Vl[O.position],toNode:ue.toHandle?u.get(ue.toHandle.nodeId):null};M&&A&&Y.toHandle&&oe.toHandle&&Y.toHandle.type===oe.toHandle.type&&Y.toHandle.nodeId===oe.toHandle.nodeId&&Y.toHandle.id===oe.toHandle.id&&Y.to.x===oe.to.x&&Y.to.y===oe.to.y||(E(oe),Y=oe)}function X(J){(A||V)&&$&&M&&(g==null||g($));const{inProgress:se,...ue}=Y,oe={...ue,toPosition:Y.toHandle?Y.toPosition:null};y==null||y(J,oe),a&&(S==null||S(J,oe)),h(),cancelAnimationFrame(T),L=!1,M=!1,$=null,V=null,N.removeEventListener("mousemove",K),N.removeEventListener("mouseup",X),N.removeEventListener("touchmove",K),N.removeEventListener("touchend",X)}N.addEventListener("mousemove",K),N.addEventListener("mouseup",X),N.addEventListener("touchmove",K),N.addEventListener("touchend",X)}function ih(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:s,lib:i,flowId:u,isValidConnection:c=sh,nodeLookup:m}){const f=a==="target",p=t?s.querySelector(`.${i}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:v}=Et(e),g=s.elementFromPoint(h,v),y=g!=null&&g.classList.contains(`${i}-flow__handle`)?g:p,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const S=ah(void 0,y),E=y.getAttribute("data-nodeid"),w=y.getAttribute("data-handleid"),C=y.classList.contains("connectable"),_=y.classList.contains("connectableend");if(!E||!S)return x;const N={source:f?E:r,sourceHandle:f?w:o,target:f?r:E,targetHandle:f?o:w};x.connection=N;const A=C&&_&&(n===Hn.Strict?f&&S==="source"||!f&&S==="target":E!==r||w!==o);x.isValid=A&&c(N),x.toHandle=oh(E,S,w,m,n,!1)}return x}const bi={onPointerDown:SN,isValid:ih};function CN({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Le(e);function a({translateExtent:i,width:u,height:c,zoomStep:m=10,pannable:f=!0,zoomable:p=!0,inversePan:h=!1}){const v=E=>{const w=n();if(E.sourceEvent.type!=="wheel"||!t)return;const C=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*m,_=w[2]*Math.pow(2,C);t.scaleTo(_)};let g=[0,0];const y=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(g=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},x=E=>{const w=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const C=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],_=[C[0]-g[0],C[1]-g[1]];g=C;const N=r()*Math.max(w[2],Math.log(w[2]))*(h?-1:1),T={x:w[0]-_[0]*N,y:w[1]-_[1]*N},A=[[0,0],[u,c]];t.setViewportConstrained({x:T.x,y:T.y,zoom:w[2]},A,i)},S=$p().on("start",y).on("zoom",f?x:null).on("zoom.wheel",p?v:null);o.call(S,{})}function s(){o.on("zoom",null)}return{update:a,destroy:s,pointer:Xe}}const _N=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ma=e=>({x:e.x,y:e.y,zoom:e.k}),Es=({x:e,y:t,zoom:n})=>Ra.translate(e,t).scale(n),Tn=(e,t)=>e.target.closest(`.${t}`),ch=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ss=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},lh=e=>{const t=e.ctrlKey&&Go()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function NN({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:i,onPanZoom:u,onPanZoomEnd:c}){return m=>{if(Tn(m,t))return!1;m.preventDefault(),m.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(m.ctrlKey&&s){const y=Xe(m),x=lh(m),S=f*Math.pow(2,x);r.scaleTo(n,S,y,m);return}const p=m.deltaMode===1?20:1;let h=o===nn.Vertical?0:m.deltaX*p,v=o===nn.Horizontal?0:m.deltaY*p;!Go()&&m.shiftKey&&o!==nn.Vertical&&(h=m.deltaY*p,v=0),r.translateBy(n,-(h/f)*a,-(v/f)*a,{internal:!0});const g=Ma(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,i==null||i(m,g)),e.isPanScrolling&&(u==null||u(m,g),e.panScrollTimeout=setTimeout(()=>{c==null||c(m,g),e.isPanScrolling=!1},150))}}function TN({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||Tn(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function RN({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,s,i;if((a=r.sourceEvent)!=null&&a.internal)return;const o=Ma(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((i=r.sourceEvent)==null?void 0:i.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function AN({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{var s,i;e.usedRightMouseButton=!!(n&&ch(t,e.mouseButton??0)),(s=a.sourceEvent)!=null&&s.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!((i=a.sourceEvent)!=null&&i.internal)&&(o==null||o(a.sourceEvent,Ma(a.transform)))}}function DN({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return s=>{var i;if(!((i=s.sourceEvent)!=null&&i.internal)&&(e.isZoomingOrPanning=!1,a&&ch(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&_N(e.prevViewport,s.transform))){const u=Ma(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,u)},n?150:0)}}}function PN({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:i,noPanClassName:u,lib:c}){return m=>{var v;const f=e||t,p=n&&m.ctrlKey;if(m.button===1&&m.type==="mousedown"&&(Tn(m,`${c}-flow__node`)||Tn(m,`${c}-flow__edge`)))return!0;if(!r&&!f&&!o&&!a&&!n||s||Tn(m,i)&&m.type==="wheel"||Tn(m,u)&&(m.type!=="wheel"||o&&m.type==="wheel"&&!e)||!n&&m.ctrlKey&&m.type==="wheel")return!1;if(!n&&m.type==="touchstart"&&((v=m.touches)==null?void 0:v.length)>1)return m.preventDefault(),!1;if(!f&&!o&&!p&&m.type==="wheel"||!r&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(r)&&!r.includes(m.button)&&m.type==="mousedown")return!1;const h=Array.isArray(r)&&r.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||m.type==="wheel")&&h}}function jN({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:a,onPanZoom:s,onPanZoomStart:i,onPanZoomEnd:u,onDraggingChange:c}){const m={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),p=$p().clickDistance(!qe(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),h=Le(e).call(p);E({x:a.x,y:a.y,zoom:Bn(a.zoom,t,n)},[[0,0],[f.width,f.height]],o);const v=h.on("wheel.zoom"),g=h.on("dblclick.zoom");p.wheelDelta(lh);function y(R,D){return h?new Promise(b=>{p==null||p.transform(Ss(h,D==null?void 0:D.duration,()=>b(!0)),R)}):Promise.resolve(!1)}function x({noWheelClassName:R,noPanClassName:D,onPaneContextMenu:b,userSelectionActive:I,panOnScroll:P,panOnDrag:L,panOnScrollMode:$,panOnScrollSpeed:M,preventScrolling:V,zoomOnPinch:G,zoomOnScroll:O,zoomOnDoubleClick:H,zoomActivationKeyPressed:U,lib:z,onTransformChange:Y}){I&&!m.isZoomingOrPanning&&S();const X=P&&!U&&!I?NN({zoomPanValues:m,noWheelClassName:R,d3Selection:h,d3Zoom:p,panOnScrollMode:$,panOnScrollSpeed:M,zoomOnPinch:G,onPanZoomStart:i,onPanZoom:s,onPanZoomEnd:u}):TN({noWheelClassName:R,preventScrolling:V,d3ZoomHandler:v});if(h.on("wheel.zoom",X,{passive:!1}),!I){const se=RN({zoomPanValues:m,onDraggingChange:c,onPanZoomStart:i});p.on("start",se);const ue=AN({zoomPanValues:m,panOnDrag:L,onPaneContextMenu:!!b,onPanZoom:s,onTransformChange:Y});p.on("zoom",ue);const oe=DN({zoomPanValues:m,panOnDrag:L,panOnScroll:P,onPaneContextMenu:b,onPanZoomEnd:u,onDraggingChange:c});p.on("end",oe)}const J=PN({zoomActivationKeyPressed:U,panOnDrag:L,zoomOnScroll:O,panOnScroll:P,zoomOnDoubleClick:H,zoomOnPinch:G,userSelectionActive:I,noPanClassName:D,noWheelClassName:R,lib:z});p.filter(J),H?h.on("dblclick.zoom",g):h.on("dblclick.zoom",null)}function S(){p.on("zoom",null)}async function E(R,D,b){const I=Es(R),P=p==null?void 0:p.constrain()(I,D,b);return P&&await y(P),new Promise(L=>L(P))}async function w(R,D){const b=Es(R);return await y(b,D),new Promise(I=>I(b))}function C(R){if(h){const D=Es(R),b=h.property("__zoom");(b.k!==R.zoom||b.x!==R.x||b.y!==R.y)&&(p==null||p.transform(h,D,null,{sync:!0}))}}function _(){const R=h?kp(h.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function N(R,D){return h?new Promise(b=>{p==null||p.scaleTo(Ss(h,D==null?void 0:D.duration,()=>b(!0)),R)}):Promise.resolve(!1)}function T(R,D){return h?new Promise(b=>{p==null||p.scaleBy(Ss(h,D==null?void 0:D.duration,()=>b(!0)),R)}):Promise.resolve(!1)}function A(R){p==null||p.scaleExtent(R)}function j(R){p==null||p.translateExtent(R)}function k(R){const D=!qe(R)||R<0?0:R;p==null||p.clickDistance(D)}return{update:x,destroy:S,setViewport:w,setViewportConstrained:E,getViewport:_,scaleTo:N,scaleBy:T,setScaleExtent:A,setTranslateExtent:j,syncViewport:C,setClickDistance:k}}var Mn;(function(e){e.Line="line",e.Handle="handle"})(Mn||(Mn={}));const MN=["top-left","top-right","bottom-left","bottom-right"],IN=["top","right","bottom","left"];function kN({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:a}){const s=e-t,i=n-r,u=[s>0?1:s<0?-1:0,i>0?1:i<0?-1:0];return s&&o&&(u[0]=u[0]*-1),i&&a&&(u[1]=u[1]*-1),u}function $N(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function Pt(e,t){return Math.max(0,t-e)}function jt(e,t){return Math.max(0,e-t)}function vo(e,t,n){return Math.max(0,t-e,e-n)}function Jl(e,t){return e?!t:t}function ON(e,t,n,r,o,a,s,i){let{affectsX:u,affectsY:c}=t;const{isHorizontal:m,isVertical:f}=t,p=m&&f,{xSnapped:h,ySnapped:v}=n,{minWidth:g,maxWidth:y,minHeight:x,maxHeight:S}=r,{x:E,y:w,width:C,height:_,aspectRatio:N}=e;let T=Math.floor(m?h-e.pointerX:0),A=Math.floor(f?v-e.pointerY:0);const j=C+(u?-T:T),k=_+(c?-A:A),R=-a[0]*C,D=-a[1]*_;let b=vo(j,g,y),I=vo(k,x,S);if(s){let $=0,M=0;u&&T<0?$=Pt(E+T+R,s[0][0]):!u&&T>0&&($=jt(E+j+R,s[1][0])),c&&A<0?M=Pt(w+A+D,s[0][1]):!c&&A>0&&(M=jt(w+k+D,s[1][1])),b=Math.max(b,$),I=Math.max(I,M)}if(i){let $=0,M=0;u&&T>0?$=jt(E+T,i[0][0]):!u&&T<0&&($=Pt(E+j,i[1][0])),c&&A>0?M=jt(w+A,i[0][1]):!c&&A<0&&(M=Pt(w+k,i[1][1])),b=Math.max(b,$),I=Math.max(I,M)}if(o){if(m){const $=vo(j/N,x,S)*N;if(b=Math.max(b,$),s){let M=0;!u&&!c||u&&!c&&p?M=jt(w+D+j/N,s[1][1])*N:M=Pt(w+D+(u?T:-T)/N,s[0][1])*N,b=Math.max(b,M)}if(i){let M=0;!u&&!c||u&&!c&&p?M=Pt(w+j/N,i[1][1])*N:M=jt(w+(u?T:-T)/N,i[0][1])*N,b=Math.max(b,M)}}if(f){const $=vo(k*N,g,y)/N;if(I=Math.max(I,$),s){let M=0;!u&&!c||c&&!u&&p?M=jt(E+k*N+R,s[1][0])/N:M=Pt(E+(c?A:-A)*N+R,s[0][0])/N,I=Math.max(I,M)}if(i){let M=0;!u&&!c||c&&!u&&p?M=Pt(E+k*N,i[1][0])/N:M=jt(E+(c?A:-A)*N,i[0][0])/N,I=Math.max(I,M)}}}A=A+(A<0?I:-I),T=T+(T<0?b:-b),o&&(p?j>k*N?A=(Jl(u,c)?-T:T)/N:T=(Jl(u,c)?-A:A)*N:m?(A=T/N,c=u):(T=A*N,u=c));const P=u?E+T:E,L=c?w+A:w;return{width:C+(u?-T:T),height:_+(c?-A:A),x:a[0]*T*(u?-1:1)+P,y:a[1]*A*(c?-1:1)+L}}const uh={width:0,height:0,x:0,y:0},LN={...uh,pointerX:0,pointerY:0,aspectRatio:1};function FN(e){return[[0,0],[e.measured.width,e.measured.height]]}function HN(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,a=e.measured.width??0,s=e.measured.height??0,i=n[0]*a,u=n[1]*s;return[[r-i,o-u],[r+a-i,o+s-u]]}function BN({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const a=Le(e);function s({controlPosition:u,boundaries:c,keepAspectRatio:m,onResizeStart:f,onResize:p,onResizeEnd:h,shouldResize:v}){let g={...uh},y={...LN};const x=$N(u);let S,E=[],w,C,_;const N=wp().on("start",T=>{const{nodeLookup:A,transform:j,snapGrid:k,snapToGrid:R,nodeOrigin:D}=n();if(S=A.get(t),!S)return;const{xSnapped:b,ySnapped:I}=xr(T.sourceEvent,{transform:j,snapGrid:k,snapToGrid:R});g={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},y={...g,pointerX:b,pointerY:I,aspectRatio:g.width/g.height},w=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(w=A.get(S.parentId),C=w&&S.extent==="parent"?FN(w):void 0),E=[],_=void 0;for(const[P,L]of A)if(L.parentId===t&&(E.push({id:P,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const $=HN(L,S,L.origin??D);_?_=[[Math.min($[0][0],_[0][0]),Math.min($[0][1],_[0][1])],[Math.max($[1][0],_[1][0]),Math.max($[1][1],_[1][1])]]:_=$}f==null||f(T,{...g})}).on("drag",T=>{const{transform:A,snapGrid:j,snapToGrid:k,nodeOrigin:R}=n(),D=xr(T.sourceEvent,{transform:A,snapGrid:j,snapToGrid:k}),b=[];if(!S)return;const{x:I,y:P,width:L,height:$}=g,M={},V=S.origin??R,{width:G,height:O,x:H,y:U}=ON(y,x,D,c,m,V,C,_),z=G!==L,Y=O!==$,K=H!==I&&z,X=U!==P&&Y;if(!K&&!X&&!z&&!Y)return;if((K||X||V[0]===1||V[1]===1)&&(M.x=K?H:g.x,M.y=X?U:g.y,g.x=M.x,g.y=M.y,E.length>0)){const oe=H-I,pe=U-P;for(const ve of E)ve.position={x:ve.position.x-oe+V[0]*(G-L),y:ve.position.y-pe+V[1]*(O-$)},b.push(ve)}if((z||Y)&&(M.width=z?G:g.width,M.height=Y?O:g.height,g.width=M.width,g.height=M.height),w&&S.expandParent){const oe=V[0]*(M.width??0);M.x&&M.x<oe&&(g.x=oe,y.x=y.x-(M.x-oe));const pe=V[1]*(M.height??0);M.y&&M.y<pe&&(g.y=pe,y.y=y.y-(M.y-pe))}const J=kN({width:g.width,prevWidth:L,height:g.height,prevHeight:$,affectsX:x.affectsX,affectsY:x.affectsY}),se={...g,direction:J};(v==null?void 0:v(T,se))!==!1&&(p==null||p(T,se),r(M,b))}).on("end",T=>{h==null||h(T,{...g}),o==null||o()});a.call(N)}function i(){a.on(".drag",null)}return{update:s,destroy:i}}var dh={exports:{}},fh={},mh={exports:{}},ph={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Un=d;function VN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zN=typeof Object.is=="function"?Object.is:VN,UN=Un.useState,GN=Un.useEffect,WN=Un.useLayoutEffect,KN=Un.useDebugValue;function XN(e,t){var n=t(),r=UN({inst:{value:n,getSnapshot:t}}),o=r[0].inst,a=r[1];return WN(function(){o.value=n,o.getSnapshot=t,Cs(o)&&a({inst:o})},[e,n,t]),GN(function(){return Cs(o)&&a({inst:o}),e(function(){Cs(o)&&a({inst:o})})},[e]),KN(n),n}function Cs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zN(e,n)}catch{return!0}}function YN(e,t){return t()}var qN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?YN:XN;ph.useSyncExternalStore=Un.useSyncExternalStore!==void 0?Un.useSyncExternalStore:qN;mh.exports=ph;var QN=mh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ia=d,ZN=QN;function JN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var eT=typeof Object.is=="function"?Object.is:JN,tT=ZN.useSyncExternalStore,nT=Ia.useRef,rT=Ia.useEffect,oT=Ia.useMemo,aT=Ia.useDebugValue;fh.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var a=nT(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=oT(function(){function u(h){if(!c){if(c=!0,m=h,h=r(h),o!==void 0&&s.hasValue){var v=s.value;if(o(v,h))return f=v}return f=h}if(v=f,eT(m,h))return v;var g=r(h);return o!==void 0&&o(v,g)?v:(m=h,f=g)}var c=!1,m,f,p=n===void 0?null:n;return[function(){return u(t())},p===null?void 0:function(){return u(p())}]},[t,n,r,o]);var i=tT(e,a[0],a[1]);return rT(function(){s.hasValue=!0,s.value=i},[i]),aT(i),i};dh.exports=fh;var sT=dh.exports;const iT=Ju(sT),cT={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},eu=e=>{let t;const n=new Set,r=(m,f)=>{const p=typeof m=="function"?m(t):m;if(!Object.is(p,t)){const h=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(v=>v(t,h))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>c,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(cT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,o,u);return u},lT=e=>e?eu(e):eu,{useDebugValue:uT}=W,{useSyncExternalStoreWithSelector:dT}=iT,fT=e=>e;function hh(e,t=fT,n){const r=dT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return uT(r),r}const tu=(e,t)=>{const n=lT(e),r=(o,a=t)=>hh(n,o,a);return Object.assign(r,n),r},mT=(e,t)=>e?tu(e,t):tu;function be(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const ka=d.createContext(null),pT=ka.Provider,gh=Rt.error001();function me(e,t){const n=d.useContext(ka);if(n===null)throw new Error(gh);return hh(n,e,t)}function ye(){const e=d.useContext(ka);if(e===null)throw new Error(gh);return d.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const nu={display:"none"},hT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},vh="react-flow__node-desc",xh="react-flow__edge-desc",gT="react-flow__aria-live",vT=e=>e.ariaLiveMessage;function xT({rfId:e}){const t=me(vT);return l.jsx("div",{id:`${gT}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:hT,children:t})}function yT({rfId:e,disableKeyboardA11y:t}){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{id:`${vh}-${e}`,style:nu,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),l.jsx("div",{id:`${xh}-${e}`,style:nu,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&l.jsx(xT,{rfId:e})]})}const bT=e=>e.userSelectionActive?"none":"all";function Sc({position:e="top-left",children:t,className:n,style:r,...o}){const a=me(bT),s=`${e}`.split("-");return l.jsx("div",{className:Ee(["react-flow__panel",n,...s]),style:{...r,pointerEvents:a},...o,children:t})}function wT({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:l.jsx(Sc,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:l.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const ET=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},xo=e=>e.id;function ST(e,t){return be(e.selectedNodes.map(xo),t.selectedNodes.map(xo))&&be(e.selectedEdges.map(xo),t.selectedEdges.map(xo))}function CT({onSelectionChange:e}){const t=ye(),{selectedNodes:n,selectedEdges:r}=me(ET,ST);return d.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[n,r,e]),null}const _T=e=>!!e.onSelectionChangeHandlers;function NT({onSelectionChange:e}){const t=me(_T);return e||t?l.jsx(CT,{onSelectionChange:e}):null}const yh=[0,0],TT={x:0,y:0,zoom:1},RT=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],ru=[...RT,"rfId"],AT=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),ou={translateExtent:Ar,nodeOrigin:yh,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function DT(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:s,reset:i,setDefaultNodesAndEdges:u,setPaneClickDistance:c}=me(AT,be),m=ye();d.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{f.current=ou,i()}),[]);const f=d.useRef(ou);return d.useEffect(()=>{for(const p of ru){const h=e[p],v=f.current[p];h!==v&&(typeof e[p]>"u"||(p==="nodes"?t(h):p==="edges"?n(h):p==="minZoom"?r(h):p==="maxZoom"?o(h):p==="translateExtent"?a(h):p==="nodeExtent"?s(h):p==="paneClickDistance"?c(h):p==="fitView"?m.setState({fitViewOnInit:h}):p==="fitViewOptions"?m.setState({fitViewOnInitOptions:h}):m.setState({[p]:h})))}f.current=e},ru.map(p=>e[p])),null}function au(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function PT(e){var r;const[t,n]=d.useState(e==="system"?null:e);return d.useEffect(()=>{if(e!=="system"){n(e);return}const o=au(),a=()=>n(o!=null&&o.matches?"dark":"light");return a(),o==null||o.addEventListener("change",a),()=>{o==null||o.removeEventListener("change",a)}},[e]),t!==null?t:(r=au())!=null&&r.matches?"dark":"light"}const su=typeof document<"u"?document:null;function Mr(e=null,t={target:su,actInsideInputWithModifier:!0}){const[n,r]=d.useState(!1),o=d.useRef(!1),a=d.useRef(new Set([])),[s,i]=d.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),m=c.reduce((f,p)=>f.concat(...p),[]);return[c,m]}return[[],[]]},[e]);return d.useEffect(()=>{const u=(t==null?void 0:t.target)||su;if(e!==null){const c=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&gi(p))return!1;const v=cu(p.code,i);a.current.add(p[v]),iu(s,a.current,!1)&&(p.preventDefault(),r(!0))},m=p=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&gi(p))return!1;const v=cu(p.code,i);iu(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(p[v]),p.key==="Meta"&&a.current.clear(),o.current=!1},f=()=>{a.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",m),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",m),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,r]),n}function iu(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function cu(e,t){return t.includes(e)?"code":"key"}const jT=()=>{const e=ye();return d.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,a],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:a,domNode:s}=e.getState();if(!a||!s)return Promise.resolve(!1);const i=mi(n,t),{width:u,height:c}=ja(s);return pi({nodes:i,width:u,height:c,minZoom:r,maxZoom:o,panZoom:a},t)},setCenter:async(t,n,r)=>{const{width:o,height:a,maxZoom:s,panZoom:i}=e.getState(),u=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,c=o/2-t*u,m=a/2-n*u;return i?(await i.setViewport({x:c,y:m,zoom:u},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:a,maxZoom:s,panZoom:i}=e.getState(),u=xc(t,r,o,a,s,(n==null?void 0:n.padding)??.1);return i?(await i.setViewport(u,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:s,y:i}=a.getBoundingClientRect(),u={x:t.x-s,y:t.y-i};return eo(u,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),s=Wp(t,n);return{x:s.x+o,y:s.y+a}}}),[])};function bh(e,t){const n=[],r=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const s=r.get(a.id);s?s.push(a):r.set(a.id,[a])}for(const a of t){const s=r.get(a.id);if(!s){n.push(a);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const i={...a};for(const u of s)MT(u,i);n.push(i)}return o.length&&o.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function MT(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function wh(e,t){return bh(e,t)}function Eh(e,t){return bh(e,t)}function Yt(e,t){return{id:e,type:"select",selected:t}}function Rn(e,t=new Set,n=!1){const r=[];for(const[o,a]of e){const s=t.has(o);!(a.selected===void 0&&!s)&&a.selected!==s&&(n&&(a.selected=s),r.push(Yt(a.id,s)))}return r}function lu({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,s]of e.entries()){const i=t.get(s.id),u=((o=i==null?void 0:i.internals)==null?void 0:o.userNode)??i;u!==void 0&&u!==s&&n.push({id:s.id,item:s,type:"replace"}),u===void 0&&n.push({item:s,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function uu(e){return{id:e.id,type:"remove"}}const du=e=>Y_(e),IT=e=>Hp(e);function Sh(e){return d.forwardRef(e)}const kT=typeof window<"u"?d.useLayoutEffect:d.useEffect;function fu(e){const[t,n]=d.useState(!1),[r]=d.useState(()=>$T(()=>n(!0)));return kT(()=>{if(!t){r.reset();return}const o=r.get();o.length&&(e(o),r.reset()),n(!1)},[t]),r}function $T(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Ch=d.createContext(null);function OT({children:e}){const t=ye(),n=d.useCallback(i=>{const{nodes:u=[],setNodes:c,hasDefaultNodes:m,onNodesChange:f,nodeLookup:p}=t.getState();let h=u;for(const v of i)h=typeof v=="function"?v(h):v;m?c(h):f&&f(lu({items:h,lookup:p}))},[]),r=fu(n),o=d.useCallback(i=>{const{edges:u=[],setEdges:c,hasDefaultEdges:m,onEdgesChange:f,edgeLookup:p}=t.getState();let h=u;for(const v of i)h=typeof v=="function"?v(h):v;m?c(h):f&&f(lu({items:h,lookup:p}))},[]),a=fu(o),s=d.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return l.jsx(Ch.Provider,{value:s,children:e})}function LT(){const e=d.useContext(Ch);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const FT=e=>!!e.panZoom;function qn(){const e=jT(),t=ye(),n=LT(),r=me(FT),o=d.useMemo(()=>{const a=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},i=f=>{n.edgeQueue.push(f)},u=f=>{var x,S;const{nodeLookup:p,nodeOrigin:h}=t.getState(),v=du(f)?f:p.get(f.id),g=v.parentId?Xp(v.position,v.measured,v.parentId,p,h):v.position,y={id:v.id,position:g,width:((x=v.measured)==null?void 0:x.width)??v.width,height:((S=v.measured)==null?void 0:S.height)??v.height,data:v.data};return Vn(y)},c=(f,p,h={replace:!1})=>{s(v=>v.map(g=>{if(g.id===f){const y=typeof p=="function"?p(g):p;return h.replace&&du(y)?y:{...g,...y}}return g}))},m=(f,p,h={replace:!1})=>{i(v=>v.map(g=>{if(g.id===f){const y=typeof p=="function"?p(g):p;return h.replace&&IT(y)?y:{...g,...y}}return g}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var p;return(p=a(f))==null?void 0:p.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(p=>({...p}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:i,addNodes:f=>{const p=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...p])},addEdges:f=>{const p=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...p])},toObject:()=>{const{nodes:f=[],edges:p=[],transform:h}=t.getState(),[v,g,y]=h;return{nodes:f.map(x=>({...x})),edges:p.map(x=>({...x})),viewport:{x:v,y:g,zoom:y}}},deleteElements:async({nodes:f=[],edges:p=[]})=>{const{nodes:h,edges:v,onNodesDelete:g,onEdgesDelete:y,triggerNodeChanges:x,triggerEdgeChanges:S,onDelete:E,onBeforeDelete:w}=t.getState(),{nodes:C,edges:_}=await Z_({nodesToRemove:f,edgesToRemove:p,nodes:h,edges:v,onBeforeDelete:w}),N=_.length>0,T=C.length>0;if(N){const A=_.map(uu);y==null||y(_),S(A)}if(T){const A=C.map(uu);g==null||g(C),x(A)}return(T||N)&&(E==null||E({nodes:C,edges:_})),{deletedNodes:C,deletedEdges:_}},getIntersectingNodes:(f,p=!0,h)=>{const v=Ul(f),g=v?f:u(f),y=h!==void 0;return g?(h||t.getState().nodes).filter(x=>{const S=t.getState().nodeLookup.get(x.id);if(S&&!v&&(x.id===f.id||!S.internals.positionAbsolute))return!1;const E=Vn(y?x:S),w=Pr(E,g);return p&&w>0||w>=g.width*g.height}):[]},isNodeIntersecting:(f,p,h=!0)=>{const g=Ul(f)?f:u(f);if(!g)return!1;const y=Pr(g,p);return h&&y>0||y>=g.width*g.height},updateNode:c,updateNodeData:(f,p,h={replace:!1})=>{c(f,v=>{const g=typeof p=="function"?p(v):p;return h.replace?{...v,data:g}:{...v,data:{...v.data,...g}}},h)},updateEdge:m,updateEdgeData:(f,p,h={replace:!1})=>{m(f,v=>{const g=typeof p=="function"?p(v):p;return h.replace?{...v,data:g}:{...v,data:{...v.data,...g}}},h)},getNodesBounds:f=>{const{nodeLookup:p,nodeOrigin:h}=t.getState();return q_(f,{nodeLookup:p,nodeOrigin:h})},getHandleConnections:({type:f,id:p,nodeId:h})=>{var v;return Array.from(((v=t.getState().connectionLookup.get(`${h}-${f}-${p??null}`))==null?void 0:v.values())??[])}}},[]);return d.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const mu=e=>e.selected,HT={actInsideInputWithModifier:!1},BT=typeof window<"u"?window:void 0;function VT({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ye(),{deleteElements:r}=qn(),o=Mr(e,HT),a=Mr(t,{target:BT});d.useEffect(()=>{if(o){const{edges:s,nodes:i}=n.getState();r({nodes:i.filter(mu),edges:s.filter(mu)}),n.setState({nodesSelectionActive:!1})}},[o]),d.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function zT(e){const t=ye();d.useEffect(()=>{const n=()=>{var o,a;if(!e.current)return!1;const r=ja(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",Rt.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const $a={position:"absolute",width:"100%",height:"100%",top:0,left:0},UT=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function GT({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=nn.Free,zoomOnDoubleClick:s=!0,panOnDrag:i=!0,defaultViewport:u,translateExtent:c,minZoom:m,maxZoom:f,zoomActivationKeyCode:p,preventScrolling:h=!0,children:v,noWheelClassName:g,noPanClassName:y,onViewportChange:x,isControlledViewport:S,paneClickDistance:E}){const w=ye(),C=d.useRef(null),{userSelectionActive:_,lib:N}=me(UT,be),T=Mr(p),A=d.useRef();zT(C);const j=d.useCallback(k=>{x==null||x({x:k[0],y:k[1],zoom:k[2]}),S||w.setState({transform:k})},[x,S]);return d.useEffect(()=>{if(C.current){A.current=jN({domNode:C.current,minZoom:m,maxZoom:f,translateExtent:c,viewport:u,paneClickDistance:E,onDraggingChange:b=>w.setState({paneDragging:b}),onPanZoomStart:(b,I)=>{const{onViewportChangeStart:P,onMoveStart:L}=w.getState();L==null||L(b,I),P==null||P(I)},onPanZoom:(b,I)=>{const{onViewportChange:P,onMove:L}=w.getState();L==null||L(b,I),P==null||P(I)},onPanZoomEnd:(b,I)=>{const{onViewportChangeEnd:P,onMoveEnd:L}=w.getState();L==null||L(b,I),P==null||P(I)}});const{x:k,y:R,zoom:D}=A.current.getViewport();return w.setState({panZoom:A.current,transform:[k,R,D],domNode:C.current.closest(".react-flow")}),()=>{var b;(b=A.current)==null||b.destroy()}}},[]),d.useEffect(()=>{var k;(k=A.current)==null||k.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:i,zoomActivationKeyPressed:T,preventScrolling:h,noPanClassName:y,userSelectionActive:_,noWheelClassName:g,lib:N,onTransformChange:j})},[e,t,n,r,o,a,s,i,T,h,y,_,g,N,j]),l.jsx("div",{className:"react-flow__renderer",ref:C,style:$a,children:v})}const WT=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function KT(){const{userSelectionActive:e,userSelectionRect:t}=me(WT,be);return e&&t?l.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const _s=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},XT=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function YT({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Dr.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:a,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:u,onPaneScroll:c,onPaneMouseEnter:m,onPaneMouseMove:f,onPaneMouseLeave:p,children:h}){const v=d.useRef(null),g=ye(),y=d.useRef(0),x=d.useRef(0),S=d.useRef(),E=d.useRef(new Map),{userSelectionActive:w,elementsSelectable:C,dragging:_}=me(XT,be),N=C&&(e||w),T=d.useRef(!1),A=d.useRef(!1),j=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,x.current=0},k=$=>{if(T.current){T.current=!1;return}i==null||i($),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},R=$=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){$.preventDefault();return}u==null||u($)},D=c?$=>c($):void 0,b=$=>{var U,z,Y,K;const{resetSelectedElements:M,domNode:V,edgeLookup:G}=g.getState();if(S.current=V==null?void 0:V.getBoundingClientRect(),!C||!e||$.button!==0||$.target!==v.current||!S.current)return;(z=(U=$.target)==null?void 0:U.setPointerCapture)==null||z.call(U,$.pointerId),A.current=!0,T.current=!1,E.current=new Map;for(const[X,J]of G)E.current.set(J.source,((Y=E.current.get(J.source))==null?void 0:Y.add(X))||new Set([X])),E.current.set(J.target,((K=E.current.get(J.target))==null?void 0:K.add(X))||new Set([X]));const{x:O,y:H}=Et($.nativeEvent,S.current);M(),g.setState({userSelectionRect:{width:0,height:0,startX:O,startY:H,x:O,y:H}}),a==null||a($)},I=$=>{const{userSelectionRect:M,edgeLookup:V,transform:G,nodeLookup:O,triggerNodeChanges:H,triggerEdgeChanges:U}=g.getState();if(!S.current||!M)return;T.current=!0;const{x:z,y:Y}=Et($.nativeEvent,S.current),{startX:K,startY:X}=M,J={startX:K,startY:X,x:z<K?z:K,y:Y<X?Y:X,width:Math.abs(z-K),height:Math.abs(Y-X)},se=Bp(O,J,G,n===Dr.Partial,!0),ue=new Set,oe=new Set;for(const pe of se){oe.add(pe.id);const ve=E.current.get(pe.id);if(ve)for(const De of ve)ue.add(De)}if(y.current!==oe.size){y.current=oe.size;const pe=Rn(O,oe,!0);H(pe)}if(x.current!==ue.size){x.current=ue.size;const pe=Rn(V,ue);U(pe)}g.setState({userSelectionRect:J,userSelectionActive:!0,nodesSelectionActive:!1})},P=$=>{var V,G;if($.button!==0||!A.current)return;(G=(V=$.target)==null?void 0:V.releasePointerCapture)==null||G.call(V,$.pointerId);const{userSelectionRect:M}=g.getState();!w&&M&&$.target===v.current&&(k==null||k($)),y.current>0&&g.setState({nodesSelectionActive:!0}),j(),s==null||s($),(t||o)&&(T.current=!1),A.current=!1},L=r===!0||Array.isArray(r)&&r.includes(0);return l.jsxs("div",{className:Ee(["react-flow__pane",{draggable:L,dragging:_,selection:e}]),onClick:N?void 0:_s(k,v),onContextMenu:_s(R,v),onWheel:_s(D,v),onPointerEnter:N?void 0:m,onPointerDown:N?b:f,onPointerMove:N?I:f,onPointerUp:N?P:void 0,onPointerLeave:p,ref:v,style:$a,children:[h,l.jsx(KT,{})]})}function wi({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:i,onError:u}=t.getState(),c=i.get(e);if(!c){u==null||u("012",Rt.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var m;return(m=r==null?void 0:r.current)==null?void 0:m.blur()})):o([e])}function _h({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:s}){const i=ye(),[u,c]=d.useState(!1),m=d.useRef();return d.useEffect(()=>{m.current=xN({getStoreItems:()=>i.getState(),onNodeMouseDown:f=>{wi({id:f,store:i,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),d.useEffect(()=>{var f,p;if(t)(f=m.current)==null||f.destroy();else if(e.current)return(p=m.current)==null||p.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:s}),()=>{var h;(h=m.current)==null||h.destroy()}},[n,r,t,a,e,o]),u}const qT=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Nh(){const e=ye();return d.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:a,nodesDraggable:s,onError:i,updateNodePositions:u,nodeLookup:c,nodeOrigin:m}=e.getState(),f=new Map,p=qT(s),h=o?a[0]:5,v=o?a[1]:5,g=n.direction.x*h*n.factor,y=n.direction.y*v*n.factor;for(const[,x]of c){if(!p(x))continue;let S={x:x.internals.positionAbsolute.x+g,y:x.internals.positionAbsolute.y+y};o&&(S=Pa(S,a));const{position:E,positionAbsolute:w}=Vp({nodeId:x.id,nextPosition:S,nodeLookup:c,nodeExtent:r,nodeOrigin:m,onError:i});x.position=E,x.internals.positionAbsolute=w,f.set(x.id,x)}u(f)},[])}const Cc=d.createContext(null),QT=Cc.Provider;Cc.Consumer;const Th=()=>d.useContext(Cc),ZT=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),JT=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:a,connection:s}=r,{fromHandle:i,toHandle:u,isValid:c}=s,m=(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n;return{connectingFrom:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,connectingTo:m,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:a===Hn.Strict?(i==null?void 0:i.type)!==n:e!==(i==null?void 0:i.nodeId)||t!==(i==null?void 0:i.id),connectionInProcess:!!i,valid:m&&c}};function eR({type:e="source",position:t=ie.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:s,onConnect:i,children:u,className:c,onMouseDown:m,onTouchStart:f,...p},h){var b,I;const v=s||null,g=e==="target",y=ye(),x=Th(),{connectOnClick:S,noPanClassName:E,rfId:w}=me(ZT,be),{connectingFrom:C,connectingTo:_,clickConnecting:N,isPossibleEndHandle:T,connectionInProcess:A,valid:j}=me(JT(x,v,e),be);x||(I=(b=y.getState()).onError)==null||I.call(b,"010",Rt.error010());const k=P=>{const{defaultEdgeOptions:L,onConnect:$,hasDefaultEdges:M}=y.getState(),V={...L,...P};if(M){const{edges:G,setEdges:O}=y.getState();O(aN(V,G))}$==null||$(V),i==null||i(V)},R=P=>{if(!x)return;const L=qp(P.nativeEvent);if(o&&(L&&P.button===0||!L)){const $=y.getState();bi.onPointerDown(P.nativeEvent,{autoPanOnConnect:$.autoPanOnConnect,connectionMode:$.connectionMode,connectionRadius:$.connectionRadius,domNode:$.domNode,nodeLookup:$.nodeLookup,lib:$.lib,isTarget:g,handleId:v,nodeId:x,flowId:$.rfId,panBy:$.panBy,cancelConnection:$.cancelConnection,onConnectStart:$.onConnectStart,onConnectEnd:$.onConnectEnd,updateConnection:$.updateConnection,onConnect:k,isValidConnection:n||$.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:$.autoPanSpeed})}L?m==null||m(P):f==null||f(P)},D=P=>{const{onClickConnectStart:L,onClickConnectEnd:$,connectionClickStartHandle:M,connectionMode:V,isValidConnection:G,lib:O,rfId:H,nodeLookup:U,connection:z}=y.getState();if(!x||!M&&!o)return;if(!M){L==null||L(P.nativeEvent,{nodeId:x,handleId:v,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:x,type:e,id:v}});return}const Y=Yp(P.target),K=n||G,{connection:X,isValid:J}=bi.isValid(P.nativeEvent,{handle:{nodeId:x,id:v,type:e},connectionMode:V,fromNodeId:M.nodeId,fromHandleId:M.id||null,fromType:M.type,isValidConnection:K,flowId:H,doc:Y,lib:O,nodeLookup:U});J&&X&&k(X);const se=structuredClone(z);delete se.inProgress,se.toPosition=se.toHandle?se.toHandle.position:null,$==null||$(P,se),y.setState({connectionClickStartHandle:null})};return l.jsx("div",{"data-handleid":v,"data-nodeid":x,"data-handlepos":t,"data-id":`${w}-${x}-${v}-${e}`,className:Ee(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,c,{source:!g,target:g,connectable:r,connectablestart:o,connectableend:a,clickconnecting:N,connectingfrom:C,connectingto:_,valid:j,connectionindicator:r&&(!A||T)&&(A?a:o)}]),onMouseDown:R,onTouchStart:R,onClick:S?D:void 0,ref:h,...p,children:u})}const Wo=d.memo(Sh(eR));function tR({data:e,isConnectable:t,sourcePosition:n=ie.Bottom}){return l.jsxs(l.Fragment,{children:[e==null?void 0:e.label,l.jsx(Wo,{type:"source",position:n,isConnectable:t})]})}function nR({data:e,isConnectable:t,targetPosition:n=ie.Top,sourcePosition:r=ie.Bottom}){return l.jsxs(l.Fragment,{children:[l.jsx(Wo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,l.jsx(Wo,{type:"source",position:r,isConnectable:t})]})}function rR(){return null}function oR({data:e,isConnectable:t,targetPosition:n=ie.Top}){return l.jsxs(l.Fragment,{children:[l.jsx(Wo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Ko={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},pu={input:tR,default:nR,output:oR,group:rR};function aR(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const sR=e=>{const{width:t,height:n,x:r,y:o}=Jr(e.nodeLookup,{filter:a=>!!a.selected});return{width:qe(t)?t:null,height:qe(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function iR({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ye(),{width:o,height:a,transformString:s,userSelectionActive:i}=me(sR,be),u=Nh(),c=d.useRef(null);if(d.useEffect(()=>{var p;n||(p=c.current)==null||p.focus({preventScroll:!0})},[n]),_h({nodeRef:c}),i||!o||!a)return null;const m=e?p=>{const h=r.getState().nodes.filter(v=>v.selected);e(p,h)}:void 0,f=p=>{Object.prototype.hasOwnProperty.call(Ko,p.key)&&u({direction:Ko[p.key],factor:p.shiftKey?4:1})};return l.jsx("div",{className:Ee(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:l.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:o,height:a}})})}const hu=typeof window<"u"?window:void 0,cR=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Rh({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:i,deleteKeyCode:u,selectionKeyCode:c,selectionOnDrag:m,selectionMode:f,onSelectionStart:p,onSelectionEnd:h,multiSelectionKeyCode:v,panActivationKeyCode:g,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:S,zoomOnPinch:E,panOnScroll:w,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:N,panOnDrag:T,defaultViewport:A,translateExtent:j,minZoom:k,maxZoom:R,preventScrolling:D,onSelectionContextMenu:b,noWheelClassName:I,noPanClassName:P,disableKeyboardA11y:L,onViewportChange:$,isControlledViewport:M}){const{nodesSelectionActive:V,userSelectionActive:G}=me(cR),O=Mr(c,{target:hu}),H=Mr(g,{target:hu}),U=H||T,z=H||w,Y=m&&U!==!0,K=O||G||Y;return VT({deleteKeyCode:u,multiSelectionKeyCode:v}),l.jsx(GT,{onPaneContextMenu:a,elementsSelectable:x,zoomOnScroll:S,zoomOnPinch:E,panOnScroll:z,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:N,panOnDrag:!O&&U,defaultViewport:A,translateExtent:j,minZoom:k,maxZoom:R,zoomActivationKeyCode:y,preventScrolling:D,noWheelClassName:I,noPanClassName:P,onViewportChange:$,isControlledViewport:M,paneClickDistance:i,children:l.jsxs(YT,{onSelectionStart:p,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:U,isSelecting:!!K,selectionMode:f,selectionKeyPressed:O,selectionOnDrag:Y,children:[e,V&&l.jsx(iR,{onSelectionContextMenu:b,noPanClassName:P,disableKeyboardA11y:L})]})})}Rh.displayName="FlowRenderer";const lR=d.memo(Rh),uR=e=>t=>e?Bp(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function dR(e){return me(d.useCallback(uR(e),[e]),be)}const fR=e=>e.updateNodeInternals;function mR(){const e=me(fR),[t]=d.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const a=o.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:o.target,force:!0})}),e(r)}));return d.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function pR({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=ye(),a=d.useRef(null),s=d.useRef(null),i=d.useRef(e.sourcePosition),u=d.useRef(e.targetPosition),c=d.useRef(t),m=n&&!!e.internals.handleBounds;return d.useEffect(()=>{a.current&&!e.hidden&&(!m||s.current!==a.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(a.current),s.current=a.current)},[m,e.hidden]),d.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),d.useEffect(()=>{if(a.current){const f=c.current!==t,p=i.current!==e.sourcePosition,h=u.current!==e.targetPosition;(f||p||h)&&(c.current=t,i.current=e.sourcePosition,u.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function hR({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:s,nodesDraggable:i,elementsSelectable:u,nodesConnectable:c,nodesFocusable:m,resizeObserver:f,noDragClassName:p,noPanClassName:h,disableKeyboardA11y:v,rfId:g,nodeTypes:y,nodeExtent:x,nodeClickDistance:S,onError:E}){const{node:w,internals:C,isParent:_}=me(X=>{const J=X.nodeLookup.get(e),se=X.parentLookup.has(e);return{node:J,internals:J.internals,isParent:se}},be);let N=w.type||"default",T=(y==null?void 0:y[N])||pu[N];T===void 0&&(E==null||E("003",Rt.error003(N)),N="default",T=pu.default);const A=!!(w.draggable||i&&typeof w.draggable>"u"),j=!!(w.selectable||u&&typeof w.selectable>"u"),k=!!(w.connectable||c&&typeof w.connectable>"u"),R=!!(w.focusable||m&&typeof w.focusable>"u"),D=ye(),b=Kp(w),I=pR({node:w,nodeType:N,hasDimensions:b,resizeObserver:f}),P=_h({nodeRef:I,disabled:w.hidden||!A,noDragClassName:p,handleSelector:w.dragHandle,nodeId:e,isSelectable:j,nodeClickDistance:S}),L=Nh();if(w.hidden)return null;const $=At(w),M=aR(w),V=j||A||t||n||r||o,G=n?X=>n(X,{...C.userNode}):void 0,O=r?X=>r(X,{...C.userNode}):void 0,H=o?X=>o(X,{...C.userNode}):void 0,U=a?X=>a(X,{...C.userNode}):void 0,z=s?X=>s(X,{...C.userNode}):void 0,Y=X=>{const{selectNodesOnDrag:J,nodeDragThreshold:se}=D.getState();j&&(!J||!A||se>0)&&wi({id:e,store:D,nodeRef:I}),t&&t(X,{...C.userNode})},K=X=>{if(!(gi(X.nativeEvent)||v))if(Op.includes(X.key)&&j){const J=X.key==="Escape";wi({id:e,store:D,unselect:J,nodeRef:I})}else A&&w.selected&&Object.prototype.hasOwnProperty.call(Ko,X.key)&&(D.setState({ariaLiveMessage:`Moved selected node ${X.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~C.positionAbsolute.x}, y: ${~~C.positionAbsolute.y}`}),L({direction:Ko[X.key],factor:X.shiftKey?4:1}))};return l.jsx("div",{className:Ee(["react-flow__node",`react-flow__node-${N}`,{[h]:A},w.className,{selected:w.selected,selectable:j,parent:_,draggable:A,dragging:P}]),ref:I,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:V?"all":"none",visibility:b?"visible":"hidden",...w.style,...M},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:G,onMouseMove:O,onMouseLeave:H,onContextMenu:U,onClick:Y,onDoubleClick:z,onKeyDown:R?K:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":v?void 0:`${vh}-${g}`,"aria-label":w.ariaLabel,children:l.jsx(QT,{value:e,children:l.jsx(T,{id:e,data:w.data,type:N,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:w.selected,selectable:j,draggable:A,deletable:w.deletable??!0,isConnectable:k,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:P,dragHandle:w.dragHandle,zIndex:C.z,parentId:w.parentId,...$})})})}const gR=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ah(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:a}=me(gR,be),s=dR(e.onlyRenderVisibleElements),i=mR();return l.jsx("div",{className:"react-flow__nodes",style:$a,children:s.map(u=>l.jsx(hR,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:i,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},u))})}Ah.displayName="NodeRenderer";const vR=d.memo(Ah);function xR(e){return me(d.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const a=n.nodeLookup.get(o.source),s=n.nodeLookup.get(o.target);a&&s&&nN({sourceNode:a,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),be)}const yR=({color:e="none",strokeWidth:t=1})=>l.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),bR=({color:e="none",strokeWidth:t=1})=>l.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),gu={[zo.Arrow]:yR,[zo.ArrowClosed]:bR};function wR(e){const t=ye();return d.useMemo(()=>{var o,a;return Object.prototype.hasOwnProperty.call(gu,e)?gu[e]:((a=(o=t.getState()).onError)==null||a.call(o,"009",Rt.error009(e)),null)},[e])}const ER=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:i="auto-start-reverse"})=>{const u=wR(t);return u?l.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:i,refX:"0",refY:"0",children:l.jsx(u,{color:n,strokeWidth:s})}):null},Dh=({defaultColor:e,rfId:t})=>{const n=me(a=>a.edges),r=me(a=>a.defaultEdgeOptions),o=d.useMemo(()=>uN(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?l.jsx("svg",{className:"react-flow__marker",children:l.jsx("defs",{children:o.map(a=>l.jsx(ER,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};Dh.displayName="MarkerDefinitions";var SR=d.memo(Dh);function Ph({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:s=[2,4],labelBgBorderRadius:i=2,children:u,className:c,...m}){const[f,p]=d.useState({x:1,y:0,width:0,height:0}),h=Ee(["react-flow__edge-textwrapper",c]),v=d.useRef(null);return d.useEffect(()=>{if(v.current){const g=v.current.getBBox();p({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:l.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...m,children:[o&&l.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:i,ry:i}),l.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:v,style:r,children:n}),u]})}Ph.displayName="EdgeText";const CR=d.memo(Ph);function Oa({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:i,labelBgPadding:u,labelBgBorderRadius:c,style:m,markerEnd:f,markerStart:p,className:h,interactionWidth:v=20}){return l.jsxs(l.Fragment,{children:[l.jsx("path",{id:e,style:m,d:t,fill:"none",className:Ee(["react-flow__edge-path",h]),markerEnd:f,markerStart:p}),v&&l.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:v,className:"react-flow__edge-interaction"}),o&&qe(n)&&qe(r)?l.jsx(CR,{x:n,y:r,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:i,labelBgPadding:u,labelBgBorderRadius:c}):null]})}function vu({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===ie.Left||e===ie.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function jh({sourceX:e,sourceY:t,sourcePosition:n=ie.Bottom,targetX:r,targetY:o,targetPosition:a=ie.Top}){const[s,i]=vu({pos:n,x1:e,y1:t,x2:r,y2:o}),[u,c]=vu({pos:a,x1:r,y1:o,x2:e,y2:t}),[m,f,p,h]=Qp({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:i,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${i} ${u},${c} ${r},${o}`,m,f,p,h]}function Mh(e){return d.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:s=ie.Bottom,targetPosition:i=ie.Top,label:u,labelStyle:c,labelShowBg:m,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:v,markerEnd:g,markerStart:y,interactionWidth:x})=>{const[S,E,w]=jh({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:a,targetPosition:i}),C=e.isInternal?void 0:t;return l.jsx(Oa,{id:C,path:S,labelX:E,labelY:w,label:u,labelStyle:c,labelShowBg:m,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:v,markerEnd:g,markerStart:y,interactionWidth:x})})}const _R=Mh({isInternal:!1}),Ih=Mh({isInternal:!0});_R.displayName="SimpleBezierEdge";Ih.displayName="SimpleBezierEdgeInternal";function kh(e){return d.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:s,labelStyle:i,labelShowBg:u,labelBgStyle:c,labelBgPadding:m,labelBgBorderRadius:f,style:p,sourcePosition:h=ie.Bottom,targetPosition:v=ie.Top,markerEnd:g,markerStart:y,pathOptions:x,interactionWidth:S})=>{const[E,w,C]=vi({sourceX:n,sourceY:r,sourcePosition:h,targetX:o,targetY:a,targetPosition:v,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset}),_=e.isInternal?void 0:t;return l.jsx(Oa,{id:_,path:E,labelX:w,labelY:C,label:s,labelStyle:i,labelShowBg:u,labelBgStyle:c,labelBgPadding:m,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:y,interactionWidth:S})})}const $h=kh({isInternal:!1}),Oh=kh({isInternal:!0});$h.displayName="SmoothStepEdge";Oh.displayName="SmoothStepEdgeInternal";function Lh(e){return d.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return l.jsx($h,{...n,id:r,pathOptions:d.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const NR=Lh({isInternal:!1}),Fh=Lh({isInternal:!0});NR.displayName="StepEdge";Fh.displayName="StepEdgeInternal";function Hh(e){return d.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:s,labelStyle:i,labelShowBg:u,labelBgStyle:c,labelBgPadding:m,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:v,interactionWidth:g})=>{const[y,x,S]=eh({sourceX:n,sourceY:r,targetX:o,targetY:a}),E=e.isInternal?void 0:t;return l.jsx(Oa,{id:E,path:y,labelX:x,labelY:S,label:s,labelStyle:i,labelShowBg:u,labelBgStyle:c,labelBgPadding:m,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:v,interactionWidth:g})})}const TR=Hh({isInternal:!1}),Bh=Hh({isInternal:!0});TR.displayName="StraightEdge";Bh.displayName="StraightEdgeInternal";function Vh(e){return d.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:s=ie.Bottom,targetPosition:i=ie.Top,label:u,labelStyle:c,labelShowBg:m,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:v,markerEnd:g,markerStart:y,pathOptions:x,interactionWidth:S})=>{const[E,w,C]=Zp({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:a,targetPosition:i,curvature:x==null?void 0:x.curvature}),_=e.isInternal?void 0:t;return l.jsx(Oa,{id:_,path:E,labelX:w,labelY:C,label:u,labelStyle:c,labelShowBg:m,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:v,markerEnd:g,markerStart:y,interactionWidth:S})})}const RR=Vh({isInternal:!1}),zh=Vh({isInternal:!0});RR.displayName="BezierEdge";zh.displayName="BezierEdgeInternal";const xu={default:zh,straight:Bh,step:Fh,smoothstep:Oh,simplebezier:Ih},yu={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},AR=(e,t,n)=>n===ie.Left?e-t:n===ie.Right?e+t:e,DR=(e,t,n)=>n===ie.Top?e-t:n===ie.Bottom?e+t:e,bu="react-flow__edgeupdater";function wu({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:s,type:i}){return l.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:s,className:Ee([bu,`${bu}-${i}`]),cx:AR(t,r,e),cy:DR(n,r,e),r,stroke:"transparent",fill:"transparent"})}function PR({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:s,sourcePosition:i,targetPosition:u,onReconnect:c,onReconnectStart:m,onReconnectEnd:f,setReconnecting:p,setUpdateHover:h}){const v=ye(),g=(w,C)=>{if(w.button!==0)return;const{autoPanOnConnect:_,domNode:N,isValidConnection:T,connectionMode:A,connectionRadius:j,lib:k,onConnectStart:R,onConnectEnd:D,cancelConnection:b,nodeLookup:I,rfId:P,panBy:L,updateConnection:$}=v.getState(),M=C.type==="target";p(!0),m==null||m(w,n,C.type);const V=(O,H)=>{p(!1),f==null||f(O,n,C.type,H)},G=O=>c==null?void 0:c(n,O);bi.onPointerDown(w.nativeEvent,{autoPanOnConnect:_,connectionMode:A,connectionRadius:j,domNode:N,handleId:C.id,nodeId:C.nodeId,nodeLookup:I,isTarget:M,edgeUpdaterType:C.type,lib:k,flowId:P,cancelConnection:b,panBy:L,isValidConnection:T,onConnect:G,onConnectStart:R,onConnectEnd:D,onReconnectEnd:V,updateConnection:$,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle})},y=w=>g(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=w=>g(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),S=()=>h(!0),E=()=>h(!1);return l.jsxs(l.Fragment,{children:[(e===!0||e==="source")&&l.jsx(wu,{position:i,centerX:r,centerY:o,radius:t,onMouseDown:y,onMouseEnter:S,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&l.jsx(wu,{position:u,centerX:a,centerY:s,radius:t,onMouseDown:x,onMouseEnter:S,onMouseOut:E,type:"target"})]})}function jR({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:a,onContextMenu:s,onMouseEnter:i,onMouseMove:u,onMouseLeave:c,reconnectRadius:m,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,rfId:v,edgeTypes:g,noPanClassName:y,onError:x,disableKeyboardA11y:S}){let E=me(oe=>oe.edgeLookup.get(e));const w=me(oe=>oe.defaultEdgeOptions);E=w?{...w,...E}:E;let C=E.type||"default",_=(g==null?void 0:g[C])||xu[C];_===void 0&&(x==null||x("011",Rt.error011(C)),C="default",_=xu.default);const N=!!(E.focusable||t&&typeof E.focusable>"u"),T=typeof f<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),A=!!(E.selectable||r&&typeof E.selectable>"u"),j=d.useRef(null),[k,R]=d.useState(!1),[D,b]=d.useState(!1),I=ye(),{zIndex:P,sourceX:L,sourceY:$,targetX:M,targetY:V,sourcePosition:G,targetPosition:O}=me(d.useCallback(oe=>{const pe=oe.nodeLookup.get(E.source),ve=oe.nodeLookup.get(E.target);if(!pe||!ve)return{zIndex:E.zIndex,...yu};const De=lN({id:e,sourceNode:pe,targetNode:ve,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:oe.connectionMode,onError:x});return{zIndex:tN({selected:E.selected,zIndex:E.zIndex,sourceNode:pe,targetNode:ve,elevateOnSelect:oe.elevateEdgesOnSelect}),...De||yu}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),be),H=d.useMemo(()=>E.markerStart?`url('#${xi(E.markerStart,v)}')`:void 0,[E.markerStart,v]),U=d.useMemo(()=>E.markerEnd?`url('#${xi(E.markerEnd,v)}')`:void 0,[E.markerEnd,v]);if(E.hidden||L===null||$===null||M===null||V===null)return null;const z=oe=>{var rt;const{addSelectedEdges:pe,unselectNodesAndEdges:ve,multiSelectionActive:De}=I.getState();A&&(I.setState({nodesSelectionActive:!1}),E.selected&&De?(ve({nodes:[],edges:[E]}),(rt=j.current)==null||rt.blur()):pe([e])),o&&o(oe,E)},Y=a?oe=>{a(oe,{...E})}:void 0,K=s?oe=>{s(oe,{...E})}:void 0,X=i?oe=>{i(oe,{...E})}:void 0,J=u?oe=>{u(oe,{...E})}:void 0,se=c?oe=>{c(oe,{...E})}:void 0,ue=oe=>{var pe;if(!S&&Op.includes(oe.key)&&A){const{unselectNodesAndEdges:ve,addSelectedEdges:De}=I.getState();oe.key==="Escape"?((pe=j.current)==null||pe.blur(),ve({edges:[E]})):De([e])}};return l.jsx("svg",{style:{zIndex:P},children:l.jsxs("g",{className:Ee(["react-flow__edge",`react-flow__edge-${C}`,E.className,y,{selected:E.selected,animated:E.animated,inactive:!A&&!o,updating:k,selectable:A}]),onClick:z,onDoubleClick:Y,onContextMenu:K,onMouseEnter:X,onMouseMove:J,onMouseLeave:se,onKeyDown:N?ue:void 0,tabIndex:N?0:void 0,role:N?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":N?`${xh}-${v}`:void 0,ref:j,children:[!D&&l.jsx(_,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:A,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:L,sourceY:$,targetX:M,targetY:V,sourcePosition:G,targetPosition:O,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:H,markerEnd:U,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),T&&l.jsx(PR,{edge:E,isReconnectable:T,reconnectRadius:m,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,sourceX:L,sourceY:$,targetX:M,targetY:V,sourcePosition:G,targetPosition:O,setUpdateHover:R,setReconnecting:b})]})})}const MR=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Uh({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:i,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:m,reconnectRadius:f,onEdgeDoubleClick:p,onReconnectStart:h,onReconnectEnd:v,disableKeyboardA11y:g}){const{edgesFocusable:y,edgesReconnectable:x,elementsSelectable:S,onError:E}=me(MR,be),w=xR(t);return l.jsxs("div",{className:"react-flow__edges",children:[l.jsx(SR,{defaultColor:e,rfId:n}),w.map(C=>l.jsx(jR,{id:C,edgesFocusable:y,edgesReconnectable:x,elementsSelectable:S,noPanClassName:o,onReconnect:a,onContextMenu:s,onMouseEnter:i,onMouseMove:u,onMouseLeave:c,onClick:m,reconnectRadius:f,onDoubleClick:p,onReconnectStart:h,onReconnectEnd:v,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:g},C))]})}Uh.displayName="EdgeRenderer";const IR=d.memo(Uh),kR=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function $R({children:e}){const t=me(kR);return l.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function OR(e){const t=qn(),n=d.useRef(!1);d.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const LR=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function FR(e){const t=me(LR),n=ye();return d.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function HR(e){return e.connection.inProgress?{...e.connection,to:eo(e.connection.to,e.transform)}:{...e.connection}}function BR(e){return HR}function VR(e){const t=BR();return me(t,be)}const zR=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function UR({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:a,height:s,isValid:i,inProgress:u}=me(zR,be);return!(a&&o&&u)?null:l.jsx("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:l.jsx("g",{className:Ee(["react-flow__connection",Fp(i)]),children:l.jsx(Gh,{style:t,type:n,CustomComponent:r,isValid:i})})})}const Gh=({style:e,type:t=$t.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:a,fromNode:s,fromHandle:i,fromPosition:u,to:c,toNode:m,toHandle:f,toPosition:p}=VR();if(!o)return;if(n)return l.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:i,fromX:a.x,fromY:a.y,toX:c.x,toY:c.y,fromPosition:u,toPosition:p,connectionStatus:Fp(r),toNode:m,toHandle:f});let h="";const v={sourceX:a.x,sourceY:a.y,sourcePosition:u,targetX:c.x,targetY:c.y,targetPosition:p};switch(t){case $t.Bezier:[h]=Zp(v);break;case $t.SimpleBezier:[h]=jh(v);break;case $t.Step:[h]=vi({...v,borderRadius:0});break;case $t.SmoothStep:[h]=vi(v);break;default:[h]=eh(v)}return l.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};Gh.displayName="ConnectionLine";const GR={};function Eu(e=GR){d.useRef(e),ye(),d.useEffect(()=>{},[e])}function WR(){ye(),d.useRef(!1),d.useEffect(()=>{},[])}function Wh({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:i,onNodeMouseMove:u,onNodeMouseLeave:c,onNodeContextMenu:m,onSelectionContextMenu:f,onSelectionStart:p,onSelectionEnd:h,connectionLineType:v,connectionLineStyle:g,connectionLineComponent:y,connectionLineContainerStyle:x,selectionKeyCode:S,selectionOnDrag:E,selectionMode:w,multiSelectionKeyCode:C,panActivationKeyCode:_,zoomActivationKeyCode:N,deleteKeyCode:T,onlyRenderVisibleElements:A,elementsSelectable:j,defaultViewport:k,translateExtent:R,minZoom:D,maxZoom:b,preventScrolling:I,defaultMarkerColor:P,zoomOnScroll:L,zoomOnPinch:$,panOnScroll:M,panOnScrollSpeed:V,panOnScrollMode:G,zoomOnDoubleClick:O,panOnDrag:H,onPaneClick:U,onPaneMouseEnter:z,onPaneMouseMove:Y,onPaneMouseLeave:K,onPaneScroll:X,onPaneContextMenu:J,paneClickDistance:se,nodeClickDistance:ue,onEdgeContextMenu:oe,onEdgeMouseEnter:pe,onEdgeMouseMove:ve,onEdgeMouseLeave:De,reconnectRadius:rt,onReconnect:pt,onReconnectStart:Ut,onReconnectEnd:Zn,noDragClassName:Gt,noWheelClassName:Jn,noPanClassName:ht,disableKeyboardA11y:gt,nodeExtent:er,rfId:vt,viewport:xt,onViewportChange:mn}){return Eu(e),Eu(t),WR(),OR(n),FR(xt),l.jsx(lR,{onPaneClick:U,onPaneMouseEnter:z,onPaneMouseMove:Y,onPaneMouseLeave:K,onPaneContextMenu:J,onPaneScroll:X,paneClickDistance:se,deleteKeyCode:T,selectionKeyCode:S,selectionOnDrag:E,selectionMode:w,onSelectionStart:p,onSelectionEnd:h,multiSelectionKeyCode:C,panActivationKeyCode:_,zoomActivationKeyCode:N,elementsSelectable:j,zoomOnScroll:L,zoomOnPinch:$,zoomOnDoubleClick:O,panOnScroll:M,panOnScrollSpeed:V,panOnScrollMode:G,panOnDrag:H,defaultViewport:k,translateExtent:R,minZoom:D,maxZoom:b,onSelectionContextMenu:f,preventScrolling:I,noDragClassName:Gt,noWheelClassName:Jn,noPanClassName:ht,disableKeyboardA11y:gt,onViewportChange:mn,isControlledViewport:!!xt,children:l.jsxs($R,{children:[l.jsx(IR,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:pt,onReconnectStart:Ut,onReconnectEnd:Zn,onlyRenderVisibleElements:A,onEdgeContextMenu:oe,onEdgeMouseEnter:pe,onEdgeMouseMove:ve,onEdgeMouseLeave:De,reconnectRadius:rt,defaultMarkerColor:P,noPanClassName:ht,disableKeyboardA11y:gt,rfId:vt}),l.jsx(UR,{style:g,type:v,component:y,containerStyle:x}),l.jsx("div",{className:"react-flow__edgelabel-renderer"}),l.jsx(vR,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:i,onNodeMouseMove:u,onNodeMouseLeave:c,onNodeContextMenu:m,nodeClickDistance:ue,onlyRenderVisibleElements:A,noPanClassName:ht,noDragClassName:Gt,disableKeyboardA11y:gt,nodeExtent:er,rfId:vt}),l.jsx("div",{className:"react-flow__viewport-portal"})]})})}Wh.displayName="GraphView";const KR=d.memo(Wh),Su=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:s,nodeOrigin:i,nodeExtent:u}={})=>{const c=new Map,m=new Map,f=new Map,p=new Map,h=r??t??[],v=n??e??[],g=i??[0,0],y=u??Ar;nh(f,p,h),yi(v,c,m,{nodeOrigin:g,nodeExtent:y,elevateNodesOnSelect:!1});let x=[0,0,1];if(s&&o&&a){const S=Jr(c,{filter:_=>!!((_.width||_.initialWidth)&&(_.height||_.initialHeight))}),{x:E,y:w,zoom:C}=xc(S,o,a,.5,2,.1);x=[E,w,C]}return{rfId:"1",width:0,height:0,transform:x,nodes:v,nodeLookup:c,parentLookup:m,edges:h,edgeLookup:p,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Ar,nodeExtent:y,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Hn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:g,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Lp},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:J_,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},XR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:s,nodeOrigin:i,nodeExtent:u})=>mT((c,m)=>({...Su({nodes:e,edges:t,width:o,height:a,fitView:s,nodeOrigin:i,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:f=>{const{nodeLookup:p,parentLookup:h,nodeOrigin:v,elevateNodesOnSelect:g}=m();yi(f,p,h,{nodeOrigin:v,nodeExtent:u,elevateNodesOnSelect:g,checkEquality:!0}),c({nodes:f})},setEdges:f=>{const{connectionLookup:p,edgeLookup:h}=m();nh(p,h,f),c({edges:f})},setDefaultNodesAndEdges:(f,p)=>{if(f){const{setNodes:h}=m();h(f),c({hasDefaultNodes:!0})}if(p){const{setEdges:h}=m();h(p),c({hasDefaultEdges:!0})}},updateNodeInternals:(f,p={triggerFitView:!0})=>{const{triggerNodeChanges:h,nodeLookup:v,parentLookup:g,fitViewOnInit:y,fitViewDone:x,fitViewOnInitOptions:S,domNode:E,nodeOrigin:w,nodeExtent:C,debug:_,fitViewSync:N}=m(),{changes:T,updatedInternals:A}=hN(f,v,g,E,w,C);if(A){if(fN(v,g,{nodeOrigin:w,nodeExtent:C}),p.triggerFitView){let j=x;!x&&y&&(j=N({...S,nodes:S==null?void 0:S.nodes})),c({fitViewDone:j})}else c({});(T==null?void 0:T.length)>0&&(_&&console.log("React Flow: trigger node changes",T),h==null||h(T))}},updateNodePositions:(f,p=!1)=>{const h=[],v=[];for(const[g,y]of f){const x={id:g,type:"position",position:y.position,dragging:p};y!=null&&y.expandParent&&(y!=null&&y.parentId)&&x.position&&(h.push({id:g,parentId:y.parentId,rect:{...y.internals.positionAbsolute,width:y.measured.width,height:y.measured.height}}),x.position.x=Math.max(0,x.position.x),x.position.y=Math.max(0,x.position.y)),v.push(x)}if(h.length>0){const{nodeLookup:g,parentLookup:y,nodeOrigin:x}=m(),S=Ec(h,g,y,x);v.push(...S)}m().triggerNodeChanges(v)},triggerNodeChanges:f=>{const{onNodesChange:p,setNodes:h,nodes:v,hasDefaultNodes:g,debug:y}=m();if(f!=null&&f.length){if(g){const x=wh(f,v);h(x)}y&&console.log("React Flow: trigger node changes",f),p==null||p(f)}},triggerEdgeChanges:f=>{const{onEdgesChange:p,setEdges:h,edges:v,hasDefaultEdges:g,debug:y}=m();if(f!=null&&f.length){if(g){const x=Eh(f,v);h(x)}y&&console.log("React Flow: trigger edge changes",f),p==null||p(f)}},addSelectedNodes:f=>{const{multiSelectionActive:p,edgeLookup:h,nodeLookup:v,triggerNodeChanges:g,triggerEdgeChanges:y}=m();if(p){const x=f.map(S=>Yt(S,!0));g(x);return}g(Rn(v,new Set([...f]),!0)),y(Rn(h))},addSelectedEdges:f=>{const{multiSelectionActive:p,edgeLookup:h,nodeLookup:v,triggerNodeChanges:g,triggerEdgeChanges:y}=m();if(p){const x=f.map(S=>Yt(S,!0));y(x);return}y(Rn(h,new Set([...f]))),g(Rn(v,new Set,!0))},unselectNodesAndEdges:({nodes:f,edges:p}={})=>{const{edges:h,nodes:v,triggerNodeChanges:g,triggerEdgeChanges:y}=m(),x=f||v,S=p||h,E=x.map(C=>(C.selected=!1,Yt(C.id,!1))),w=S.map(C=>Yt(C.id,!1));g(E),y(w)},setMinZoom:f=>{const{panZoom:p,maxZoom:h}=m();p==null||p.setScaleExtent([f,h]),c({minZoom:f})},setMaxZoom:f=>{const{panZoom:p,minZoom:h}=m();p==null||p.setScaleExtent([h,f]),c({maxZoom:f})},setTranslateExtent:f=>{var p;(p=m().panZoom)==null||p.setTranslateExtent(f),c({translateExtent:f})},setPaneClickDistance:f=>{var p;(p=m().panZoom)==null||p.setClickDistance(f)},resetSelectedElements:()=>{const{edges:f,nodes:p,triggerNodeChanges:h,triggerEdgeChanges:v}=m(),g=p.reduce((x,S)=>S.selected?[...x,Yt(S.id,!1)]:x,[]),y=f.reduce((x,S)=>S.selected?[...x,Yt(S.id,!1)]:x,[]);h(g),v(y)},setNodeExtent:f=>{const{nodes:p,nodeLookup:h,parentLookup:v,nodeOrigin:g,elevateNodesOnSelect:y,nodeExtent:x}=m();f[0][0]===x[0][0]&&f[0][1]===x[0][1]&&f[1][0]===x[1][0]&&f[1][1]===x[1][1]||(yi(p,h,v,{nodeOrigin:g,nodeExtent:f,elevateNodesOnSelect:y,checkEquality:!1}),c({nodeExtent:f}))},panBy:f=>{const{transform:p,width:h,height:v,panZoom:g,translateExtent:y}=m();return gN({delta:f,panZoom:g,transform:p,translateExtent:y,width:h,height:v})},fitView:f=>{const{panZoom:p,width:h,height:v,minZoom:g,maxZoom:y,nodeLookup:x}=m();if(!p)return Promise.resolve(!1);const S=mi(x,f);return pi({nodes:S,width:h,height:v,panZoom:p,minZoom:g,maxZoom:y},f)},fitViewSync:f=>{const{panZoom:p,width:h,height:v,minZoom:g,maxZoom:y,nodeLookup:x}=m();if(!p)return!1;const S=mi(x,f);return pi({nodes:S,width:h,height:v,panZoom:p,minZoom:g,maxZoom:y},f),S.size>0},cancelConnection:()=>{c({connection:{...Lp}})},updateConnection:f=>{c({connection:f})},reset:()=>c({...Su()})}),Object.is);function Kh({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,fitView:s,nodeOrigin:i,nodeExtent:u,children:c}){const[m]=d.useState(()=>XR({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:s,nodeOrigin:i,nodeExtent:u}));return l.jsx(pT,{value:m,children:l.jsx(OT,{children:c})})}function YR({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:s,fitView:i,nodeOrigin:u,nodeExtent:c}){return d.useContext(ka)?l.jsx(l.Fragment,{children:e}):l.jsx(Kh,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:s,fitView:i,nodeOrigin:u,nodeExtent:c,children:e})}const qR={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function QR({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a,edgeTypes:s,onNodeClick:i,onEdgeClick:u,onInit:c,onMove:m,onMoveStart:f,onMoveEnd:p,onConnect:h,onConnectStart:v,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:x,onNodeMouseEnter:S,onNodeMouseMove:E,onNodeMouseLeave:w,onNodeContextMenu:C,onNodeDoubleClick:_,onNodeDragStart:N,onNodeDrag:T,onNodeDragStop:A,onNodesDelete:j,onEdgesDelete:k,onDelete:R,onSelectionChange:D,onSelectionDragStart:b,onSelectionDrag:I,onSelectionDragStop:P,onSelectionContextMenu:L,onSelectionStart:$,onSelectionEnd:M,onBeforeDelete:V,connectionMode:G,connectionLineType:O=$t.Bezier,connectionLineStyle:H,connectionLineComponent:U,connectionLineContainerStyle:z,deleteKeyCode:Y="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:X=!1,selectionMode:J=Dr.Full,panActivationKeyCode:se="Space",multiSelectionKeyCode:ue=Go()?"Meta":"Control",zoomActivationKeyCode:oe=Go()?"Meta":"Control",snapToGrid:pe,snapGrid:ve,onlyRenderVisibleElements:De=!1,selectNodesOnDrag:rt,nodesDraggable:pt,nodesConnectable:Ut,nodesFocusable:Zn,nodeOrigin:Gt=yh,edgesFocusable:Jn,edgesReconnectable:ht,elementsSelectable:gt=!0,defaultViewport:er=TT,minZoom:vt=.5,maxZoom:xt=2,translateExtent:mn=Ar,preventScrolling:Ga=!0,nodeExtent:Wt,defaultMarkerColor:tr="#b1b1b7",zoomOnScroll:Wa=!0,zoomOnPinch:nr=!0,panOnScroll:rr=!1,panOnScrollSpeed:Ka=.5,panOnScrollMode:Xa=nn.Free,zoomOnDoubleClick:Ya=!0,panOnDrag:F=!0,onPaneClick:B,onPaneMouseEnter:ee,onPaneMouseMove:Q,onPaneMouseLeave:re,onPaneScroll:ce,onPaneContextMenu:ae,paneClickDistance:fe=0,nodeClickDistance:de=0,children:Se,onReconnect:ge,onReconnectStart:Ne,onReconnectEnd:Ke,onEdgeContextMenu:pn,onEdgeDoubleClick:qa,onEdgeMouseEnter:Ix,onEdgeMouseMove:kx,onEdgeMouseLeave:$x,reconnectRadius:Ox=10,onNodesChange:Lx,onEdgesChange:Fx,noDragClassName:Hx="nodrag",noWheelClassName:Bx="nowheel",noPanClassName:Wc="nopan",fitView:Kc,fitViewOptions:Vx,connectOnClick:zx,attributionPosition:Ux,proOptions:Gx,defaultEdgeOptions:Wx,elevateNodesOnSelect:Kx,elevateEdgesOnSelect:Xx,disableKeyboardA11y:Xc=!1,autoPanOnConnect:Yx,autoPanOnNodeDrag:qx,autoPanSpeed:Qx,connectionRadius:Zx,isValidConnection:Jx,onError:ey,style:ty,id:Yc,nodeDragThreshold:ny,viewport:ry,onViewportChange:oy,width:ay,height:sy,colorMode:iy="light",debug:cy,...ly},uy){const Qa=Yc||"1",dy=PT(iy);return l.jsx("div",{...ly,style:{...ty,...qR},ref:uy,className:Ee(["react-flow",o,dy]),"data-testid":"rf__wrapper",id:Yc,children:l.jsxs(YR,{nodes:e,edges:t,width:ay,height:sy,fitView:Kc,nodeOrigin:Gt,nodeExtent:Wt,children:[l.jsx(KR,{onInit:c,onNodeClick:i,onEdgeClick:u,onNodeMouseEnter:S,onNodeMouseMove:E,onNodeMouseLeave:w,onNodeContextMenu:C,onNodeDoubleClick:_,nodeTypes:a,edgeTypes:s,connectionLineType:O,connectionLineStyle:H,connectionLineComponent:U,connectionLineContainerStyle:z,selectionKeyCode:K,selectionOnDrag:X,selectionMode:J,deleteKeyCode:Y,multiSelectionKeyCode:ue,panActivationKeyCode:se,zoomActivationKeyCode:oe,onlyRenderVisibleElements:De,defaultViewport:er,translateExtent:mn,minZoom:vt,maxZoom:xt,preventScrolling:Ga,zoomOnScroll:Wa,zoomOnPinch:nr,zoomOnDoubleClick:Ya,panOnScroll:rr,panOnScrollSpeed:Ka,panOnScrollMode:Xa,panOnDrag:F,onPaneClick:B,onPaneMouseEnter:ee,onPaneMouseMove:Q,onPaneMouseLeave:re,onPaneScroll:ce,onPaneContextMenu:ae,paneClickDistance:fe,nodeClickDistance:de,onSelectionContextMenu:L,onSelectionStart:$,onSelectionEnd:M,onReconnect:ge,onReconnectStart:Ne,onReconnectEnd:Ke,onEdgeContextMenu:pn,onEdgeDoubleClick:qa,onEdgeMouseEnter:Ix,onEdgeMouseMove:kx,onEdgeMouseLeave:$x,reconnectRadius:Ox,defaultMarkerColor:tr,noDragClassName:Hx,noWheelClassName:Bx,noPanClassName:Wc,rfId:Qa,disableKeyboardA11y:Xc,nodeExtent:Wt,viewport:ry,onViewportChange:oy}),l.jsx(DT,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:v,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:x,nodesDraggable:pt,nodesConnectable:Ut,nodesFocusable:Zn,edgesFocusable:Jn,edgesReconnectable:ht,elementsSelectable:gt,elevateNodesOnSelect:Kx,elevateEdgesOnSelect:Xx,minZoom:vt,maxZoom:xt,nodeExtent:Wt,onNodesChange:Lx,onEdgesChange:Fx,snapToGrid:pe,snapGrid:ve,connectionMode:G,translateExtent:mn,connectOnClick:zx,defaultEdgeOptions:Wx,fitView:Kc,fitViewOptions:Vx,onNodesDelete:j,onEdgesDelete:k,onDelete:R,onNodeDragStart:N,onNodeDrag:T,onNodeDragStop:A,onSelectionDrag:I,onSelectionDragStart:b,onSelectionDragStop:P,onMove:m,onMoveStart:f,onMoveEnd:p,noPanClassName:Wc,nodeOrigin:Gt,rfId:Qa,autoPanOnConnect:Yx,autoPanOnNodeDrag:qx,autoPanSpeed:Qx,onError:ey,connectionRadius:Zx,isValidConnection:Jx,selectNodesOnDrag:rt,nodeDragThreshold:ny,onBeforeDelete:V,paneClickDistance:fe,debug:cy}),l.jsx(NT,{onSelectionChange:D}),Se,l.jsx(wT,{proOptions:Gx,position:Ux}),l.jsx(yT,{rfId:Qa,disableKeyboardA11y:Xc})]})})}var wI=Sh(QR);function EI(){const e=ye();return d.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),o=Array.isArray(t)?t:[t],a=new Map;o.forEach(s=>{const i=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${s}"]`);i&&a.set(s,{id:s,nodeElement:i,force:!0})}),requestAnimationFrame(()=>r(a,{triggerFitView:!1}))},[])}const ZR=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function SI(){return me(ZR,be)}function CI(e){const[t,n]=d.useState(e),r=d.useCallback(o=>n(a=>wh(o,a)),[]);return[t,n,r]}function _I(e){const[t,n]=d.useState(e),r=d.useCallback(o=>n(a=>Eh(o,a)),[]);return[t,n,r]}function NI({onStart:e,onChange:t,onEnd:n}){const r=ye();d.useEffect(()=>{r.setState({onViewportChangeStart:e})},[e]),d.useEffect(()=>{r.setState({onViewportChange:t})},[t]),d.useEffect(()=>{r.setState({onViewportChangeEnd:n})},[n])}function JR({dimensions:e,lineWidth:t,variant:n,className:r}){return l.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ee(["react-flow__background-pattern",n,r])})}function eA({radius:e,className:t}){return l.jsx("circle",{cx:e,cy:e,r:e,className:Ee(["react-flow__background-pattern","dots",t])})}var Ht;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ht||(Ht={}));const tA={[Ht.Dots]:1,[Ht.Lines]:1,[Ht.Cross]:6},nA=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Xh({id:e,variant:t=Ht.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:s,bgColor:i,style:u,className:c,patternClassName:m}){const f=d.useRef(null),{transform:p,patternId:h}=me(nA,be),v=r||tA[t],g=t===Ht.Dots,y=t===Ht.Cross,x=Array.isArray(n)?n:[n,n],S=[x[0]*p[2]||1,x[1]*p[2]||1],E=v*p[2],w=Array.isArray(a)?a:[a,a],C=y?[E,E]:S,_=[w[0]*p[2]||1+C[0]/2,w[1]*p[2]||1+C[1]/2],N=`${h}${e||""}`;return l.jsxs("svg",{className:Ee(["react-flow__background",c]),style:{...u,...$a,"--xy-background-color-props":i,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[l.jsx("pattern",{id:N,x:p[0]%S[0],y:p[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:g?l.jsx(eA,{radius:E/2,className:m}):l.jsx(JR,{dimensions:C,lineWidth:o,variant:t,className:m})}),l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}Xh.displayName="Background";const TI=d.memo(Xh);function rA(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:l.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function oA(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:l.jsx("path",{d:"M0 0h32v4.2H0z"})})}function aA(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:l.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sA(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function iA(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function yo({children:e,className:t,...n}){return l.jsx("button",{type:"button",className:Ee(["react-flow__controls-button",t]),...n,children:e})}const cA=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Yh({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:s,onFitView:i,onInteractiveChange:u,className:c,children:m,position:f="bottom-left",orientation:p="vertical","aria-label":h="React Flow controls"}){const v=ye(),{isInteractive:g,minZoomReached:y,maxZoomReached:x}=me(cA,be),{zoomIn:S,zoomOut:E,fitView:w}=qn(),C=()=>{S(),a==null||a()},_=()=>{E(),s==null||s()},N=()=>{w(o),i==null||i()},T=()=>{v.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),u==null||u(!g)},A=p==="horizontal"?"horizontal":"vertical";return l.jsxs(Sc,{className:Ee(["react-flow__controls",A,c]),position:f,style:e,"data-testid":"rf__controls","aria-label":h,children:[t&&l.jsxs(l.Fragment,{children:[l.jsx(yo,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:l.jsx(rA,{})}),l.jsx(yo,{onClick:_,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:l.jsx(oA,{})})]}),n&&l.jsx(yo,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view",children:l.jsx(aA,{})}),r&&l.jsx(yo,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity",children:g?l.jsx(iA,{}):l.jsx(sA,{})}),m]})}Yh.displayName="Controls";const RI=d.memo(Yh);function lA({id:e,x:t,y:n,width:r,height:o,style:a,color:s,strokeColor:i,strokeWidth:u,className:c,borderRadius:m,shapeRendering:f,selected:p,onClick:h}){const{background:v,backgroundColor:g}=a||{},y=s||v||g;return l.jsx("rect",{className:Ee(["react-flow__minimap-node",{selected:p},c]),x:t,y:n,rx:m,ry:m,width:r,height:o,style:{fill:y,stroke:i,strokeWidth:u},shapeRendering:f,onClick:h?x=>h(x,e):void 0})}const uA=d.memo(lA),dA=e=>e.nodes.map(t=>t.id),Ns=e=>e instanceof Function?e:()=>e;function fA({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=uA,onClick:s}){const i=me(dA,be),u=Ns(t),c=Ns(e),m=Ns(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return l.jsx(l.Fragment,{children:i.map(p=>l.jsx(pA,{id:p,nodeColorFunc:u,nodeStrokeColorFunc:c,nodeClassNameFunc:m,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:s,shapeRendering:f},p))})}function mA({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:i,onClick:u}){const{node:c,x:m,y:f,width:p,height:h}=me(v=>{const g=v.nodeLookup.get(e),{x:y,y:x}=g.internals.positionAbsolute,{width:S,height:E}=At(g);return{node:g,x:y,y:x,width:S,height:E}},be);return!c||c.hidden||!Kp(c)?null:l.jsx(i,{x:m,y:f,width:p,height:h,style:c.style,selected:!!c.selected,className:r(c),color:t(c),borderRadius:o,strokeColor:n(c),strokeWidth:a,shapeRendering:s,onClick:u,id:c.id})}const pA=d.memo(mA);var hA=d.memo(fA);const gA=200,vA=150,xA=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Gp(Jr(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},yA="react-flow__minimap-desc";function qh({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:i,bgColor:u,maskColor:c,maskStrokeColor:m,maskStrokeWidth:f,position:p="bottom-right",onClick:h,onNodeClick:v,pannable:g=!1,zoomable:y=!1,ariaLabel:x="React Flow mini map",inversePan:S,zoomStep:E=10,offsetScale:w=5}){const C=ye(),_=d.useRef(null),{boundingRect:N,viewBB:T,rfId:A,panZoom:j,translateExtent:k,flowWidth:R,flowHeight:D}=me(xA,be),b=(e==null?void 0:e.width)??gA,I=(e==null?void 0:e.height)??vA,P=N.width/b,L=N.height/I,$=Math.max(P,L),M=$*b,V=$*I,G=w*$,O=N.x-(M-N.width)/2-G,H=N.y-(V-N.height)/2-G,U=M+G*2,z=V+G*2,Y=`${yA}-${A}`,K=d.useRef(0),X=d.useRef();K.current=$,d.useEffect(()=>{if(_.current&&j)return X.current=CN({domNode:_.current,panZoom:j,getTransform:()=>C.getState().transform,getViewScale:()=>K.current}),()=>{var ue;(ue=X.current)==null||ue.destroy()}},[j]),d.useEffect(()=>{var ue;(ue=X.current)==null||ue.update({translateExtent:k,width:R,height:D,inversePan:S,pannable:g,zoomStep:E,zoomable:y})},[g,y,S,E,k,R,D]);const J=h?ue=>{var ve;const[oe,pe]=((ve=X.current)==null?void 0:ve.pointer(ue))||[0,0];h(ue,{x:oe,y:pe})}:void 0,se=v?d.useCallback((ue,oe)=>{const pe=C.getState().nodeLookup.get(oe);v(ue,pe)},[]):void 0;return l.jsx(Sc,{position:p,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*$:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:Ee(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:l.jsxs("svg",{width:b,height:I,viewBox:`${O} ${H} ${U} ${z}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Y,ref:_,onClick:J,children:[x&&l.jsx("title",{id:Y,children:x}),l.jsx(hA,{onClick:se,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:i}),l.jsx("path",{className:"react-flow__minimap-mask",d:`M${O-G},${H-G}h${U+G*2}v${z+G*2}h${-U-G*2}z
        M${T.x},${T.y}h${T.width}v${T.height}h${-T.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}qh.displayName="MiniMap";const AI=d.memo(qh);function bA({nodeId:e,position:t,variant:n=Mn.Handle,className:r,style:o={},children:a,color:s,minWidth:i=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:p,onResizeStart:h,onResize:v,onResizeEnd:g}){const y=Th(),x=typeof e=="string"?e:y,S=ye(),E=d.useRef(null),w=n===Mn.Line?"right":"bottom-right",C=t??w,_=d.useRef(null);d.useEffect(()=>{if(!(!E.current||!x))return _.current||(_.current=BN({domNode:E.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:j,transform:k,snapGrid:R,snapToGrid:D,nodeOrigin:b}=S.getState();return{nodeLookup:j,transform:k,snapGrid:R,snapToGrid:D,nodeOrigin:b}},onChange:(j,k)=>{const{triggerNodeChanges:R,nodeLookup:D,parentLookup:b,nodeOrigin:I}=S.getState(),P=[],L={x:j.x,y:j.y},$=D.get(x);if($&&$.expandParent&&$.parentId){const M=$.origin??I,V=j.width??$.measured.width,G=j.height??$.measured.height,O={id:$.id,parentId:$.parentId,rect:{width:V,height:G,...Xp({x:j.x??$.position.x,y:j.y??$.position.y},{width:V,height:G},$.parentId,D,M)}},H=Ec([O],D,b,I);P.push(...H),L.x=j.x?Math.max(M[0]*V,j.x):void 0,L.y=j.y?Math.max(M[1]*G,j.y):void 0}if(L.x!==void 0&&L.y!==void 0){const M={id:x,type:"position",position:{...L}};P.push(M)}if(j.width!==void 0&&j.height!==void 0){const M={id:x,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:j.width,height:j.height}};P.push(M)}for(const M of k){const V={...M,type:"position"};P.push(V)}R(P)},onEnd:()=>{const j={id:x,type:"dimensions",resizing:!1};S.getState().triggerNodeChanges([j])}})),_.current.update({controlPosition:C,boundaries:{minWidth:i,minHeight:u,maxWidth:c,maxHeight:m},keepAspectRatio:f,onResizeStart:h,onResize:v,onResizeEnd:g,shouldResize:p}),()=>{var j;(j=_.current)==null||j.destroy()}},[C,i,u,c,m,f,h,v,g,p]);const N=C.split("-"),T=n===Mn.Line?"borderColor":"backgroundColor",A=s?{...o,[T]:s}:o;return l.jsx("div",{className:Ee(["react-flow__resize-control","nodrag",...N,n,r]),ref:E,style:A,children:a})}const Cu=d.memo(bA);function DI({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:a,color:s,minWidth:i=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:p,onResizeStart:h,onResize:v,onResizeEnd:g}){return t?l.jsxs(l.Fragment,{children:[IN.map(y=>l.jsx(Cu,{className:o,style:a,nodeId:e,position:y,variant:Mn.Line,color:s,minWidth:i,minHeight:u,maxWidth:c,maxHeight:m,onResizeStart:h,keepAspectRatio:f,shouldResize:p,onResize:v,onResizeEnd:g},y)),MN.map(y=>l.jsx(Cu,{className:n,style:r,nodeId:e,position:y,color:s,minWidth:i,minHeight:u,maxWidth:c,maxHeight:m,onResizeStart:h,keepAspectRatio:f,shouldResize:p,onResize:v,onResizeEnd:g},y))]}):null}function wA(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}const EA=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function St(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function Xo(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function SA(e){const t=Xo(e,"border-left-width"),n=Xo(e,"border-right-width");return e.clientWidth+t+n}function CA(e){const t=Xo(e,"border-top-width"),n=Xo(e,"border-bottom-width");return e.clientHeight+t+n}function Qh(e,t={}){const n=t.width||SA(e),r=t.height||CA(e);return{width:n,height:r}}function _A(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Oe=16384;function NA(e){(e.width>Oe||e.height>Oe)&&(e.width>Oe&&e.height>Oe?e.width>e.height?(e.height*=Oe/e.width,e.width=Oe):(e.width*=Oe/e.height,e.height=Oe):e.width>Oe?(e.height*=Oe/e.width,e.width=Oe):(e.width*=Oe/e.height,e.height=Oe))}function Yo(e){return new Promise((t,n)=>{const r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function TA(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function RA(e,t,n){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${t}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${t} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),o.appendChild(a),a.appendChild(e),TA(o)}const Ie=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Ie(n,t)};function AA(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function DA(e){return St(e).map(t=>{const n=e.getPropertyValue(t),r=e.getPropertyPriority(t);return`${t}: ${n}${r?" !important":""};`}).join(" ")}function PA(e,t,n){const r=`.${e}:${t}`,o=n.cssText?AA(n):DA(n);return document.createTextNode(`${r}{${o}}`)}function _u(e,t,n){const r=window.getComputedStyle(e,n),o=r.getPropertyValue("content");if(o===""||o==="none")return;const a=EA();try{t.className=`${t.className} ${a}`}catch{return}const s=document.createElement("style");s.appendChild(PA(a,n,r)),t.appendChild(s)}function jA(e,t){_u(e,t,":before"),_u(e,t,":after")}const Nu="application/font-woff",Tu="image/jpeg",MA={woff:Nu,woff2:Nu,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Tu,jpeg:Tu,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function IA(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function _c(e){const t=IA(e).toLowerCase();return MA[t]||""}function kA(e){return e.split(/,/)[1]}function Ei(e){return e.search(/^(data:)/)!==-1}function $A(e,t){return`data:${t};base64,${e}`}async function Zh(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise((a,s)=>{const i=new FileReader;i.onerror=s,i.onloadend=()=>{try{a(n({res:r,result:i.result}))}catch(u){s(u)}},i.readAsDataURL(o)})}const Ts={};function OA(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function Nc(e,t,n){const r=OA(e,t,n.includeQueryParams);if(Ts[r]!=null)return Ts[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const a=await Zh(e,n.fetchRequestInit,({res:s,result:i})=>(t||(t=s.headers.get("Content-Type")||""),kA(i)));o=$A(a,t)}catch(a){o=n.imagePlaceholder||"";let s=`Failed to fetch resource: ${e}`;a&&(s=typeof a=="string"?a:a.message),s&&console.warn(s)}return Ts[r]=o,o}async function LA(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Yo(t)}async function FA(e,t){if(e.currentSrc){const a=document.createElement("canvas"),s=a.getContext("2d");a.width=e.clientWidth,a.height=e.clientHeight,s==null||s.drawImage(e,0,0,a.width,a.height);const i=a.toDataURL();return Yo(i)}const n=e.poster,r=_c(n),o=await Nc(n,r,t);return Yo(o)}async function HA(e){var t;try{if(!((t=e==null?void 0:e.contentDocument)===null||t===void 0)&&t.body)return await La(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}async function BA(e,t){return Ie(e,HTMLCanvasElement)?LA(e):Ie(e,HTMLVideoElement)?FA(e,t):Ie(e,HTMLIFrameElement)?HA(e):e.cloneNode(!1)}const VA=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function zA(e,t,n){var r,o;let a=[];return VA(e)&&e.assignedNodes?a=St(e.assignedNodes()):Ie(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?a=St(e.contentDocument.body.childNodes):a=St(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),a.length===0||Ie(e,HTMLVideoElement)||await a.reduce((s,i)=>s.then(()=>La(i,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function UA(e,t){const n=t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):St(r).forEach(o=>{let a=r.getPropertyValue(o);o==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),Ie(e,HTMLIFrameElement)&&o==="display"&&a==="inline"&&(a="block"),o==="d"&&t.getAttribute("d")&&(a=`path(${t.getAttribute("d")})`),n.setProperty(o,a,r.getPropertyPriority(o))})}function GA(e,t){Ie(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Ie(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function WA(e,t){if(Ie(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(o=>e.value===o.getAttribute("value"));r&&r.setAttribute("selected","")}}function KA(e,t){return Ie(t,Element)&&(UA(e,t),jA(e,t),GA(e,t),WA(e,t)),t}async function XA(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let a=0;a<n.length;a++){const i=n[a].getAttribute("xlink:href");if(i){const u=e.querySelector(i),c=document.querySelector(i);!u&&c&&!r[i]&&(r[i]=await La(c,t,!0))}}const o=Object.values(r);if(o.length){const a="http://www.w3.org/1999/xhtml",s=document.createElementNS(a,"svg");s.setAttribute("xmlns",a),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const i=document.createElementNS(a,"defs");s.appendChild(i);for(let u=0;u<o.length;u++)i.appendChild(o[u]);e.appendChild(s)}return e}async function La(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>BA(r,t)).then(r=>zA(e,r,t)).then(r=>KA(e,r)).then(r=>XA(r,t))}const Jh=/url\((['"]?)([^'"]+?)\1\)/g,YA=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,qA=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function QA(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function ZA(e){const t=[];return e.replace(Jh,(n,r,o)=>(t.push(o),n)),t.filter(n=>!Ei(n))}async function JA(e,t,n,r,o){try{const a=n?wA(t,n):t,s=_c(t);let i;return o||(i=await Nc(a,s,r)),e.replace(QA(t),`$1${i}$3`)}catch{}return e}function eD(e,{preferredFontFormat:t}){return t?e.replace(qA,n=>{for(;;){const[r,,o]=YA.exec(n)||[];if(!o)return"";if(o===t)return`src: ${r};`}}):e}function eg(e){return e.search(Jh)!==-1}async function tg(e,t,n){if(!eg(e))return e;const r=eD(e,n);return ZA(r).reduce((a,s)=>a.then(i=>JA(i,s,t,n)),Promise.resolve(r))}async function bo(e,t,n){var r;const o=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(o){const a=await tg(o,null,n);return t.style.setProperty(e,a,t.style.getPropertyPriority(e)),!0}return!1}async function tD(e,t){await bo("background",e,t)||await bo("background-image",e,t),await bo("mask",e,t)||await bo("mask-image",e,t)}async function nD(e,t){const n=Ie(e,HTMLImageElement);if(!(n&&!Ei(e.src))&&!(Ie(e,SVGImageElement)&&!Ei(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,o=await Nc(r,_c(r),t);await new Promise((a,s)=>{e.onload=a,e.onerror=s;const i=e;i.decode&&(i.decode=a),i.loading==="lazy"&&(i.loading="eager"),n?(e.srcset="",e.src=o):e.href.baseVal=o})}async function rD(e,t){const r=St(e.childNodes).map(o=>ng(o,t));await Promise.all(r).then(()=>e)}async function ng(e,t){Ie(e,Element)&&(await tD(e,t),await nD(e,t),await rD(e,t))}function oD(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(o=>{n[o]=r[o]}),e}const Ru={};async function Au(e){let t=Ru[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},Ru[e]=t,t}async function Du(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let i=s.replace(r,"$1");return i.startsWith("https://")||(i=new URL(i,e.url).href),Zh(i,t.fetchRequestInit,({result:u})=>(n=n.replace(s,`url(${u})`),[s,u]))});return Promise.all(a).then(()=>n)}function Pu(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=o.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(o,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",i=new RegExp(s,"gi");for(;;){let u=a.exec(r);if(u===null){if(u=i.exec(r),u===null)break;a.lastIndex=i.lastIndex}else i.lastIndex=a.lastIndex;t.push(u[0])}return t}async function aD(e,t){const n=[],r=[];return e.forEach(o=>{if("cssRules"in o)try{St(o.cssRules||[]).forEach((a,s)=>{if(a.type===CSSRule.IMPORT_RULE){let i=s+1;const u=a.href,c=Au(u).then(m=>Du(m,t)).then(m=>Pu(m).forEach(f=>{try{o.insertRule(f,f.startsWith("@import")?i+=1:o.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:f,error:p})}})).catch(m=>{console.error("Error loading remote css",m.toString())});r.push(c)}})}catch(a){const s=e.find(i=>i.href==null)||document.styleSheets[0];o.href!=null&&r.push(Au(o.href).then(i=>Du(i,t)).then(i=>Pu(i).forEach(u=>{s.insertRule(u,o.cssRules.length)})).catch(i=>{console.error("Error loading remote stylesheet",i)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(e.forEach(o=>{if("cssRules"in o)try{St(o.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${o.href}`,a)}}),n))}function sD(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>eg(t.style.getPropertyValue("src")))}async function iD(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=St(e.ownerDocument.styleSheets),r=await aD(n,t);return sD(r)}async function cD(e,t){const n=await iD(e,t);return(await Promise.all(n.map(o=>{const a=o.parentStyleSheet?o.parentStyleSheet.href:null;return tg(o.cssText,a,t)}))).join(`
`)}async function lD(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await cD(e,t);if(n){const r=document.createElement("style"),o=document.createTextNode(n);r.appendChild(o),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function rg(e,t={}){const{width:n,height:r}=Qh(e,t),o=await La(e,t,!0);return await lD(o,t),await ng(o,t),oD(o,t),await RA(o,n,r)}async function og(e,t={}){const{width:n,height:r}=Qh(e,t),o=await rg(e,t),a=await Yo(o),s=document.createElement("canvas"),i=s.getContext("2d"),u=t.pixelRatio||_A(),c=t.canvasWidth||n,m=t.canvasHeight||r;return s.width=c*u,s.height=m*u,t.skipAutoScale||NA(s),s.style.width=`${c}`,s.style.height=`${m}`,t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,s.width,s.height)),i.drawImage(a,0,0,s.width,s.height),s}async function uD(e,t={}){return(await og(e,t)).toDataURL()}async function dD(e,t={}){return(await og(e,t)).toDataURL("image/jpeg",t.quality||1)}const fD=({children:e})=>{const{hideLoader:t,showLoader:n}=Bm(),{setNodes:r,getViewport:o}=qn(),{diagramName:a}=ze(),s=d.useCallback((c,m)=>{const f=document.createElement("a");f.setAttribute("download",`${a}.${m}`),f.setAttribute("href",c),f.click()},[a]),i=d.useMemo(()=>({jpeg:dD,png:uD,svg:rg}),[]),u=d.useCallback(async(c,m=1)=>{var v;n({animated:!1}),r(g=>g.map(y=>({...y,selected:!1})));const f=o(),p=(v=document.querySelector(".react-flow"))==null?void 0:v.getBoundingClientRect();if(!p){console.error("Could not find React Flow container"),t();return}const h=i[c];setTimeout(async()=>{const g=await h(window.document.querySelector(".react-flow__viewport"),{...c==="jpeg"||c==="png"?{backgroundColor:"#ffffff"}:{},width:p.width,height:p.height,style:{width:`${p.width}px`,height:`${p.height}px`,transform:`translate(${f.x}px, ${f.y}px) scale(${f.zoom})`},quality:1,pixelRatio:m});s(g,c),t()},0)},[s,o,t,i,r,n]);return l.jsx(Qf.Provider,{value:{exportImage:u},children:e})},PI=(e,t)=>!t||!e.schema||t.includes($n(e.schema)),ag=(e,t)=>{if(!t)return"";let n;return e===te.SQL_SERVER?n=xy(t):n=yy(t),n},mD=({tableInfos:e,columns:t,indexes:n,primaryKeys:r,views:o,databaseType:a})=>e.map(s=>{const i=qt(s.schema),u=new Map;t.filter(x=>qt(x.schema)===i&&x.table===s.table).forEach(x=>{u.has(x.name)||u.set(x.name,x)});const c=Array.from(u.values()).sort((x,S)=>x.ordinal_position-S.ordinal_position),m=r.filter(x=>x.table===s.table&&qt(x.schema)===i).map(x=>x.column.trim()),p=n.filter(x=>{const S=qt(x.schema);return x.table===s.table&&S===i}).reduce((x,S)=>{const E=`${S.schema}_${S.name}`;return x[E]?x[E].columns.push({name:S.column,position:S.column_position}):x[E]={...S,columns:[{name:S.column,position:S.column_position}]},x},{}),h=c.map(x=>{var S,E;return{id:st(),name:x.name,type:{id:x.type.split(" ").join("_").toLowerCase(),name:x.type.toLowerCase()},primaryKey:m.includes(x.name),unique:Object.values(p).some(w=>w.unique&&w.columns.length===1&&w.columns[0].name===x.name),nullable:x.nullable,...x.character_maximum_length&&x.character_maximum_length!=="null"?{character_maximum_length:x.character_maximum_length}:{},...(S=x.precision)!=null&&S.precision?{precision:x.precision.precision}:{},...(E=x.precision)!=null&&E.scale?{scale:x.precision.scale}:{},...x.default?{default:x.default}:{},...x.collation?{collation:x.collation}:{},createdAt:Date.now(),comments:x.comment?x.comment:void 0}}),v=Object.values(p).map(x=>({id:st(),name:x.name,unique:x.unique,fieldIds:x.columns.sort((S,E)=>S.position-E.position).map(S=>{var E;return(E=h.find(w=>w.name===S.name))==null?void 0:E.id}).filter(S=>S!==void 0),createdAt:Date.now()})),g=o.some(x=>qt(x.schema)===i&&x.view_name===s.table),y=o.some(x=>x.view_name===s.table&&ag(a,x.view_definition).toLowerCase().includes("materialized"));return{id:st(),name:s.table,schema:i,x:Math.random()*1e3,y:Math.random()*800,fields:h,indexes:v,color:y?Ay:g?Dy:ad(),isView:g,isMaterializedView:y,createdAt:Date.now(),comments:s.comment?s.comment:void 0}}),pD=({relationships:e,tables:t,mode:n="all"})=>{const r=Vs(t),o=Vs(e),a=s=>{const h=new Map;o.forEach(w=>{h.has(w.sourceTableId)||h.set(w.sourceTableId,new Set),h.has(w.targetTableId)||h.set(w.targetTableId,new Set),h.get(w.sourceTableId).add(w.targetTableId),h.get(w.targetTableId).add(w.sourceTableId)});const v=[...s].sort((w,C)=>{var _,N;return(((_=h.get(C.id))==null?void 0:_.size)||0)-(((N=h.get(w.id))==null?void 0:N.size)||0)}),g=new Set,y=new Map,x=(w,C,_)=>{for(const[N,T]of y)if(N!==_&&Math.abs(w-T.x)<300&&Math.abs(C-T.y)<400)return!0;return!1},S=(w,C,_)=>{const N=Math.max(200,300)/2;let T=0,A=0,j=0;const k=1e3;for(;j<k;){const R=w+A*Math.cos(T),D=C+A*Math.sin(T);if(!x(R,D,_))return{x:R,y:D};T+=Math.PI/4,T>=2*Math.PI&&(T=0,A+=N),j++}return{x:w+A*Math.cos(T),y:C+A*Math.sin(T)}},E=(w,C,_)=>{if(g.has(w.id))return;const{x:N,y:T}=S(C,_,w.id);w.x=N,w.y=T,y.set(w.id,{x:w.x,y:w.y}),g.add(w.id);const A=h.get(w.id)||new Set;let j=0;const k=2*Math.PI/A.size;A.forEach(R=>{if(!g.has(R)){const D=s.find(b=>b.id===R);if(D){const b=N+Math.cos(j)*400,I=T+Math.sin(j)*(300+100*2);E(D,b,I),j+=k}}})};v.forEach((w,C)=>{if(!g.has(w.id)){const _=Math.floor(C/6),T=100+C%6*(200+100*2),A=100+_*(300+100*2);E(w,T,A)}}),s.forEach(w=>{const C=y.get(w.id);C&&(w.x=C.x,w.y=C.y)})};if(n==="perSchema"){const s=r.reduce((i,u)=>{const c=u.schema||"default";return i[c]||(i[c]=[]),i[c].push(u),i},{});Object.values(s).forEach(a)}else a(r);return r},jI=(e,t)=>!t||!e.schema||!e.dependentSchema||t.includes($n(e.schema))&&t.includes($n(e.dependentSchema)),hD={[te.POSTGRESQL]:"postgresql",[te.MYSQL]:"postgresql",[te.MARIADB]:"postgresql",[te.GENERIC]:"postgresql",[te.SQLITE]:"postgresql",[te.SQL_SERVER]:"postgresql"},gD=async({views:e,tables:t,databaseType:n})=>{const{Parser:r}=await rn(async()=>{const{Parser:s}=await import("./index-q52rhXgr.js").then(i=>i.i);return{Parser:s}},__vite__mapDeps([0,1,2])),o=new r;return e.flatMap(s=>{const i=qt(s.schema),u=t.find(c=>c.name===s.view_name&&i===c.schema);if(!u)return console.warn(`Source table for view ${s.view_name} not found (schema: ${i})`),[];if(s.view_definition)try{const c=ag(n,s.view_definition);let m="";n===te.MYSQL||n===te.MARIADB?m=bD(c):n===te.SQL_SERVER?m=yD(c):m=xD(c);const f=o.astify(m,{database:hD[n],type:"select"});let p=ED(f);return p=vD(p),p.map(h=>{const v=h.schema||s.schema,g=h.tableName,y=t.find(x=>x.name===g&&(x.schema||"")===v);return y?{id:st(),schema:s.schema,tableId:y.id,dependentSchema:y.schema,dependentTableId:u.id,createdAt:Date.now()}:(console.warn(`Dependent table ${v}.${g} not found for view ${s.schema}.${s.view_name}`),null)})}catch(c){return console.error(`Error parsing view ${s.schema}.${s.view_name}:`,c),[]}else return console.warn(`View definition missing for ${s.schema}.${s.view_name}`),[]}).filter(s=>s!==null)};function vD(e){const t=new Map;for(const n of e){const r=n.tableName,o=t.get(r);(!o||n.schema&&!o.schema)&&t.set(r,n)}return Array.from(t.values())}function xD(e){if(!e)return"";e=e.replace(/\s+/g," ").trim(),e=e.replace(/\\"/g,'"'),e=e.replace(/CREATE\s+MATERIALIZED\s+VIEW/i,"CREATE VIEW");const t=/CREATE\s+VIEW\s+(?:(?:`[^`]+`|"[^"]+"|\w+)\.)?(?:`([^`]+)`|"([^"]+)"|(\w+))[\s\S]*?\bAS\b\s+/i,n=e.match(t);let r;if(n){const o=n[1]||n[2]||n[3];let s=e.substring(n.index+n[0].length).replace(/"(\w+)"/g,"$1");s=s.replace(/\(([^()]+)\)::(\w+)/g,"CAST($1 AS $2)"),s=s.replace(/\bSETTINGS\b[\s\S]*$/i,""),r=`CREATE VIEW ${o} AS ${s}`}else console.warn("Could not preprocess view definition:",e),r=e;return r}function yD(e){if(!e)return"";e=e.replace(/^\uFEFF/,""),e=e.replace(/\s+/g," ").trim(),e=e.replace(/\[([^\]]+)\]/g,'"$1"'),e=e.replace(/"([a-zA-Z0-9_]+)"\."([a-zA-Z0-9_]+)"\."([a-zA-Z0-9_]+)"/g,'"$2"."$3"'),e=e.replace(/\bGETDATE\(\)/gi,"NOW()"),e=e.replace(/\bISNULL\(/gi,"COALESCE(");const t=e.match(/SELECT\s+TOP\s+(\d+)/i);if(t){const a=t[1];e=e.replace(/SELECT\s+TOP\s+\d+/i,"SELECT"),e=e.replace(/;+\s*$/,""),e+=` LIMIT ${a}`}e=e.replace(/\n/g,"");const n=/CREATE\s+VIEW\s+(?:"?([^".\s]+)"?\.)?"?([^".\s]+)"?\s+AS\s+/i,r=e.match(n);let o;if(r){const a=r[2],i=e.substring(r.index+r[0].length).replace(/;+\s*$/,"");o=`CREATE VIEW "${a}" AS ${i}`}else console.warn("Could not preprocess view definition:",e),o=e;return o}function bD(e){return e?(e=e.replace(/;\s*$/,""),e=e.replace(/`/g,""),e=wD(e),e):""}function wD(e){const t=[/\(\s*(JOIN\s+[^()]+?)\s*\)/gi,/\(\s*(ON\s+[^()]+?)\s*\)/gi];let n;do n=e,t.forEach(r=>{e=e.replace(r,"$1")});while(e!==n);return e}function ED(e){const t=new Map,n=new Set;function r(o){if(!(!o||n.has(o))){if(n.add(o),Array.isArray(o))o.forEach(r);else if(typeof o=="object"){if(Object.hasOwnProperty.call(o,"table")&&typeof o.table=="string"){let a=o.db||o.schema;const s=o.table;if(s){a=qt(a)||"";const i=`${a}.${s}`;t.has(i)||t.set(i,{schema:a,tableName:s})}}for(const a in o)Object.hasOwnProperty.call(o,a)&&r(o[a])}}}return r(e),Array.from(t.values())}const sg=async({databaseType:e,databaseMetadata:t,diagramNumber:n,databaseEdition:r})=>{const{tables:o,pk_info:a,columns:s,indexes:i,fk_info:u,views:c}=t,m=mD({tableInfos:o,columns:s,indexes:i,primaryKeys:a,views:c,databaseType:e}),f=Py({foreignKeys:u,tables:m}),p=await gD({views:c,tables:m,databaseType:e}),v=pD({tables:m,relationships:f,mode:"perSchema"}).sort((g,y)=>g.isView===y.isView?g.name.localeCompare(y.name):g.isView?1:-1);return{id:rd(),name:t.database_name?`${t.database_name}-db`:n?`Diagram ${n}`:"New Diagram",databaseType:e??te.GENERIC,databaseEdition:r,tables:v,relationships:f,dependencies:p,createdAt:new Date,updatedAt:new Date}},SD=e=>Array.isArray(e.fk_info)&&Array.isArray(e.pk_info)&&Array.isArray(e.columns)&&Array.isArray(e.indexes)&&Array.isArray(e.tables)&&Array.isArray(e.views);function ig(e){try{return JSON.parse(e)}catch(t){throw new Error(`Error parsing JSON data: ${t}`)}}function CD(e,t=[]){let n=[];function r(a,s){const i=d.createContext(s),u=n.length;n=[...n,s];function c(f){const{scope:p,children:h,...v}=f,g=(p==null?void 0:p[e][u])||i,y=d.useMemo(()=>v,Object.values(v));return l.jsx(g.Provider,{value:y,children:h})}function m(f,p){const h=(p==null?void 0:p[e][u])||i,v=d.useContext(h);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return c.displayName=a+"Provider",[c,m]}const o=()=>{const a=n.map(s=>d.createContext(s));return function(i){const u=(i==null?void 0:i[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return o.scopeName=e,[r,_D(o,...t)]}function _D(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const s=r.reduce((i,{useScope:u,scopeName:c})=>{const f=u(a)[`__scope${c}`];return{...i,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var ND="Toggle",Tc=d.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...a}=e,[s=!1,i]=Ze({prop:n,onChange:o,defaultProp:r});return l.jsx(le.button,{type:"button","aria-pressed":s,"data-state":s?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:Z(e.onClick,()=>{e.disabled||i(!s)})})});Tc.displayName=ND;var MI=Tc,Qn="ToggleGroup",[cg,II]=CD(Qn,[Bt]),lg=Bt(),Rc=W.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return l.jsx(TD,{...o,ref:t})}if(n==="multiple"){const o=r;return l.jsx(RD,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Qn}\``)});Rc.displayName=Qn;var[ug,dg]=cg(Qn),TD=W.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[s,i]=Ze({prop:n,defaultProp:r,onChange:o});return l.jsx(ug,{scope:e.__scopeToggleGroup,type:"single",value:s?[s]:[],onItemActivate:i,onItemDeactivate:W.useCallback(()=>i(""),[i]),children:l.jsx(fg,{...a,ref:t})})}),RD=W.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[s=[],i]=Ze({prop:n,defaultProp:r,onChange:o}),u=W.useCallback(m=>i((f=[])=>[...f,m]),[i]),c=W.useCallback(m=>i((f=[])=>f.filter(p=>p!==m)),[i]);return l.jsx(ug,{scope:e.__scopeToggleGroup,type:"multiple",value:s,onItemActivate:u,onItemDeactivate:c,children:l.jsx(fg,{...a,ref:t})})});Rc.displayName=Qn;var[AD,DD]=cg(Qn),fg=W.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:a,dir:s,loop:i=!0,...u}=e,c=lg(n),m=Xn(s),f={role:"group",dir:m,...u};return l.jsx(AD,{scope:n,rovingFocus:o,disabled:r,children:o?l.jsx(fa,{asChild:!0,...c,orientation:a,dir:m,loop:i,children:l.jsx(le.div,{...f,ref:t})}):l.jsx(le.div,{...f,ref:t})})}),qo="ToggleGroupItem",mg=W.forwardRef((e,t)=>{const n=dg(qo,e.__scopeToggleGroup),r=DD(qo,e.__scopeToggleGroup),o=lg(e.__scopeToggleGroup),a=n.value.includes(e.value),s=r.disabled||e.disabled,i={...e,pressed:a,disabled:s},u=W.useRef(null);return r.rovingFocus?l.jsx(ma,{asChild:!0,...o,focusable:!s,active:a,ref:u,children:l.jsx(ju,{...i,ref:t})}):l.jsx(ju,{...i,ref:t})});mg.displayName=qo;var ju=W.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,a=dg(qo,n),s={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},i=a.type==="single"?s:void 0;return l.jsx(Tc,{...i,...o,ref:t,onPressedChange:u=>{u?a.onItemActivate(r):a.onItemDeactivate(r)}})}),pg=Rc,hg=mg;const PD=Lr("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),gg=W.createContext({size:"default",variant:"default"}),Ac=W.forwardRef(({className:e,variant:t,size:n,children:r,...o},a)=>l.jsx(pg,{ref:a,className:ne("flex items-center justify-center gap-1",e),...o,children:l.jsx(gg.Provider,{value:{variant:t,size:n},children:r})}));Ac.displayName=pg.displayName;const Qo=W.forwardRef(({className:e,children:t,variant:n,size:r,...o},a)=>{const s=W.useContext(gg);return l.jsx(hg,{ref:a,className:ne(PD({variant:s.variant||n,size:s.size||r}),e),...o,children:t})});Qo.displayName=hg.displayName;const sr=({type:e})=>{const{effectiveTheme:t}=zs(),n=d.useMemo(()=>jy(e,t),[e,t]);return l.jsx(Qo,{value:e,"aria-label":"Toggle bold",className:"flex size-20 md:size-32",children:l.jsx("img",{src:n,alt:Pe[e]})})},vg=W.forwardRef(({className:e,children:t,...n},r)=>l.jsx("a",{ref:r,className:`text-pink-600 hover:underline ${e}`,...n,children:t}));vg.displayName="Link";const jD=()=>{const{t:e}=Te();return l.jsx(vg,{href:"/examples",className:"text-primary hover:text-primary",children:l.jsxs("div",{className:"flex size-20 cursor-pointer flex-col items-center rounded-md border py-3 text-center md:size-32",children:[l.jsx("div",{className:"flex flex-1 items-center",children:l.jsx(Gw,{size:34})}),l.jsxs("div",{className:"flex flex-col-reverse",children:[l.jsx("div",{className:"hidden text-sm text-primary md:flex",children:e("new_diagram_dialog.database_selection.check_examples_long")}),l.jsx("div",{className:"flex text-xs text-primary md:hidden",children:e("new_diagram_dialog.database_selection.check_examples_short")})]})]})})},MD=({databaseType:e,setDatabaseType:t,onContinue:n})=>l.jsx("div",{className:"flex flex-1 items-center justify-center",children:l.jsxs(Ac,{value:e,onValueChange:r=>{r?(t(r),n()):t(te.GENERIC)},type:"single",className:"grid grid-flow-row grid-cols-3 gap-6",children:[l.jsx(sr,{type:te.MYSQL}),l.jsx(sr,{type:te.POSTGRESQL}),l.jsx(sr,{type:te.MARIADB}),l.jsx(sr,{type:te.SQLITE}),l.jsx(sr,{type:te.SQL_SERVER}),l.jsx(jD,{})]})}),ID=({onContinue:e,databaseType:t,setDatabaseType:n,hasExistingDiagram:r,createNewDiagram:o})=>{const{t:a}=Te();return l.jsxs(l.Fragment,{children:[l.jsxs(Nt,{children:[l.jsx(ut,{children:a("new_diagram_dialog.database_selection.title")}),l.jsx(dt,{children:a("new_diagram_dialog.database_selection.description")})]}),l.jsx(MD,{databaseType:t,onContinue:e,setDatabaseType:n}),l.jsxs(Tt,{className:"mt-4 flex !justify-between gap-2",children:[r?l.jsx(ke,{asChild:!0,children:l.jsx(we,{type:"button",variant:"secondary",children:a("new_diagram_dialog.cancel")})}):l.jsx("div",{}),l.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end sm:space-x-2",children:[l.jsx(we,{type:"button",variant:"outline",onClick:o,children:a("new_diagram_dialog.empty_diagram")}),l.jsx(we,{type:"button",variant:"default",disabled:t===te.GENERIC,onClick:e,children:a("new_diagram_dialog.continue")})]})]})]})};var wn=(e=>(e.SELECT_DATABASE="SELECT_DATABASE",e.IMPORT_DATABASE="IMPORT_DATABASE",e))(wn||{});const kD=W.lazy(()=>rn(()=>import("./react-code-blocks.esm-D4XAcB0l.js"),__vite__mapDeps([3,1,2,4])).then(e=>({default:t=>l.jsx(e.CopyBlock,{...t,theme:e.atomOneDark})}))),Zo=W.memo(({className:e,codeProps:t,code:n,loading:r,language:o="sql"})=>l.jsx("div",{className:ne("flex flex-1 justify-center",e),children:r?l.jsx(Sr,{}):l.jsx(d.Suspense,{fallback:l.jsx(Sr,{}),children:l.jsx(kD,{language:o,text:n,customStyle:{display:"flex",flex:"1",fontSize:"14px",width:"100%"},...t})})}));Zo.displayName="CodeSnippet";const xg=W.forwardRef(({className:e,...t},n)=>l.jsx("textarea",{className:ne("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));xg.displayName="Textarea";var Dc="Avatar",[$D,kI]=ct(Dc),[OD,yg]=$D(Dc),bg=d.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=d.useState("idle");return l.jsx(OD,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:l.jsx(le.span,{...r,ref:t})})});bg.displayName=Dc;var wg="AvatarImage",Eg=d.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,s=yg(wg,n),i=LD(r,a.referrerPolicy),u=Ce(c=>{o(c),s.onImageLoadingStatusChange(c)});return Or(()=>{i!=="idle"&&u(i)},[i,u]),i==="loaded"?l.jsx(le.img,{...a,ref:t,src:r}):null});Eg.displayName=wg;var Sg="AvatarFallback",Cg=d.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=yg(Sg,n),[s,i]=d.useState(r===void 0);return d.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>i(!0),r);return()=>window.clearTimeout(u)}},[r]),s&&a.imageLoadingStatus!=="loaded"?l.jsx(le.span,{...o,ref:t}):null});Cg.displayName=Sg;function LD(e,t){const[n,r]=d.useState("idle");return Or(()=>{if(!e){r("error");return}let o=!0;const a=new window.Image,s=i=>()=>{o&&r(i)};return r("loading"),a.onload=s("loaded"),a.onerror=s("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var _g=bg,Ng=Eg,Tg=Cg;const Si=W.forwardRef(({className:e,...t},n)=>l.jsx(_g,{ref:n,className:ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Si.displayName=_g.displayName;const Ci=W.forwardRef(({className:e,...t},n)=>l.jsx(Ng,{ref:n,className:ne("aspect-square h-full w-full",e),...t}));Ci.displayName=Ng.displayName;const _i=W.forwardRef(({className:e,...t},n)=>l.jsx(Tg,{ref:n,className:ne("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));_i.displayName=Tg.displayName;var Rs,Pc="HoverCard",[Rg,$I]=ct(Pc,[Kn]),Fa=Kn(),[FD,jc]=Rg(Pc),Ag=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:o,onOpenChange:a,openDelay:s=700,closeDelay:i=300}=e,u=Fa(t),c=d.useRef(0),m=d.useRef(0),f=d.useRef(!1),p=d.useRef(!1),[h=!1,v]=Ze({prop:r,defaultProp:o,onChange:a}),g=d.useCallback(()=>{clearTimeout(m.current),c.current=window.setTimeout(()=>v(!0),s)},[s,v]),y=d.useCallback(()=>{clearTimeout(c.current),!f.current&&!p.current&&(m.current=window.setTimeout(()=>v(!1),i))},[i,v]),x=d.useCallback(()=>v(!1),[v]);return d.useEffect(()=>()=>{clearTimeout(c.current),clearTimeout(m.current)},[]),l.jsx(FD,{scope:t,open:h,onOpenChange:v,onOpen:g,onClose:y,onDismiss:x,hasSelectionRef:f,isPointerDownOnContentRef:p,children:l.jsx(aa,{...u,children:n})})};Ag.displayName=Pc;var Dg="HoverCardTrigger",Pg=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,o=jc(Dg,n),a=Fa(n);return l.jsx(ra,{asChild:!0,...a,children:l.jsx(le.a,{"data-state":o.open?"open":"closed",...r,ref:t,onPointerEnter:Z(e.onPointerEnter,ea(o.onOpen)),onPointerLeave:Z(e.onPointerLeave,ea(o.onClose)),onFocus:Z(e.onFocus,o.onOpen),onBlur:Z(e.onBlur,o.onClose),onTouchStart:Z(e.onTouchStart,s=>s.preventDefault())})})});Pg.displayName=Dg;var HD="HoverCardPortal",[OI,BD]=Rg(HD,{forceMount:void 0}),Jo="HoverCardContent",jg=d.forwardRef((e,t)=>{const n=BD(Jo,e.__scopeHoverCard),{forceMount:r=n.forceMount,...o}=e,a=jc(Jo,e.__scopeHoverCard);return l.jsx(Re,{present:r||a.open,children:l.jsx(VD,{"data-state":a.open?"open":"closed",...o,onPointerEnter:Z(e.onPointerEnter,ea(a.onOpen)),onPointerLeave:Z(e.onPointerLeave,ea(a.onClose)),ref:t})})});jg.displayName=Jo;var VD=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:s,...i}=e,u=jc(Jo,n),c=Fa(n),m=d.useRef(null),f=xe(t,m),[p,h]=d.useState(!1);return d.useEffect(()=>{if(p){const v=document.body;return Rs=v.style.userSelect||v.style.webkitUserSelect,v.style.userSelect="none",v.style.webkitUserSelect="none",()=>{v.style.userSelect=Rs,v.style.webkitUserSelect=Rs}}},[p]),d.useEffect(()=>{if(m.current){const v=()=>{h(!1),u.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var y;((y=document.getSelection())==null?void 0:y.toString())!==""&&(u.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",v),()=>{document.removeEventListener("pointerup",v),u.hasSelectionRef.current=!1,u.isPointerDownOnContentRef.current=!1}}},[u.isPointerDownOnContentRef,u.hasSelectionRef]),d.useEffect(()=>{m.current&&GD(m.current).forEach(g=>g.setAttribute("tabindex","-1"))}),l.jsx(oa,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:s,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:Z(a,v=>{v.preventDefault()}),onDismiss:u.onDismiss,children:l.jsx(Oi,{...c,...i,onPointerDown:Z(i.onPointerDown,v=>{v.currentTarget.contains(v.target)&&h(!0),u.hasSelectionRef.current=!1,u.isPointerDownOnContentRef.current=!0}),ref:f,style:{...i.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),zD="HoverCardArrow",UD=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,o=Fa(n);return l.jsx(Li,{...o,...r,ref:t})});UD.displayName=zD;function ea(e){return t=>t.pointerType==="touch"?void 0:e()}function GD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var WD=Ag,KD=Pg,Mg=jg;const XD=WD,YD=KD,Ig=W.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>l.jsx(Mg,{ref:o,align:t,sideOffset:n,className:ne("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Ig.displayName=Mg.displayName;const qD="/assets/ssms-instructions-vt0ia5R7.png",QD=ap,ZD=uc,kg=W.forwardRef(({className:e,...t},n)=>l.jsx(Gr,{ref:n,className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));kg.displayName=Gr.displayName;const JD=W.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(ZD,{children:[l.jsx(kg,{}),l.jsxs(Wr,{ref:r,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,l.jsxs(Yr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(An,{className:"size-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));JD.displayName=Wr.displayName;const eP=W.forwardRef(({className:e,...t},n)=>l.jsx(Kr,{ref:n,className:ne("text-lg font-semibold leading-none tracking-tight",e),...t}));eP.displayName=Kr.displayName;const tP=W.forwardRef(({className:e,...t},n)=>l.jsx(Xr,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));tP.displayName=Xr.displayName;const Ir=W.forwardRef((e,t)=>e.src?l.jsxs(lt,{children:[l.jsx(QD,{asChild:!0,ref:t,children:e.children?e.children:l.jsx("img",{...e})}),l.jsxs(tt,{className:"max-w-4xl border-0 bg-transparent p-0",children:[l.jsx(ut,{className:"hidden"}),l.jsx(dt,{className:"hidden"}),l.jsx("img",{src:e.src,alt:e.alt,className:"object-contain"})]})]}):null);Ir.displayName="ZoomableImage";const $g=W.forwardRef((e,t)=>{const[n,r]=W.useState(!1),{t:o}=Te();return l.jsxs(XD,{open:n,onOpenChange:a=>{r(a)},children:[l.jsx(YD,{ref:t,...e,asChild:!0,children:l.jsxs("div",{className:"flex flex-row items-center gap-1 text-pink-600",onClick:()=>{r(!n)},children:[l.jsx(Uw,{size:14}),l.jsx(mr,{className:"text-xs",children:o("new_diagram_dialog.import_database.ssms_instructions.button_text")})]})}),l.jsx(Ig,{className:"w-80",children:l.jsx("div",{className:"flex",children:l.jsxs("div",{className:"space-y-1",children:[l.jsx("h4",{className:"text-sm font-semibold",children:o("new_diagram_dialog.import_database.ssms_instructions.title")}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.jsx("span",{className:"font-semibold",children:"1. "}),o("new_diagram_dialog.import_database.ssms_instructions.step_1")]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.jsx("span",{className:"font-semibold",children:"2. "}),o("new_diagram_dialog.import_database.ssms_instructions.step_2")]}),l.jsx("div",{className:"flex items-center pt-2",children:l.jsx(Ir,{src:qD})})]})})})]})});$g.displayName="SSMSInfo";var Mc="Tabs",[nP,LI]=ct(Mc,[Bt]),Og=Bt(),[rP,Ic]=nP(Mc),Lg=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:s="horizontal",dir:i,activationMode:u="automatic",...c}=e,m=Xn(i),[f,p]=Ze({prop:r,onChange:o,defaultProp:a});return l.jsx(rP,{scope:n,baseId:Qe(),value:f,onValueChange:p,orientation:s,dir:m,activationMode:u,children:l.jsx(le.div,{dir:m,"data-orientation":s,...c,ref:t})})});Lg.displayName=Mc;var Fg="TabsList",Hg=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=Ic(Fg,n),s=Og(n);return l.jsx(fa,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(le.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});Hg.displayName=Fg;var Bg="TabsTrigger",Vg=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,s=Ic(Bg,n),i=Og(n),u=Gg(s.baseId,r),c=Wg(s.baseId,r),m=r===s.value;return l.jsx(ma,{asChild:!0,...i,focusable:!o,active:m,children:l.jsx(le.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":c,"data-state":m?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u,...a,ref:t,onMouseDown:Z(e.onMouseDown,f=>{!o&&f.button===0&&f.ctrlKey===!1?s.onValueChange(r):f.preventDefault()}),onKeyDown:Z(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&s.onValueChange(r)}),onFocus:Z(e.onFocus,()=>{const f=s.activationMode!=="manual";!m&&!o&&f&&s.onValueChange(r)})})})});Vg.displayName=Bg;var zg="TabsContent",Ug=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...s}=e,i=Ic(zg,n),u=Gg(i.baseId,r),c=Wg(i.baseId,r),m=r===i.value,f=d.useRef(m);return d.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),l.jsx(Re,{present:o||m,children:({present:p})=>l.jsx(le.div,{"data-state":m?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:c,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:p&&a})})});Ug.displayName=zg;function Gg(e,t){return`${e}-trigger-${t}`}function Wg(e,t){return`${e}-content-${t}`}var oP=Lg,Kg=Hg,Xg=Vg,Yg=Ug;const aP=oP,qg=d.forwardRef(({className:e,...t},n)=>l.jsx(Kg,{ref:n,className:ne("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));qg.displayName=Kg.displayName;const Ni=d.forwardRef(({className:e,...t},n)=>l.jsx(Xg,{ref:n,className:ne("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Ni.displayName=Xg.displayName;const sP=d.forwardRef(({className:e,...t},n)=>l.jsx(Yg,{ref:n,className:ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));sP.displayName=Yg.displayName;var iP=(e=>(e.POSTGRESQL_PSQL="psql",e))(iP||{});const cP={psql:"PSQL"},Mu={[te.POSTGRESQL]:["psql"],[te.MYSQL]:[],[te.SQLITE]:[],[te.GENERIC]:[],[te.SQL_SERVER]:[],[te.MARIADB]:[]},Iu="Invalid JSON. Please correct it or contact us at chartdb.io@gmail.com for help.",Qg=({setScriptResult:e,goBack:t,scriptResult:n,onImport:r,onCreateEmptyDiagram:o,databaseType:a,databaseEdition:s,setDatabaseEdition:i,keepDialogAfterImport:u,title:c})=>{const m=Mu[a],[f,p]=d.useState(""),[h,v]=d.useState(),{t:g}=Te(),[y,x]=d.useState(null),{isSm:S}=Yn("sm");d.useEffect(()=>{(async()=>{const{importMetadataScripts:A}=await rn(async()=>{const{importMetadataScripts:j}=await import("./scripts-CENl6Wp_.js");return{importMetadataScripts:j}},__vite__mapDeps([5,4,1,2]));x(A)})()},[]),d.useEffect(()=>{if(n.trim().length===0){p("");return}try{const T=JSON.parse(n);SD(T)?p(""):p(Iu)}catch{p(Iu)}},[n]);const E=d.useCallback(()=>{f.length===0&&n.trim().length!==0&&r()},[f.length,r,n]),w=d.useCallback(T=>{const A=T.target.value;e(A)},[e]),C=d.useCallback(()=>l.jsxs(Nt,{children:[l.jsx(ut,{children:c}),l.jsx(dt,{className:"hidden"})]}),[c]),_=d.useCallback(()=>{var T,A;return l.jsxs("div",{className:"flex w-full flex-1 flex-col gap-6",children:[vl[a].length>0?l.jsxs("div",{className:"flex flex-col gap-1 md:flex-row",children:[l.jsx("p",{className:"text-sm leading-6 text-muted-foreground",children:g("new_diagram_dialog.import_database.database_edition")}),l.jsxs(Ac,{type:"single",className:"ml-1 flex-wrap gap-2",value:s||"regular",onValueChange:j=>{i(j==="regular"?void 0:j)},children:[l.jsxs(Qo,{value:"regular",variant:"outline",className:"h-6 gap-1 p-0 px-2 shadow-none",children:[l.jsxs(Si,{className:"size-4 rounded-none",children:[l.jsx(Ci,{src:od[a],alt:"Regular"}),l.jsx(_i,{children:"Regular"})]}),"Regular"]}),vl[a].map(j=>l.jsxs(Qo,{value:j,variant:"outline",className:"h-6 gap-1 p-0 px-2 shadow-none",children:[l.jsxs(Si,{className:"size-4",children:[l.jsx(Ci,{src:sm[j],alt:No[j]}),l.jsx(_i,{children:No[j]})]}),No[j]]},j))]})]}):null,l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 text-sm text-muted-foreground md:flex-row md:justify-between",children:[l.jsxs("div",{children:["1. ",g("new_diagram_dialog.import_database.step_1")]}),a===te.SQL_SERVER&&l.jsx($g,{})]}),Mu[a].length>0?l.jsxs(aP,{value:h||"dbclient",onValueChange:j=>{v(j==="dbclient"?void 0:j)},children:[l.jsx("div",{className:"flex flex-1",children:l.jsxs(qg,{className:"h-8 justify-start rounded-none rounded-t-sm ",children:[l.jsx(Ni,{value:"dbclient",className:"h-6 w-20",children:"DB Client"}),(m==null?void 0:m.map(j=>l.jsx(Ni,{value:j,className:"h-6 !w-20",children:cP[j]},j)))??[]]})}),l.jsx(Zo,{className:"max-h-40 w-full",loading:!y,code:((T=y==null?void 0:y[a])==null?void 0:T.call(y,{databaseEdition:s,databaseClient:h}))??"",language:h?"bash":"sql"})]}):l.jsx(Zo,{className:"max-h-40 w-full",loading:!y,code:((A=y==null?void 0:y[a])==null?void 0:A.call(y,{databaseEdition:s}))??""})]}),l.jsxs("div",{className:"flex h-48 flex-col gap-1",children:[l.jsxs("p",{className:"text-sm text-muted-foreground",children:["2. ",g("new_diagram_dialog.import_database.step_2")]}),l.jsx(xg,{className:"w-full flex-1 rounded-md bg-muted p-2 text-sm",placeholder:g("new_diagram_dialog.import_database.script_results_placeholder"),value:n,onChange:w}),f&&l.jsx("p",{className:"mt-2 text-sm text-red-700",children:f})]})]})},[s,a,f,w,n,i,m,h,y,g]),N=d.useCallback(()=>l.jsxs(Tt,{className:"mt-4 flex !justify-between gap-2",children:[l.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",children:[t&&l.jsx(we,{type:"button",variant:"secondary",onClick:t,children:g("new_diagram_dialog.back")}),S?l.jsx(Ir,{src:"/load-new-db-instructions.gif",children:l.jsx(we,{type:"button",variant:"link",children:g("new_diagram_dialog.import_database.instructions_link")})}):null]}),l.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end sm:space-x-2",children:[o&&l.jsx(ke,{asChild:!0,children:l.jsx(we,{type:"button",variant:"outline",onClick:o,children:g("new_diagram_dialog.empty_diagram")})}),u?l.jsx(we,{type:"button",variant:"default",disabled:n.trim().length===0||f.length>0,onClick:E,children:g("new_diagram_dialog.import")}):l.jsx(ke,{asChild:!0,children:l.jsx(we,{type:"button",variant:"default",disabled:n.trim().length===0||f.length>0,onClick:E,children:g("new_diagram_dialog.import")})}),S?null:l.jsx(Ir,{src:"/load-new-db-instructions.gif",children:l.jsx(we,{type:"button",variant:"link",children:g("new_diagram_dialog.import_database.instructions_link")})})]})]}),[E,S,u,o,f.length,n,t,g]);return l.jsxs(l.Fragment,{children:[C(),_(),N()]})},lP=({dialog:e})=>{const{diagramId:t}=ze(),{t:n}=Te(),[r,o]=d.useState(te.GENERIC),{closeCreateDiagramDialog:a}=Ue(),{updateConfig:s}=Ur(),[i,u]=d.useState(""),[c,m]=d.useState(),[f,p]=d.useState(wn.SELECT_DATABASE),{listDiagrams:h,addDiagram:v}=ca(),[g,y]=d.useState(1),x=sa();d.useEffect(()=>{(async()=>{const _=await h();y(_.length+1)})()},[h,y,e.open]),d.useEffect(()=>{p(wn.SELECT_DATABASE),o(te.GENERIC),m(void 0),u("")},[e.open]);const S=(t??"").trim().length!==0,E=d.useCallback(async()=>{const C=ig(i),_=await sg({databaseType:r,databaseMetadata:C,diagramNumber:g,databaseEdition:(c==null?void 0:c.trim().length)===0?void 0:c});await v({diagram:_}),await s({defaultDiagramId:_.id}),a(),x(`/diagrams/${_.id}`)},[r,v,c,a,x,s,i,g]),w=d.useCallback(async()=>{const C={id:rd(),name:`Diagram ${g}`,databaseType:r??te.GENERIC,databaseEdition:(c==null?void 0:c.trim().length)===0?void 0:c,createdAt:new Date,updatedAt:new Date};await v({diagram:C}),await s({defaultDiagramId:C.id}),a(),x(`/diagrams/${C.id}`)},[r,v,c,a,x,s,g]);return l.jsx(lt,{...e,onOpenChange:C=>{S&&(C||a())},children:l.jsx(tt,{className:"flex max-h-[90vh] w-[90vw] max-w-[90vw] flex-col overflow-y-auto md:overflow-visible lg:max-w-[60vw] xl:lg:max-w-lg xl:min-w-[45vw]",showClose:S,children:f===wn.SELECT_DATABASE?l.jsx(ID,{createNewDiagram:w,databaseType:r,hasExistingDiagram:S,setDatabaseType:o,onContinue:()=>p(wn.IMPORT_DATABASE)}):l.jsx(Qg,{onImport:E,onCreateEmptyDiagram:w,databaseEdition:c,databaseType:r,scriptResult:i,setDatabaseEdition:m,goBack:()=>p(wn.SELECT_DATABASE),setScriptResult:u,title:n("new_diagram_dialog.import_database.title")})})})};function uP(e,[t,n]){return Math.min(n,Math.max(t,e))}function dP(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var kc="ScrollArea",[Zg,FI]=ct(kc),[fP,Ge]=Zg(kc),Jg=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:a=600,...s}=e,[i,u]=d.useState(null),[c,m]=d.useState(null),[f,p]=d.useState(null),[h,v]=d.useState(null),[g,y]=d.useState(null),[x,S]=d.useState(0),[E,w]=d.useState(0),[C,_]=d.useState(!1),[N,T]=d.useState(!1),A=xe(t,k=>u(k)),j=Xn(o);return l.jsx(fP,{scope:n,type:r,dir:j,scrollHideDelay:a,scrollArea:i,viewport:c,onViewportChange:m,content:f,onContentChange:p,scrollbarX:h,onScrollbarXChange:v,scrollbarXEnabled:C,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:N,onScrollbarYEnabledChange:T,onCornerWidthChange:S,onCornerHeightChange:w,children:l.jsx(le.div,{dir:j,...s,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});Jg.displayName=kc;var ev="ScrollAreaViewport",tv=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:o,nonce:a,...s}=e,i=Ge(ev,n),u=d.useRef(null),c=xe(t,u,i.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),l.jsx(le.div,{"data-radix-scroll-area-viewport":"",...s,asChild:o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:EP({asChild:o,children:r},m=>l.jsx("div",{"data-radix-scroll-area-content":"",ref:i.onContentChange,style:{minWidth:i.scrollbarXEnabled?"fit-content":void 0},children:m}))})]})});tv.displayName=ev;var mt="ScrollAreaScrollbar",$c=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Ge(mt,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:s}=o,i=e.orientation==="horizontal";return d.useEffect(()=>(i?a(!0):s(!0),()=>{i?a(!1):s(!1)}),[i,a,s]),o.type==="hover"?l.jsx(mP,{...r,ref:t,forceMount:n}):o.type==="scroll"?l.jsx(pP,{...r,ref:t,forceMount:n}):o.type==="auto"?l.jsx(nv,{...r,ref:t,forceMount:n}):o.type==="always"?l.jsx(Oc,{...r,ref:t}):null});$c.displayName=mt;var mP=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Ge(mt,e.__scopeScrollArea),[a,s]=d.useState(!1);return d.useEffect(()=>{const i=o.scrollArea;let u=0;if(i){const c=()=>{window.clearTimeout(u),s(!0)},m=()=>{u=window.setTimeout(()=>s(!1),o.scrollHideDelay)};return i.addEventListener("pointerenter",c),i.addEventListener("pointerleave",m),()=>{window.clearTimeout(u),i.removeEventListener("pointerenter",c),i.removeEventListener("pointerleave",m)}}},[o.scrollArea,o.scrollHideDelay]),l.jsx(Re,{present:n||a,children:l.jsx(nv,{"data-state":a?"visible":"hidden",...r,ref:t})})}),pP=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Ge(mt,e.__scopeScrollArea),a=e.orientation==="horizontal",s=Ba(()=>u("SCROLL_END"),100),[i,u]=dP("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(i==="idle"){const c=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[i,o.scrollHideDelay,u]),d.useEffect(()=>{const c=o.viewport,m=a?"scrollLeft":"scrollTop";if(c){let f=c[m];const p=()=>{const h=c[m];f!==h&&(u("SCROLL"),s()),f=h};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[o.viewport,a,u,s]),l.jsx(Re,{present:n||i!=="hidden",children:l.jsx(Oc,{"data-state":i==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Z(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Z(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),nv=d.forwardRef((e,t)=>{const n=Ge(mt,e.__scopeScrollArea),{forceMount:r,...o}=e,[a,s]=d.useState(!1),i=e.orientation==="horizontal",u=Ba(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;s(i?c:m)}},10);return Gn(n.viewport,u),Gn(n.content,u),l.jsx(Re,{present:r||a,children:l.jsx(Oc,{"data-state":a?"visible":"hidden",...o,ref:t})})}),Oc=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=Ge(mt,e.__scopeScrollArea),a=d.useRef(null),s=d.useRef(0),[i,u]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=iv(i.viewport,i.content),m={...r,sizes:i,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:p=>s.current=p};function f(p,h){return bP(p,s.current,i,h)}return n==="horizontal"?l.jsx(hP,{...m,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const p=o.viewport.scrollLeft,h=ku(p,i,o.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollLeft=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollLeft=f(p,o.dir))}}):n==="vertical"?l.jsx(gP,{...m,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const p=o.viewport.scrollTop,h=ku(p,i);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollTop=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollTop=f(p))}}):null}),hP=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,a=Ge(mt,e.__scopeScrollArea),[s,i]=d.useState(),u=d.useRef(null),c=xe(t,u,a.onScrollbarXChange);return d.useEffect(()=>{u.current&&i(getComputedStyle(u.current))},[u]),l.jsx(ov,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ha(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(a.viewport){const p=a.viewport.scrollLeft+m.deltaX;e.onWheelScroll(p),lv(p,f)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&s&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:na(s.paddingLeft),paddingEnd:na(s.paddingRight)}})}})}),gP=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,a=Ge(mt,e.__scopeScrollArea),[s,i]=d.useState(),u=d.useRef(null),c=xe(t,u,a.onScrollbarYChange);return d.useEffect(()=>{u.current&&i(getComputedStyle(u.current))},[u]),l.jsx(ov,{"data-orientation":"vertical",...o,ref:c,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ha(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(a.viewport){const p=a.viewport.scrollTop+m.deltaY;e.onWheelScroll(p),lv(p,f)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&s&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:na(s.paddingTop),paddingEnd:na(s.paddingBottom)}})}})}),[vP,rv]=Zg(mt),ov=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:a,onThumbPointerUp:s,onThumbPointerDown:i,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:m,onResize:f,...p}=e,h=Ge(mt,n),[v,g]=d.useState(null),y=xe(t,A=>g(A)),x=d.useRef(null),S=d.useRef(""),E=h.viewport,w=r.content-r.viewport,C=Ce(m),_=Ce(u),N=Ba(f,10);function T(A){if(x.current){const j=A.clientX-x.current.left,k=A.clientY-x.current.top;c({x:j,y:k})}}return d.useEffect(()=>{const A=j=>{const k=j.target;(v==null?void 0:v.contains(k))&&C(j,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[E,v,w,C]),d.useEffect(_,[r,_]),Gn(v,N),Gn(h.content,N),l.jsx(vP,{scope:n,scrollbar:v,hasThumb:o,onThumbChange:Ce(a),onThumbPointerUp:Ce(s),onThumbPositionChange:_,onThumbPointerDown:Ce(i),children:l.jsx(le.div,{...p,ref:y,style:{position:"absolute",...p.style},onPointerDown:Z(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),T(A))}),onPointerMove:Z(e.onPointerMove,T),onPointerUp:Z(e.onPointerUp,A=>{const j=A.target;j.hasPointerCapture(A.pointerId)&&j.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=S.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),ta="ScrollAreaThumb",av=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=rv(ta,e.__scopeScrollArea);return l.jsx(Re,{present:n||o.hasThumb,children:l.jsx(xP,{ref:t,...r})})}),xP=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,a=Ge(ta,n),s=rv(ta,n),{onThumbPositionChange:i}=s,u=xe(t,f=>s.onThumbChange(f)),c=d.useRef(),m=Ba(()=>{c.current&&(c.current(),c.current=void 0)},100);return d.useEffect(()=>{const f=a.viewport;if(f){const p=()=>{if(m(),!c.current){const h=wP(f,i);c.current=h,i()}};return i(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[a.viewport,m,i]),l.jsx(le.div,{"data-state":s.hasThumb?"visible":"hidden",...o,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Z(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),v=f.clientX-h.left,g=f.clientY-h.top;s.onThumbPointerDown({x:v,y:g})}),onPointerUp:Z(e.onPointerUp,s.onThumbPointerUp)})});av.displayName=ta;var Lc="ScrollAreaCorner",sv=d.forwardRef((e,t)=>{const n=Ge(Lc,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(yP,{...e,ref:t}):null});sv.displayName=Lc;var yP=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=Ge(Lc,n),[a,s]=d.useState(0),[i,u]=d.useState(0),c=!!(a&&i);return Gn(o.scrollbarX,()=>{var f;const m=((f=o.scrollbarX)==null?void 0:f.offsetHeight)||0;o.onCornerHeightChange(m),u(m)}),Gn(o.scrollbarY,()=>{var f;const m=((f=o.scrollbarY)==null?void 0:f.offsetWidth)||0;o.onCornerWidthChange(m),s(m)}),c?l.jsx(le.div,{...r,ref:t,style:{width:a,height:i,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function na(e){return e?parseInt(e,10):0}function iv(e,t){const n=e/t;return isNaN(n)?0:n}function Ha(e){const t=iv(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function bP(e,t,n,r="ltr"){const o=Ha(n),a=o/2,s=t||a,i=o-s,u=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-i,m=n.content-n.viewport,f=r==="ltr"?[0,m]:[m*-1,0];return cv([u,c],f)(e)}function ku(e,t,n="ltr"){const r=Ha(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-o,s=t.content-t.viewport,i=a-r,u=n==="ltr"?[0,s]:[s*-1,0],c=uP(e,u);return cv([0,s],[0,i])(c)}function cv(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function lv(e,t){return e>0&&e<t}var wP=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const a={left:e.scrollLeft,top:e.scrollTop},s=n.left!==a.left,i=n.top!==a.top;(s||i)&&t(),n=a,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function Ba(e,t){const n=Ce(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Gn(e,t){const n=Ce(t);Or(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}function EP(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const o=d.Children.only(r);return d.cloneElement(o,{children:typeof t=="function"?t(o.props.children):t})}var uv=Jg,SP=tv,CP=sv;const Fc=W.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(uv,{ref:r,className:ne("relative overflow-hidden",e),...n,children:[l.jsx(SP,{className:"scrollable-flex size-full rounded-[inherit]",children:t}),l.jsx(dv,{}),l.jsx(CP,{})]}));Fc.displayName=uv.displayName;const dv=W.forwardRef(({className:e,orientation:t="vertical",...n},r)=>l.jsx($c,{ref:r,orientation:t,className:ne("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:l.jsx(av,{className:"relative flex-1 rounded-full bg-border"})}));dv.displayName=$c.displayName;const fv=W.forwardRef(({className:e,...t},n)=>l.jsx("table",{ref:n,className:ne("w-full caption-bottom text-sm",e),...t}));fv.displayName="Table";const mv=W.forwardRef(({className:e,...t},n)=>l.jsx("thead",{ref:n,className:ne("[&_tr]:border-b",e),...t}));mv.displayName="TableHeader";const pv=W.forwardRef(({className:e,...t},n)=>l.jsx("tbody",{ref:n,className:ne("[&_tr:last-child]:border-0",e),...t}));pv.displayName="TableBody";const _P=W.forwardRef(({className:e,...t},n)=>l.jsx("tfoot",{ref:n,className:ne("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));_P.displayName="TableFooter";const Ti=W.forwardRef(({className:e,...t},n)=>l.jsx("tr",{ref:n,className:ne("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ti.displayName="TableRow";const En=W.forwardRef(({className:e,...t},n)=>l.jsx("th",{ref:n,className:ne("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));En.displayName="TableHead";const Sn=W.forwardRef(({className:e,...t},n)=>l.jsx("td",{ref:n,className:ne("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));Sn.displayName="TableCell";const NP=W.forwardRef(({className:e,...t},n)=>l.jsx("caption",{ref:n,className:ne("mt-4 text-sm text-muted-foreground",e),...t}));NP.displayName="TableCaption";const TP=({dialog:e})=>{const{closeOpenDiagramDialog:t}=Ue(),{t:n}=Te(),{updateConfig:r}=Ur(),o=sa(),{listDiagrams:a}=ca(),[s,i]=d.useState([]),[u,c]=d.useState();d.useEffect(()=>{c(void 0)},[e.open]),d.useEffect(()=>{(async()=>{const p=await a({includeTables:!0});i(p.sort((h,v)=>v.updatedAt.getTime()-h.updatedAt.getTime()))})()},[a,i,e.open]);const m=f=>{f&&(r({defaultDiagramId:f}),o(`/diagrams/${f}`))};return l.jsx(lt,{...e,onOpenChange:f=>{f||t()},children:l.jsxs(tt,{className:"flex max-h-[90vh] w-[90vw] flex-col overflow-y-auto md:w-screen xl:min-w-[55vw]",showClose:!0,children:[l.jsxs(Nt,{children:[l.jsx(ut,{children:n("open_diagram_dialog.title")}),l.jsx(dt,{children:n("open_diagram_dialog.description")})]}),l.jsx("div",{className:"flex flex-1 items-center justify-center",children:l.jsx(Fc,{className:"h-80 w-full",children:l.jsxs(fv,{className:"h-fit",children:[l.jsx(mv,{className:"sticky top-0 bg-background",children:l.jsxs(Ti,{children:[l.jsx(En,{}),l.jsx(En,{children:n("open_diagram_dialog.table_columns.name")}),l.jsx(En,{className:"hidden items-center sm:inline-flex",children:n("open_diagram_dialog.table_columns.created_at")}),l.jsx(En,{children:n("open_diagram_dialog.table_columns.last_modified")}),l.jsx(En,{className:"text-center",children:n("open_diagram_dialog.table_columns.tables_count")})]})}),l.jsx(pv,{children:s.map(f=>{var p;return l.jsxs(Ti,{"data-state":`${u===f.id?"selected":""}`,onClick:h=>{switch(h.detail){case 1:c(f.id);break;case 2:m(f.id),t();break;default:c(f.id)}},children:[l.jsx(Sn,{className:"table-cell",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(ec,{diagram:f})})}),l.jsx(Sn,{children:f.name}),l.jsx(Sn,{className:"hidden items-center sm:table-cell",children:f.createdAt.toLocaleString()}),l.jsx(Sn,{children:f.updatedAt.toLocaleString()}),l.jsx(Sn,{className:"text-center",children:(p=f.tables)==null?void 0:p.length})]},f.id)})})]})})}),l.jsxs(Tt,{className:"flex !justify-between gap-2",children:[l.jsx(ke,{asChild:!0,children:l.jsx(we,{type:"button",variant:"secondary",children:n("open_diagram_dialog.cancel")})}),l.jsx(ke,{asChild:!0,children:l.jsx(we,{type:"submit",disabled:!u,onClick:()=>m(u??""),children:n("open_diagram_dialog.open")})})]})]})})},hv=e=>{const{tables:t,relationships:n}=e;if(!t||t.length===0)return"";const r=t.filter(a=>!a.isView);AP(e);let o="";return r.forEach(a=>{o+=`CREATE TABLE ${a.name} (
`,a.fields.forEach((s,i)=>{o+=`  ${s.name} ${s.type.name}`,s.characterMaximumLength&&(o+=`(${s.characterMaximumLength})`),s.precision&&s.scale?o+=`(${s.precision}, ${s.scale})`:s.precision&&(o+=`(${s.precision})`),s.nullable||(o+=" NOT NULL"),s.default&&(o+=` DEFAULT ${s.default}`),s.primaryKey&&(o+=" PRIMARY KEY"),i<a.fields.length-1&&(o+=`,
`)}),o+=`
);

`,a.comments&&(o+=`COMMENT ON TABLE ${a.name} IS '${a.comments}';
`),a.fields.forEach(s=>{s.comments&&(o+=`COMMENT ON COLUMN ${a.name}.${s.name} IS '${s.comments}';
`)}),a.indexes.forEach(s=>{const i=s.fieldIds.map(u=>{var c;return(c=a.fields.find(m=>m.id===u))==null?void 0:c.name}).filter(Boolean).join(", ");i&&(o+=`CREATE ${s.unique?"UNIQUE ":""}INDEX ${s.name} ON ${a.name} (${i});
`)}),o+=`
`}),n==null||n.forEach(a=>{const s=r.find(m=>m.id===a.sourceTableId),i=r.find(m=>m.id===a.targetTableId),u=s==null?void 0:s.fields.find(m=>m.id===a.sourceFieldId),c=i==null?void 0:i.fields.find(m=>m.id===a.targetFieldId);s&&i&&u&&c&&(o+=`ALTER TABLE ${s.name} ADD CONSTRAINT ${a.name} FOREIGN KEY (${u.name}) REFERENCES ${i.name} (${c.name});
`)}),o},RP=async(e,t)=>{const{generateText:n}=await rn(async()=>{const{generateText:u}=await import("./index-Bid0qvHX.js");return{generateText:u}},__vite__mapDeps([6,7,1,2])),{createOpenAI:r}=await rn(async()=>{const{createOpenAI:u}=await import("./index-CCSqFstG.js");return{createOpenAI:u}},__vite__mapDeps([8,7,1,2])),o=r({apiKey:Ow}),a=hv(e),s=DP(t,a),{text:i}=await n({model:o("gpt-4o-mini-2024-07-18"),prompt:s});return i};function $u(e){return{tinyint:1,smallint:2,mediumint:3,integer:4,bigint:8,float:4,double:8,decimal:16,numeric:16}[e.name.toLowerCase()]||0}function AP(e){const{tables:t,relationships:n}=e;if(!t||t.length===0||!n||n.length===0)return;const r=new Map;t.forEach(o=>{r.set(o.id,o)}),n.forEach(o=>{const{sourceTableId:a,sourceFieldId:s,targetTableId:i,targetFieldId:u}=o,c=r.get(a),m=r.get(i);if(c&&m){const f=c.fields.find(h=>h.id===s),p=m.fields.find(h=>h.id===u);if(f&&p){const h=$u(f.type),v=$u(p.type);h>v?p.type=f.type:v>h&&(f.type=p.type)}}})}const DP=(e,t)=>{const n=`
        You are generating SQL scripts for creating database tables and sequences, handling primary keys, indices, and other table attributes.
        The following instructions will guide you in optimizing the scripts for the ${e} dialect:
        - **Column Names**: Do **not** modify the names of columns. Ensure that all column names in the generated SQL script are exactly as provided in the input schema. If the input specifies a column name, it must appear in the output script unchanged.
        - **Column Name Conflicts**: When a column name conflicts with a data type or reserved keyword (e.g., fulltext, Primary, Column), escape the column name by enclosing it.
    `,o={generic:"",postgresql:"\n        - **Sequence Creation**: Use `CREATE SEQUENCE IF NOT EXISTS` for sequence creation.\n        - **Table and Index Creation**: Use `CREATE TABLE IF NOT EXISTS` and `CREATE INDEX IF NOT EXISTS` to avoid errors if the object already exists.\n        - **Serial and Identity Columns**: For auto-increment columns, use `SERIAL` or `GENERATED BY DEFAULT AS IDENTITY`.\n        - **Conditional Statements**: Utilize PostgreSQL’s support for `IF NOT EXISTS` in relevant `CREATE` statements.\n    ",mysql:"\n        - **Table Creation**: Use `CREATE TABLE IF NOT EXISTS` for creating tables. While creating the table structure, ensure that all foreign key columns use the correct data types as determined in the foreign key review.\n        - **Auto-Increment**: Use `AUTO_INCREMENT` for auto-incrementing primary key columns.\n        - **Index Creation**: Place all `CREATE INDEX` statements separately after the `CREATE TABLE` statement. Avoid using `IF NOT EXISTS` in `CREATE INDEX` statements.\n        - **Indexing TEXT/BLOB Columns**: Do **not** create regular indexes on `TEXT` or `BLOB` columns. If indexing these types is required, use `FULLTEXT` indexes specifically for `TEXT` columns where appropriate, or consider alternative strategies.\n        - **Date Column Defaults**: Avoid using `CURRENT_DATE` as a default for `DATE` columns. Instead, consider using `DEFAULT NULL` or handle default values programmatically.\n        - **Timestamp Default Value**: Use `DEFAULT CURRENT_TIMESTAMP` for `TIMESTAMP` columns. Only one `TIMESTAMP` column can have `CURRENT_TIMESTAMP` as the default without specifying `ON UPDATE`.\n        - **Boolean Columns**: Use `TINYINT(1)` instead of `BOOLEAN` for better compatibility with MySQL/MariaDB versions that might not fully support the `BOOLEAN` data type.\n        - **TEXT and BLOB Constraints**: Do not use `NOT NULL` with `TEXT` or `BLOB` columns, as these types do not support the `NOT NULL` constraint in MariaDB.\n        - **ENUM Data Type**: Ensure that default values are compatible and that the `ENUM` declaration adheres to MariaDB's syntax requirements.\n        - **Default Values**: Ensure that default values for columns, especially `DECIMAL` and `ENUM`, are correctly formatted and comply with MariaDB's SQL syntax.\n        - **Sequences**: Recognize that MySQL does not natively support sequences. Use `AUTO_INCREMENT` instead.\n\n        **Reminder**: Ensure all column names that conflict with reserved keywords or data types (like `fulltext`) are escaped using backticks (`).\n    ",sql_server:"\n        - **Sequence Creation**: Use `CREATE SEQUENCE` without `IF NOT EXISTS`, and employ conditional logic (`IF NOT EXISTS`) to check for sequence existence before creation.\n        - **Identity Columns**: Always prefer using the `IDENTITY` keyword (e.g., `INT IDENTITY(1,1)`) for auto-incrementing primary key columns when possible.\n        - **Conditional Logic**: Use a conditional block like `IF NOT EXISTS (SELECT * FROM sys.objects WHERE ...)` since SQL Server doesn’t support `IF NOT EXISTS` directly in `CREATE` statements.\n        - **Avoid Unsupported Syntax**: Ensure the script does not include unsupported statements like `CREATE TABLE IF NOT EXISTS`.\n\n        **Reminder**: Ensure all column names that conflict with reserved keywords or data types (e.g., key, primary, column, table), escape the column name by enclosing it.\n    ",mariadb:"\n        - **Table Creation**: Use `CREATE TABLE IF NOT EXISTS` for creating tables. While creating the table structure, ensure that all foreign key columns use the correct data types as determined in the foreign key review.\n        - **Auto-Increment**: Use `AUTO_INCREMENT` for auto-incrementing primary key columns.\n        - **Index Creation**: Place all `CREATE INDEX` statements separately after the `CREATE TABLE` statement. Avoid using `IF NOT EXISTS` in `CREATE INDEX` statements.\n        - **Indexing TEXT/BLOB Columns**: Do **not** create regular indexes on `TEXT` or `BLOB` columns. If indexing these types is required, use `FULLTEXT` indexes specifically for `TEXT` columns where appropriate, or consider alternative strategies.\n        - **Date Column Defaults**: Avoid using `CURRENT_DATE` as a default for `DATE` columns. Instead, consider using `DEFAULT NULL` or handle default values programmatically.\n        - **Timestamp Default Value**: Use `DEFAULT CURRENT_TIMESTAMP` for `TIMESTAMP` columns. Only one `TIMESTAMP` column can have `CURRENT_TIMESTAMP` as the default without specifying `ON UPDATE`.\n        - **Boolean Columns**: Use `TINYINT(1)` instead of `BOOLEAN` for better compatibility with MySQL/MariaDB versions that might not fully support the `BOOLEAN` data type.\n        - **TEXT and BLOB Constraints**: Do not use `NOT NULL` with `TEXT` or `BLOB` columns, as these types do not support the `NOT NULL` constraint in MariaDB.\n        - **ENUM Data Type**: Ensure that default values are compatible and that the `ENUM` declaration adheres to MariaDB's syntax requirements.\n        - **Default Values**: Ensure that default values for columns, especially `DECIMAL` and `ENUM`, are correctly formatted and comply with MariaDB's SQL syntax.\n        - **Sequences**: Recognize that MySQL does not natively support sequences. Use `AUTO_INCREMENT` instead.\n\n        **Reminder**: Ensure all column names that conflict with reserved keywords or data types (like `fulltext`) are escaped using backticks (`).\n        ",sqlite:"\n        - **Table Creation**: Use `CREATE TABLE IF NOT EXISTS`.\n        - **Auto-Increment**: Use `AUTOINCREMENT` with `INTEGER PRIMARY KEY` for auto-increment functionality.\n        - **No Sequence Support**: SQLite does not support sequences; rely solely on `AUTOINCREMENT` for similar functionality.\n        - **Foreign Key Constraints**: Do not use `ALTER TABLE` to add foreign key constraints. SQLite does not support adding foreign keys to an existing table after it has been created. Always define foreign key constraints during the `CREATE TABLE` statement. Avoid using named constraints in foreign key definitions.\n        - **Adding Foreign Keys to Existing Tables**: If adding a foreign key to an existing table is required, suggest creating a new table with the foreign key constraint, migrating the data, and renaming the new table to the original name.\n        - **General SQLite Constraints**: Remember, `ALTER TABLE` in SQLite is limited and cannot add constraints after the table is created.\n        - **Conditional Logic**: Ensure the script uses SQLite-compatible syntax and does not include unsupported features.\n    "}[e]??"";return`${n}
${o}

        - **Validation**: After generating the script, validate it against the respective SQL dialect by attempting to execute it in a corresponding database environment.
        - **Syntax Checking**: Use SQL linting tools specific to each dialect to ensure the script is free from syntax errors.
        - **Manual Review**: Include a step where a knowledgeable developer reviews the generated script to ensure it meets the required specifications and adheres to best practices.

        Here is the SQL script that needs to be optimized or generated according to the instructions above:

        ${t}

        
    **Provide just the SQL commands without markdown tags.**

    Just answer with the script with no additional details.

    No images are allowed. Do not try to generate or link images, including base64 data URLs.

    Feel free to suggest corrections for suspected typos.
    
    `},PP=({dialog:e,targetDatabaseType:t})=>{const{closeExportSQLDialog:n}=Ue(),{currentDiagram:r}=ze(),{t:o}=Te(),[a,s]=W.useState(),[i,u]=W.useState(!1),c=d.useCallback(async()=>t===te.GENERIC?Promise.resolve(hv(r)):RP(r,t),[t,r]);d.useEffect(()=>{if(!e.open)return;s(void 0),u(!1),(async()=>{try{const h=await c();s(h)}catch{u(!0)}})()},[e.open,s,c,u]);const m=d.useCallback(()=>l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 text-sm",children:[l.jsx(Fw,{className:"size-10"}),l.jsx(mr,{className:"text-sm",children:l.jsx(pr,{i18nKey:"export_sql_dialog.error.message",components:[l.jsx("a",{href:"mailto:chartdb.io@gmail.com",target:"_blank",className:"text-pink-600 hover:underline",rel:"noreferrer"},0)]})}),l.jsx("div",{children:l.jsx(pr,{i18nKey:"export_sql_dialog.error.description",components:[l.jsx("a",{href:"https://github.com/chartdb/chartdb",target:"_blank",rel:"noreferrer",className:"text-pink-600 hover:underline"},0)]})})]})}),[]),f=d.useCallback(()=>l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Sr,{}),l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsx(Xw,{className:"h-5"}),l.jsx(mr,{className:"text-lg",children:o("export_sql_dialog.loading.text",{databaseType:Pe[t]})})]}),l.jsx("div",{className:"flex items-center justify-center gap-1",children:l.jsx(mr,{className:"text-sm",children:o("export_sql_dialog.loading.description")})})]}),[t,o]);return l.jsx(lt,{...e,onOpenChange:p=>{p||n()},children:l.jsxs(tt,{className:"flex max-h-[80vh] min-w-[500px] flex-col overflow-y-auto xl:min-w-[75vw]",showClose:!0,children:[l.jsxs(Nt,{children:[l.jsx(ut,{children:o("export_sql_dialog.title")}),l.jsx(dt,{children:o("export_sql_dialog.description",{databaseType:t===te.GENERIC?"SQL":Pe[t]})})]}),l.jsx("div",{className:"flex flex-1 items-center justify-center",children:i?m():a===void 0?f():a.length===0?m():l.jsx(Zo,{className:"max-h-96 w-full",code:a})}),l.jsxs(Tt,{className:"flex !justify-between gap-2",children:[l.jsx("div",{}),l.jsx(ke,{asChild:!0,children:l.jsx(we,{type:"button",variant:"secondary",children:o("export_sql_dialog.close")})})]})]})})};var gv="AlertDialog",[jP,HI]=ct(gv,[zm]),Dt=zm(),vv=e=>{const{__scopeAlertDialog:t,...n}=e,r=Dt(t);return l.jsx(op,{...r,...n,modal:!0})};vv.displayName=gv;var MP="AlertDialogTrigger",IP=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Dt(n);return l.jsx(ap,{...o,...r,ref:t})});IP.displayName=MP;var kP="AlertDialogPortal",xv=e=>{const{__scopeAlertDialog:t,...n}=e,r=Dt(t);return l.jsx(uc,{...r,...n})};xv.displayName=kP;var $P="AlertDialogOverlay",yv=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Dt(n);return l.jsx(Gr,{...o,...r,ref:t})});yv.displayName=$P;var In="AlertDialogContent",[OP,LP]=jP(In),bv=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=Dt(n),s=d.useRef(null),i=xe(t,s),u=d.useRef(null);return l.jsx(rS,{contentName:In,titleName:wv,docsSlug:"alert-dialog",children:l.jsx(OP,{scope:n,cancelRef:u,children:l.jsxs(Wr,{role:"alertdialog",...a,...o,ref:i,onOpenAutoFocus:Z(o.onOpenAutoFocus,c=>{var m;c.preventDefault(),(m=u.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[l.jsx(by,{children:r}),l.jsx(HP,{contentRef:s})]})})})});bv.displayName=In;var wv="AlertDialogTitle",Ev=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Dt(n);return l.jsx(Kr,{...o,...r,ref:t})});Ev.displayName=wv;var Sv="AlertDialogDescription",Cv=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Dt(n);return l.jsx(Xr,{...o,...r,ref:t})});Cv.displayName=Sv;var FP="AlertDialogAction",_v=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=Dt(n);return l.jsx(Yr,{...o,...r,ref:t})});_v.displayName=FP;var Nv="AlertDialogCancel",Tv=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=LP(Nv,n),a=Dt(n),s=xe(t,o);return l.jsx(Yr,{...a,...r,ref:s})});Tv.displayName=Nv;var HP=({contentRef:e})=>{const t=`\`${In}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${In}\` by passing a \`${Sv}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${In}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},BP=vv,VP=xv,Rv=yv,Av=bv,Dv=_v,Pv=Tv,jv=Ev,Mv=Cv;const zP=BP,UP=VP,Iv=W.forwardRef(({className:e,...t},n)=>l.jsx(Rv,{className:ne("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Iv.displayName=Rv.displayName;const kv=W.forwardRef(({className:e,...t},n)=>l.jsxs(UP,{children:[l.jsx(Iv,{}),l.jsx(Av,{ref:n,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));kv.displayName=Av.displayName;const $v=({className:e,...t})=>l.jsx("div",{className:ne("flex flex-col space-y-2 text-center sm:text-left",e),...t});$v.displayName="AlertDialogHeader";const Ov=({className:e,...t})=>l.jsx("div",{className:ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ov.displayName="AlertDialogFooter";const Lv=W.forwardRef(({className:e,...t},n)=>l.jsx(jv,{ref:n,className:ne("text-lg font-semibold",e),...t}));Lv.displayName=jv.displayName;const Fv=W.forwardRef(({className:e,...t},n)=>l.jsx(Mv,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));Fv.displayName=Mv.displayName;const Hv=W.forwardRef(({className:e,...t},n)=>l.jsx(Dv,{ref:n,className:ne(sd(),e),...t}));Hv.displayName=Dv.displayName;const Bv=W.forwardRef(({className:e,...t},n)=>l.jsx(Pv,{ref:n,className:ne(sd({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Bv.displayName=Pv.displayName;const GP=({title:e,description:t,actionLabel:n,closeLabel:r,onAction:o,dialog:a,content:s,onClose:i})=>{const{closeAlert:u}=Ue(),c=d.useCallback(()=>{i==null||i(),u()},[i,u]),m=d.useCallback(()=>{o==null||o(),u()},[o,u]);return l.jsx(zP,{...a,onOpenChange:f=>{f||u()},children:l.jsxs(kv,{children:[l.jsxs($v,{children:[l.jsx(Lv,{children:e}),t&&l.jsx(Fv,{children:t}),s]}),l.jsxs(Ov,{children:[r&&l.jsx(Bv,{onClick:c,children:r}),n&&l.jsx(Hv,{onClick:m,children:n})]})]})})};var Ou=1,WP=.9,KP=.8,XP=.17,As=.1,Ds=.999,YP=.9999,qP=.99,QP=/[\\\/_+.#"@\[\(\{&]/,ZP=/[\\\/_+.#"@\[\(\{&]/g,JP=/[\s-]/,Vv=/[\s-]/g;function Ri(e,t,n,r,o,a,s){if(a===t.length)return o===e.length?Ou:qP;var i=`${o},${a}`;if(s[i]!==void 0)return s[i];for(var u=r.charAt(a),c=n.indexOf(u,o),m=0,f,p,h,v;c>=0;)f=Ri(e,t,n,r,c+1,a+1,s),f>m&&(c===o?f*=Ou:QP.test(e.charAt(c-1))?(f*=KP,h=e.slice(o,c-1).match(ZP),h&&o>0&&(f*=Math.pow(Ds,h.length))):JP.test(e.charAt(c-1))?(f*=WP,v=e.slice(o,c-1).match(Vv),v&&o>0&&(f*=Math.pow(Ds,v.length))):(f*=XP,o>0&&(f*=Math.pow(Ds,c-o))),e.charAt(c)!==t.charAt(a)&&(f*=YP)),(f<As&&n.charAt(c-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(c-1)!==r.charAt(a))&&(p=Ri(e,t,n,r,c+1,a+2,s),p*As>f&&(f=p*As)),f>m&&(m=f),c=n.indexOf(u,c+1);return s[i]=m,m}function Lu(e){return e.toLowerCase().replace(Vv," ")}function ej(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Ri(e,t,Lu(e),Lu(t),0,0,{})}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(null,arguments)}function kn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function tj(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function zv(...e){return t=>e.forEach(n=>tj(n,t))}function to(...e){return d.useCallback(zv(...e),e)}function nj(e,t=[]){let n=[];function r(a,s){const i=d.createContext(s),u=n.length;n=[...n,s];function c(f){const{scope:p,children:h,...v}=f,g=(p==null?void 0:p[e][u])||i,y=d.useMemo(()=>v,Object.values(v));return d.createElement(g.Provider,{value:y},h)}function m(f,p){const h=(p==null?void 0:p[e][u])||i,v=d.useContext(h);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return c.displayName=a+"Provider",[c,m]}const o=()=>{const a=n.map(s=>d.createContext(s));return function(i){const u=(i==null?void 0:i[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return o.scopeName=e,[r,rj(o,...t)]}function rj(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const s=r.reduce((i,{useScope:u,scopeName:c})=>{const f=u(a)[`__scope${c}`];return{...i,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}const Ai=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},oj=wy.useId||(()=>{});let aj=0;function Ps(e){const[t,n]=d.useState(oj());return Ai(()=>{e||n(r=>r??String(aj++))},[e]),e||(t?`radix-${t}`:"")}function cn(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function sj({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=ij({defaultProp:t,onChange:n}),a=e!==void 0,s=a?e:r,i=cn(n),u=d.useCallback(c=>{if(a){const f=typeof c=="function"?c(e):c;f!==e&&i(f)}else o(c)},[a,e,o,i]);return[s,u]}function ij({defaultProp:e,onChange:t}){const n=d.useState(e),[r]=n,o=d.useRef(r),a=cn(t);return d.useEffect(()=>{o.current!==r&&(a(r),o.current=r)},[r,o,a]),n}const Hc=d.forwardRef((e,t)=>{const{children:n,...r}=e,o=d.Children.toArray(n),a=o.find(lj);if(a){const s=a.props.children,i=o.map(u=>u===a?d.Children.count(s)>1?d.Children.only(null):d.isValidElement(s)?s.props.children:null:u);return d.createElement(Di,je({},r,{ref:t}),d.isValidElement(s)?d.cloneElement(s,void 0,i):null)}return d.createElement(Di,je({},r,{ref:t}),n)});Hc.displayName="Slot";const Di=d.forwardRef((e,t)=>{const{children:n,...r}=e;return d.isValidElement(n)?d.cloneElement(n,{...uj(r,n.props),ref:t?zv(t,n.ref):n.ref}):d.Children.count(n)>1?d.Children.only(null):null});Di.displayName="SlotClone";const cj=({children:e})=>d.createElement(d.Fragment,null,e);function lj(e){return d.isValidElement(e)&&e.type===cj}function uj(e,t){const n={...t};for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...i)=>{a(...i),o(...i)}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}const dj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],We=dj.reduce((e,t)=>{const n=d.forwardRef((r,o)=>{const{asChild:a,...s}=r,i=a?Hc:t;return d.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),d.createElement(i,je({},s,{ref:o}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function fj(e,t){e&&Fi.flushSync(()=>e.dispatchEvent(t))}function mj(e,t=globalThis==null?void 0:globalThis.document){const n=cn(e);d.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const Pi="dismissableLayer.update",pj="dismissableLayer.pointerDownOutside",hj="dismissableLayer.focusOutside";let Fu;const gj=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vj=d.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:i,onDismiss:u,...c}=e,m=d.useContext(gj),[f,p]=d.useState(null),h=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=d.useState({}),g=to(t,T=>p(T)),y=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),S=y.indexOf(x),E=f?y.indexOf(f):-1,w=m.layersWithOutsidePointerEventsDisabled.size>0,C=E>=S,_=xj(T=>{const A=T.target,j=[...m.branches].some(k=>k.contains(A));!C||j||(a==null||a(T),i==null||i(T),T.defaultPrevented||u==null||u())},h),N=yj(T=>{const A=T.target;[...m.branches].some(k=>k.contains(A))||(s==null||s(T),i==null||i(T),T.defaultPrevented||u==null||u())},h);return mj(T=>{E===m.layers.size-1&&(o==null||o(T),!T.defaultPrevented&&u&&(T.preventDefault(),u()))},h),d.useEffect(()=>{if(f)return r&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Fu=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(f)),m.layers.add(f),Hu(),()=>{r&&m.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Fu)}},[f,h,r,m]),d.useEffect(()=>()=>{f&&(m.layers.delete(f),m.layersWithOutsidePointerEventsDisabled.delete(f),Hu())},[f,m]),d.useEffect(()=>{const T=()=>v({});return document.addEventListener(Pi,T),()=>document.removeEventListener(Pi,T)},[]),d.createElement(We.div,je({},c,{ref:g,style:{pointerEvents:w?C?"auto":"none":void 0,...e.style},onFocusCapture:kn(e.onFocusCapture,N.onFocusCapture),onBlurCapture:kn(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:kn(e.onPointerDownCapture,_.onPointerDownCapture)}))});function xj(e,t=globalThis==null?void 0:globalThis.document){const n=cn(e),r=d.useRef(!1),o=d.useRef(()=>{});return d.useEffect(()=>{const a=i=>{if(i.target&&!r.current){let c=function(){Uv(pj,n,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",a),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function yj(e,t=globalThis==null?void 0:globalThis.document){const n=cn(e),r=d.useRef(!1);return d.useEffect(()=>{const o=a=>{a.target&&!r.current&&Uv(hj,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Hu(){const e=new CustomEvent(Pi);document.dispatchEvent(e)}function Uv(e,t,n,{discrete:r}){const o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?fj(o,a):o.dispatchEvent(a)}const js="focusScope.autoFocusOnMount",Ms="focusScope.autoFocusOnUnmount",Bu={bubbles:!1,cancelable:!0},bj=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...s}=e,[i,u]=d.useState(null),c=cn(o),m=cn(a),f=d.useRef(null),p=to(t,g=>u(g)),h=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let g=function(E){if(h.paused||!i)return;const w=E.target;i.contains(w)?f.current=w:It(f.current,{select:!0})},y=function(E){if(h.paused||!i)return;const w=E.relatedTarget;w!==null&&(i.contains(w)||It(f.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const C of E)C.removedNodes.length>0&&It(i)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const S=new MutationObserver(x);return i&&S.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),S.disconnect()}}},[r,i,h.paused]),d.useEffect(()=>{if(i){zu.add(h);const g=document.activeElement;if(!i.contains(g)){const x=new CustomEvent(js,Bu);i.addEventListener(js,c),i.dispatchEvent(x),x.defaultPrevented||(wj(Nj(Gv(i)),{select:!0}),document.activeElement===g&&It(i))}return()=>{i.removeEventListener(js,c),setTimeout(()=>{const x=new CustomEvent(Ms,Bu);i.addEventListener(Ms,m),i.dispatchEvent(x),x.defaultPrevented||It(g??document.body,{select:!0}),i.removeEventListener(Ms,m),zu.remove(h)},0)}}},[i,c,m,h]);const v=d.useCallback(g=>{if(!n&&!r||h.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(y&&x){const S=g.currentTarget,[E,w]=Ej(S);E&&w?!g.shiftKey&&x===w?(g.preventDefault(),n&&It(E,{select:!0})):g.shiftKey&&x===E&&(g.preventDefault(),n&&It(w,{select:!0})):x===S&&g.preventDefault()}},[n,r,h.paused]);return d.createElement(We.div,je({tabIndex:-1},s,{ref:p,onKeyDown:v}))});function wj(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(It(r,{select:t}),document.activeElement!==n)return}function Ej(e){const t=Gv(e),n=Vu(t,e),r=Vu(t.reverse(),e);return[n,r]}function Gv(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Vu(e,t){for(const n of e)if(!Sj(n,{upTo:t}))return n}function Sj(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Cj(e){return e instanceof HTMLInputElement&&"select"in e}function It(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Cj(e)&&t&&e.select()}}const zu=_j();function _j(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Uu(e,t),e.unshift(t)},remove(t){var n;e=Uu(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function Uu(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Nj(e){return e.filter(t=>t.tagName!=="A")}const Tj=d.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...o}=e;return r?Zu.createPortal(d.createElement(We.div,je({},o,{ref:t})),r):null});function Rj(e,t){return d.useReducer((n,r)=>{const o=t[n][r];return o??n},e)}const Va=e=>{const{present:t,children:n}=e,r=Aj(t),o=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),a=to(r.ref,o.ref);return typeof n=="function"||r.isPresent?d.cloneElement(o,{ref:a}):null};Va.displayName="Presence";function Aj(e){const[t,n]=d.useState(),r=d.useRef({}),o=d.useRef(e),a=d.useRef("none"),s=e?"mounted":"unmounted",[i,u]=Rj(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const c=wo(r.current);a.current=i==="mounted"?c:"none"},[i]),Ai(()=>{const c=r.current,m=o.current;if(m!==e){const p=a.current,h=wo(c);e?u("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(m&&p!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),Ai(()=>{if(t){const c=f=>{const h=wo(r.current).includes(f.animationName);f.target===t&&h&&Fi.flushSync(()=>u("ANIMATION_END"))},m=f=>{f.target===t&&(a.current=wo(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",c),t.addEventListener("animationend",c),()=>{t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",c),t.removeEventListener("animationend",c)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:d.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function wo(e){return(e==null?void 0:e.animationName)||"none"}let Is=0;function Dj(){d.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:Gu()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:Gu()),Is++,()=>{Is===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Is--}},[])}function Gu(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Wv=Hd(),ks=function(){},za=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:ks,onWheelCapture:ks,onTouchMoveCapture:ks}),o=r[0],a=r[1],s=e.forwardProps,i=e.children,u=e.className,c=e.removeScrollBar,m=e.enabled,f=e.shards,p=e.sideCar,h=e.noIsolation,v=e.inert,g=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,S=Hr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),E=p,w=Fd([n,t]),C=_e(_e({},S),o);return d.createElement(d.Fragment,null,m&&d.createElement(E,{sideCar:Wv,removeScrollBar:c,shards:f,noIsolation:h,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:n}),s?d.cloneElement(d.Children.only(i),_e(_e({},C),{ref:w})):d.createElement(x,_e({},C,{className:u,ref:w}),i))});za.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};za.classNames={fullWidth:gr,zeroRight:hr};var ji=!1;if(typeof window<"u")try{var Eo=Object.defineProperty({},"passive",{get:function(){return ji=!0,!0}});window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{ji=!1}var yn=ji?{passive:!1}:!1,Pj=function(e){return e.tagName==="TEXTAREA"},Kv=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Pj(e)&&n[t]==="visible")},jj=function(e){return Kv(e,"overflowY")},Mj=function(e){return Kv(e,"overflowX")},Wu=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Xv(e,n);if(r){var o=Yv(e,n),a=o[1],s=o[2];if(a>s)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Ij=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},kj=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Xv=function(e,t){return e==="v"?jj(t):Mj(t)},Yv=function(e,t){return e==="v"?Ij(t):kj(t)},$j=function(e,t){return e==="h"&&t==="rtl"?-1:1},Oj=function(e,t,n,r,o){var a=$j(e,window.getComputedStyle(t).direction),s=a*r,i=n.target,u=t.contains(i),c=!1,m=s>0,f=0,p=0;do{var h=Yv(e,i),v=h[0],g=h[1],y=h[2],x=g-y-a*v;(v||x)&&Xv(e,i)&&(f+=x,p+=v),i=i.parentNode}while(!u&&i!==document.body||u&&(t.contains(i)||t===i));return(m&&(f===0||!o)||!m&&(p===0||!o))&&(c=!0),c},So=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ku=function(e){return[e.deltaX,e.deltaY]},Xu=function(e){return e&&"current"in e?e.current:e},Lj=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Fj=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Hj=0,bn=[];function Bj(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),o=d.useState(Hj++)[0],a=d.useState(function(){return Vi()})[0],s=d.useRef(e);d.useEffect(function(){s.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var g=ga([e.lockRef.current],(e.shards||[]).map(Xu),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var i=d.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!s.current.allowPinchZoom;var x=So(g),S=n.current,E="deltaX"in g?g.deltaX:S[0]-x[0],w="deltaY"in g?g.deltaY:S[1]-x[1],C,_=g.target,N=Math.abs(E)>Math.abs(w)?"h":"v";if("touches"in g&&N==="h"&&_.type==="range")return!1;var T=Wu(N,_);if(!T)return!0;if(T?C=N:(C=N==="v"?"h":"v",T=Wu(N,_)),!T)return!1;if(!r.current&&"changedTouches"in g&&(E||w)&&(r.current=C),!C)return!0;var A=r.current||C;return Oj(A,y,g,A==="h"?E:w,!0)},[]),u=d.useCallback(function(g){var y=g;if(!(!bn.length||bn[bn.length-1]!==a)){var x="deltaY"in y?Ku(y):So(y),S=t.current.filter(function(C){return C.name===y.type&&C.target===y.target&&Lj(C.delta,x)})[0];if(S&&S.should){y.cancelable&&y.preventDefault();return}if(!S){var E=(s.current.shards||[]).map(Xu).filter(Boolean).filter(function(C){return C.contains(y.target)}),w=E.length>0?i(y,E[0]):!s.current.noIsolation;w&&y.cancelable&&y.preventDefault()}}},[]),c=d.useCallback(function(g,y,x,S){var E={name:g,delta:y,target:x,should:S};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(w){return w!==E})},1)},[]),m=d.useCallback(function(g){n.current=So(g),r.current=void 0},[]),f=d.useCallback(function(g){c(g.type,Ku(g),g.target,i(g,e.lockRef.current))},[]),p=d.useCallback(function(g){c(g.type,So(g),g.target,i(g,e.lockRef.current))},[]);d.useEffect(function(){return bn.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",u,yn),document.addEventListener("touchmove",u,yn),document.addEventListener("touchstart",m,yn),function(){bn=bn.filter(function(g){return g!==a}),document.removeEventListener("wheel",u,yn),document.removeEventListener("touchmove",u,yn),document.removeEventListener("touchstart",m,yn)}},[]);var h=e.removeScrollBar,v=e.inert;return d.createElement(d.Fragment,null,v?d.createElement(a,{styles:Fj(o)}):null,h?d.createElement(Ud,{gapMode:"margin"}):null)}const Vj=Vd(Wv,Bj);var qv=d.forwardRef(function(e,t){return d.createElement(za,_e({},e,{ref:t,sideCar:Vj}))});qv.classNames=za.classNames;const Qv="Dialog",[Zv,BI]=nj(Qv),[zj,fn]=Zv(Qv),Uj=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:s=!0}=e,i=d.useRef(null),u=d.useRef(null),[c=!1,m]=sj({prop:r,defaultProp:o,onChange:a});return d.createElement(zj,{scope:t,triggerRef:i,contentRef:u,contentId:Ps(),titleId:Ps(),descriptionId:Ps(),open:c,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(f=>!f),[m]),modal:s},n)},Jv="DialogPortal",[Gj,ex]=Zv(Jv,{forceMount:void 0}),Wj=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=fn(Jv,t);return d.createElement(Gj,{scope:t,forceMount:n},d.Children.map(r,s=>d.createElement(Va,{present:n||a.open},d.createElement(Tj,{asChild:!0,container:o},s))))},Mi="DialogOverlay",Kj=d.forwardRef((e,t)=>{const n=ex(Mi,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=fn(Mi,e.__scopeDialog);return a.modal?d.createElement(Va,{present:r||a.open},d.createElement(Xj,je({},o,{ref:t}))):null}),Xj=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=fn(Mi,n);return d.createElement(qv,{as:Hc,allowPinchZoom:!0,shards:[o.contentRef]},d.createElement(We.div,je({"data-state":nx(o.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),kr="DialogContent",Yj=d.forwardRef((e,t)=>{const n=ex(kr,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=fn(kr,e.__scopeDialog);return d.createElement(Va,{present:r||a.open},a.modal?d.createElement(qj,je({},o,{ref:t})):d.createElement(Qj,je({},o,{ref:t})))}),qj=d.forwardRef((e,t)=>{const n=fn(kr,e.__scopeDialog),r=d.useRef(null),o=to(t,n.contentRef,r);return d.useEffect(()=>{const a=r.current;if(a)return pa(a)},[]),d.createElement(tx,je({},e,{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:kn(e.onCloseAutoFocus,a=>{var s;a.preventDefault(),(s=n.triggerRef.current)===null||s===void 0||s.focus()}),onPointerDownOutside:kn(e.onPointerDownOutside,a=>{const s=a.detail.originalEvent,i=s.button===0&&s.ctrlKey===!0;(s.button===2||i)&&a.preventDefault()}),onFocusOutside:kn(e.onFocusOutside,a=>a.preventDefault())}))}),Qj=d.forwardRef((e,t)=>{const n=fn(kr,e.__scopeDialog),r=d.useRef(!1),o=d.useRef(!1);return d.createElement(tx,je({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s;if((s=e.onCloseAutoFocus)===null||s===void 0||s.call(e,a),!a.defaultPrevented){var i;r.current||(i=n.triggerRef.current)===null||i===void 0||i.focus(),a.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:a=>{var s,i;(s=e.onInteractOutside)===null||s===void 0||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=a.target;((i=n.triggerRef.current)===null||i===void 0?void 0:i.contains(u))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),tx=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...s}=e,i=fn(kr,n),u=d.useRef(null),c=to(t,u);return Dj(),d.createElement(d.Fragment,null,d.createElement(bj,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a},d.createElement(vj,je({role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":nx(i.open)},s,{ref:c,onDismiss:()=>i.onOpenChange(!1)}))),!1)});function nx(e){return e?"open":"closed"}const Zj=Uj,Jj=Wj,eM=Kj,tM=Yj;var ir='[cmdk-group=""]',$s='[cmdk-group-items=""]',nM='[cmdk-group-heading=""]',Bc='[cmdk-item=""]',Yu=`${Bc}:not([aria-disabled="true"])`,Ii="cmdk-item-select",Qt="data-value",rM=(e,t,n)=>ej(e,t,n),rx=d.createContext(void 0),no=()=>d.useContext(rx),ox=d.createContext(void 0),Vc=()=>d.useContext(ox),ax=d.createContext(void 0),sx=d.forwardRef((e,t)=>{let n=Cn(()=>{var O,H;return{search:"",value:(H=(O=e.value)!=null?O:e.defaultValue)!=null?H:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Cn(()=>new Set),o=Cn(()=>new Map),a=Cn(()=>new Map),s=Cn(()=>new Set),i=ix(e),{label:u,children:c,value:m,onValueChange:f,filter:p,shouldFilter:h,loop:v,disablePointerSelection:g=!1,vimBindings:y=!0,...x}=e,S=d.useId(),E=d.useId(),w=d.useId(),C=d.useRef(null),_=pM();ln(()=>{if(m!==void 0){let O=m.trim();n.current.value=O,N.emit()}},[m]),ln(()=>{_(6,D)},[]);let N=d.useMemo(()=>({subscribe:O=>(s.current.add(O),()=>s.current.delete(O)),snapshot:()=>n.current,setState:(O,H,U)=>{var z,Y,K;if(!Object.is(n.current[O],H)){if(n.current[O]=H,O==="search")R(),j(),_(1,k);else if(O==="value"&&(U||_(5,D),((z=i.current)==null?void 0:z.value)!==void 0)){let X=H??"";(K=(Y=i.current).onValueChange)==null||K.call(Y,X);return}N.emit()}},emit:()=>{s.current.forEach(O=>O())}}),[]),T=d.useMemo(()=>({value:(O,H,U)=>{var z;H!==((z=a.current.get(O))==null?void 0:z.value)&&(a.current.set(O,{value:H,keywords:U}),n.current.filtered.items.set(O,A(H,U)),_(2,()=>{j(),N.emit()}))},item:(O,H)=>(r.current.add(O),H&&(o.current.has(H)?o.current.get(H).add(O):o.current.set(H,new Set([O]))),_(3,()=>{R(),j(),n.current.value||k(),N.emit()}),()=>{a.current.delete(O),r.current.delete(O),n.current.filtered.items.delete(O);let U=b();_(4,()=>{R(),(U==null?void 0:U.getAttribute("id"))===O&&k(),N.emit()})}),group:O=>(o.current.has(O)||o.current.set(O,new Set),()=>{a.current.delete(O),o.current.delete(O)}),filter:()=>i.current.shouldFilter,label:u||e["aria-label"],disablePointerSelection:g,listId:S,inputId:w,labelId:E,listInnerRef:C}),[]);function A(O,H){var U,z;let Y=(z=(U=i.current)==null?void 0:U.filter)!=null?z:rM;return O?Y(O,n.current.search,H):0}function j(){if(!n.current.search||i.current.shouldFilter===!1)return;let O=n.current.filtered.items,H=[];n.current.filtered.groups.forEach(z=>{let Y=o.current.get(z),K=0;Y.forEach(X=>{let J=O.get(X);K=Math.max(J,K)}),H.push([z,K])});let U=C.current;I().sort((z,Y)=>{var K,X;let J=z.getAttribute("id"),se=Y.getAttribute("id");return((K=O.get(se))!=null?K:0)-((X=O.get(J))!=null?X:0)}).forEach(z=>{let Y=z.closest($s);Y?Y.appendChild(z.parentElement===Y?z:z.closest(`${$s} > *`)):U.appendChild(z.parentElement===U?z:z.closest(`${$s} > *`))}),H.sort((z,Y)=>Y[1]-z[1]).forEach(z=>{let Y=C.current.querySelector(`${ir}[${Qt}="${encodeURIComponent(z[0])}"]`);Y==null||Y.parentElement.appendChild(Y)})}function k(){let O=I().find(U=>U.getAttribute("aria-disabled")!=="true"),H=O==null?void 0:O.getAttribute(Qt);N.setState("value",H||void 0)}function R(){var O,H,U,z;if(!n.current.search||i.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Y=0;for(let K of r.current){let X=(H=(O=a.current.get(K))==null?void 0:O.value)!=null?H:"",J=(z=(U=a.current.get(K))==null?void 0:U.keywords)!=null?z:[],se=A(X,J);n.current.filtered.items.set(K,se),se>0&&Y++}for(let[K,X]of o.current)for(let J of X)if(n.current.filtered.items.get(J)>0){n.current.filtered.groups.add(K);break}n.current.filtered.count=Y}function D(){var O,H,U;let z=b();z&&(((O=z.parentElement)==null?void 0:O.firstChild)===z&&((U=(H=z.closest(ir))==null?void 0:H.querySelector(nM))==null||U.scrollIntoView({block:"nearest"})),z.scrollIntoView({block:"nearest"}))}function b(){var O;return(O=C.current)==null?void 0:O.querySelector(`${Bc}[aria-selected="true"]`)}function I(){var O;return Array.from((O=C.current)==null?void 0:O.querySelectorAll(Yu))}function P(O){let H=I()[O];H&&N.setState("value",H.getAttribute(Qt))}function L(O){var H;let U=b(),z=I(),Y=z.findIndex(X=>X===U),K=z[Y+O];(H=i.current)!=null&&H.loop&&(K=Y+O<0?z[z.length-1]:Y+O===z.length?z[0]:z[Y+O]),K&&N.setState("value",K.getAttribute(Qt))}function $(O){let H=b(),U=H==null?void 0:H.closest(ir),z;for(;U&&!z;)U=O>0?fM(U,ir):mM(U,ir),z=U==null?void 0:U.querySelector(Yu);z?N.setState("value",z.getAttribute(Qt)):L(O)}let M=()=>P(I().length-1),V=O=>{O.preventDefault(),O.metaKey?M():O.altKey?$(1):L(1)},G=O=>{O.preventDefault(),O.metaKey?P(0):O.altKey?$(-1):L(-1)};return d.createElement(We.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:O=>{var H;if((H=x.onKeyDown)==null||H.call(x,O),!O.defaultPrevented)switch(O.key){case"n":case"j":{y&&O.ctrlKey&&V(O);break}case"ArrowDown":{V(O);break}case"p":case"k":{y&&O.ctrlKey&&G(O);break}case"ArrowUp":{G(O);break}case"Home":{O.preventDefault(),P(0);break}case"End":{O.preventDefault(),M();break}case"Enter":if(!O.nativeEvent.isComposing&&O.keyCode!==229){O.preventDefault();let U=b();if(U){let z=new Event(Ii);U.dispatchEvent(z)}}}}},d.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:gM},u),Ua(e,O=>d.createElement(ox.Provider,{value:N},d.createElement(rx.Provider,{value:T},O))))}),oM=d.forwardRef((e,t)=>{var n,r;let o=d.useId(),a=d.useRef(null),s=d.useContext(ax),i=no(),u=ix(e),c=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;ln(()=>{if(!c)return i.item(o,s==null?void 0:s.id)},[c]);let m=cx(o,a,[e.value,e.children,a],e.keywords),f=Vc(),p=un(_=>_.value&&_.value===m.current),h=un(_=>c||i.filter()===!1?!0:_.search?_.filtered.items.get(o)>0:!0);d.useEffect(()=>{let _=a.current;if(!(!_||e.disabled))return _.addEventListener(Ii,v),()=>_.removeEventListener(Ii,v)},[h,e.onSelect,e.disabled]);function v(){var _,N;g(),(N=(_=u.current).onSelect)==null||N.call(_,m.current)}function g(){f.setState("value",m.current,!0)}if(!h)return null;let{disabled:y,value:x,onSelect:S,forceMount:E,keywords:w,...C}=e;return d.createElement(We.div,{ref:$r([a,t]),...C,id:o,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!p,"data-disabled":!!y,"data-selected":!!p,onPointerMove:y||i.disablePointerSelection?void 0:g,onClick:y?void 0:v},e.children)}),aM=d.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...a}=e,s=d.useId(),i=d.useRef(null),u=d.useRef(null),c=d.useId(),m=no(),f=un(h=>o||m.filter()===!1?!0:h.search?h.filtered.groups.has(s):!0);ln(()=>m.group(s),[]),cx(s,i,[e.value,e.heading,u]);let p=d.useMemo(()=>({id:s,forceMount:o}),[o]);return d.createElement(We.div,{ref:$r([i,t]),...a,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&d.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Ua(e,h=>d.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},d.createElement(ax.Provider,{value:p},h))))}),sM=d.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=d.useRef(null),a=un(s=>!s.search);return!n&&!a?null:d.createElement(We.div,{ref:$r([o,t]),...r,"cmdk-separator":"",role:"separator"})}),iM=d.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,a=Vc(),s=un(m=>m.search),i=un(m=>m.value),u=no(),c=d.useMemo(()=>{var m;let f=(m=u.listInnerRef.current)==null?void 0:m.querySelector(`${Bc}[${Qt}="${encodeURIComponent(i)}"]`);return f==null?void 0:f.getAttribute("id")},[]);return d.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),d.createElement(We.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":c,id:u.inputId,type:"text",value:o?e.value:s,onChange:m=>{o||a.setState("search",m.target.value),n==null||n(m.target.value)}})}),cM=d.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,a=d.useRef(null),s=d.useRef(null),i=no();return d.useEffect(()=>{if(s.current&&a.current){let u=s.current,c=a.current,m,f=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let p=u.offsetHeight;c.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return f.observe(u),()=>{cancelAnimationFrame(m),f.unobserve(u)}}},[]),d.createElement(We.div,{ref:$r([a,t]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:i.listId},Ua(e,u=>d.createElement("div",{ref:$r([s,i.listInnerRef]),"cmdk-list-sizer":""},u)))}),lM=d.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:a,container:s,...i}=e;return d.createElement(Zj,{open:n,onOpenChange:r},d.createElement(Jj,{container:s},d.createElement(eM,{"cmdk-overlay":"",className:o}),d.createElement(tM,{"aria-label":e.label,"cmdk-dialog":"",className:a},d.createElement(sx,{ref:t,...i}))))}),uM=d.forwardRef((e,t)=>un(n=>n.filtered.count===0)?d.createElement(We.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),dM=d.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...a}=e;return d.createElement(We.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Ua(e,s=>d.createElement("div",{"aria-hidden":!0},s)))}),$e=Object.assign(sx,{List:cM,Item:oM,Input:iM,Group:aM,Separator:sM,Dialog:lM,Empty:uM,Loading:dM});function fM(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function mM(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function ix(e){let t=d.useRef(e);return ln(()=>{t.current=e}),t}var ln=typeof window>"u"?d.useEffect:d.useLayoutEffect;function Cn(e){let t=d.useRef();return t.current===void 0&&(t.current=e()),t}function $r(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function un(e){let t=Vc(),n=()=>e(t.snapshot());return d.useSyncExternalStore(t.subscribe,n,n)}function cx(e,t,n,r=[]){let o=d.useRef(),a=no();return ln(()=>{var s;let i=(()=>{var c;for(let m of n){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(c=m.current.textContent)==null?void 0:c.trim():o.current}})(),u=r.map(c=>c.trim());a.value(e,i,u),(s=t.current)==null||s.setAttribute(Qt,i),o.current=i}),o}var pM=()=>{let[e,t]=d.useState(),n=Cn(()=>new Map);return ln(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function hM(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Ua({asChild:e,children:t},n){return e&&d.isValidElement(t)?d.cloneElement(hM(t),{ref:t.ref},n(t.props.children)):n(t)}var gM={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const lx=W.forwardRef(({className:e,...t},n)=>l.jsx($e,{ref:n,className:ne("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));lx.displayName=$e.displayName;const ux=W.forwardRef(({className:e,...t},n)=>l.jsxs("div",{className:"flex items-center border-b px-3","data-cmdk-input-wrapper":"",children:[l.jsx(u0,{className:"mr-2 size-4 shrink-0 opacity-50"}),l.jsx($e.Input,{ref:n,className:ne("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));ux.displayName=$e.Input.displayName;const dx=W.forwardRef(({className:e,...t},n)=>l.jsx($e.List,{ref:n,className:ne("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));dx.displayName=$e.List.displayName;const fx=W.forwardRef((e,t)=>l.jsx($e.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));fx.displayName=$e.Empty.displayName;const mx=W.forwardRef(({className:e,...t},n)=>l.jsx($e.Group,{ref:n,className:ne("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));mx.displayName=$e.Group.displayName;const vM=W.forwardRef(({className:e,...t},n)=>l.jsx($e.Separator,{ref:n,className:ne("-mx-1 h-px bg-border",e),...t}));vM.displayName=$e.Separator.displayName;const px=W.forwardRef(({className:e,...t},n)=>l.jsx($e.Item,{ref:n,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));px.displayName=$e.Item.displayName;var zc="Popover",[hx,VI]=ct(zc,[Kn]),ro=Kn(),[xM,zt]=hx(zc),gx=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:s=!1}=e,i=ro(t),u=d.useRef(null),[c,m]=d.useState(!1),[f=!1,p]=Ze({prop:r,defaultProp:o,onChange:a});return l.jsx(aa,{...i,children:l.jsx(xM,{scope:t,contentId:Qe(),triggerRef:u,open:f,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:c,onCustomAnchorAdd:d.useCallback(()=>m(!0),[]),onCustomAnchorRemove:d.useCallback(()=>m(!1),[]),modal:s,children:n})})};gx.displayName=zc;var vx="PopoverAnchor",yM=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=zt(vx,n),a=ro(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:i}=o;return d.useEffect(()=>(s(),()=>i()),[s,i]),l.jsx(ra,{...a,...r,ref:t})});yM.displayName=vx;var xx="PopoverTrigger",yx=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=zt(xx,n),a=ro(n),s=xe(t,o.triggerRef),i=l.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Cx(o.open),...r,ref:s,onClick:Z(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?i:l.jsx(ra,{asChild:!0,...a,children:i})});yx.displayName=xx;var Uc="PopoverPortal",[bM,wM]=hx(Uc,{forceMount:void 0}),bx=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=zt(Uc,t);return l.jsx(bM,{scope:t,forceMount:n,children:l.jsx(Re,{present:n||a.open,children:l.jsx(Fr,{asChild:!0,container:o,children:r})})})};bx.displayName=Uc;var Wn="PopoverContent",wx=d.forwardRef((e,t)=>{const n=wM(Wn,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=zt(Wn,e.__scopePopover);return l.jsx(Re,{present:r||a.open,children:a.modal?l.jsx(EM,{...o,ref:t}):l.jsx(SM,{...o,ref:t})})});wx.displayName=Wn;var EM=d.forwardRef((e,t)=>{const n=zt(Wn,e.__scopePopover),r=d.useRef(null),o=xe(t,r),a=d.useRef(!1);return d.useEffect(()=>{const s=r.current;if(s)return pa(s)},[]),l.jsx(xa,{as:yr,allowPinchZoom:!0,children:l.jsx(Ex,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(e.onCloseAutoFocus,s=>{var i;s.preventDefault(),a.current||(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Z(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,u=i.button===0&&i.ctrlKey===!0,c=i.button===2||u;a.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Z(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),SM=d.forwardRef((e,t)=>{const n=zt(Wn,e.__scopePopover),r=d.useRef(!1),o=d.useRef(!1);return l.jsx(Ex,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,i;(s=e.onCloseAutoFocus)==null||s.call(e,a),a.defaultPrevented||(r.current||(i=n.triggerRef.current)==null||i.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=a.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),Ex=d.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:m,...f}=e,p=zt(Wn,n),h=ro(n);return Hi(),l.jsx(ua,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:l.jsx(oa,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:m,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:l.jsx(Oi,{"data-state":Cx(p.open),role:"dialog",id:p.contentId,...h,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Sx="PopoverClose",CM=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=zt(Sx,n);return l.jsx(le.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,()=>o.onOpenChange(!1))})});CM.displayName=Sx;var _M="PopoverArrow",NM=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=ro(n);return l.jsx(Li,{...o,...r,ref:t})});NM.displayName=_M;function Cx(e){return e?"open":"closed"}var TM=gx,RM=yx,AM=bx,_x=wx;const DM=TM,PM=RM,Nx=W.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>l.jsx(AM,{children:l.jsx(_x,{ref:o,align:t,sideOffset:n,className:ne("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Nx.displayName=_x.displayName;const en=d.forwardRef(({inputPlaceholder:e,emptyPlaceholder:t,placeholder:n,className:r,options:o,value:a,onChange:s,multiple:i,oneLine:u,selectAll:c,deselectAll:m,clearText:f,showClear:p,keepOrder:h,disabled:v,open:g,onOpenChange:y},x)=>{var D;const[S,E]=d.useState(""),[w,C]=d.useState(g??!1),{t:_}=Te();d.useEffect(()=>{C(g??!1)},[g]);const N=d.useCallback(b=>{y==null||y(b),C(b)},[y]),T=d.useCallback(b=>{if(i){const I=a!=null&&a.includes(b)&&Array.isArray(a)?a.filter(P=>P!==b):[...a??[],b];s==null||s(I)}else s==null||s(b),C(!1)},[i,s,a]),A=d.useCallback(()=>{i&&(s==null||s(i?[]:""))},[i,s]),j=d.useCallback(()=>{if(!i)return;const b=o.map(I=>I.value);s==null||s(b)},[i,s,o]),k=d.useMemo(()=>o.filter(b=>Array.isArray(a)&&a.includes(b.value)).sort((b,I)=>h&&Array.isArray(a)?a.indexOf(b.value)-a.indexOf(I.value):0).map(b=>l.jsxs("span",{className:`inline-flex min-w-0 shrink-0 items-center gap-1 rounded-md border py-0.5 pl-2 pr-1 text-xs font-medium text-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ${u?"mx-0.5":""}`,children:[l.jsx("span",{children:b.label}),l.jsx("span",{onClick:I=>{I.preventDefault(),T(b.value)},className:"flex items-center rounded-sm px-px text-muted-foreground/60 hover:bg-accent hover:text-muted-foreground",children:l.jsx(An,{})})]},b.value)),[o,a,T,u,h]),R=d.useMemo(()=>i&&Array.isArray(a)&&o.every(b=>a.includes(b.value)),[o,a,i]);return l.jsxs(DM,{open:w,onOpenChange:N,modal:!0,children:[l.jsx(PM,{asChild:!0,children:l.jsxs("div",{className:ne(`flex min-h-[36px] cursor-pointer items-center justify-between rounded-md border px-3 py-1 data-[state=open]:border-ring ${v?"bg-muted pointer-events-none":""}`,r),children:[l.jsx("div",{className:ne("items-center gap-1 overflow-hidden text-sm",i?"flex flex-grow flex-wrap":"inline-flex whitespace-nowrap"),children:a&&a.length>0?i?u?l.jsx("div",{className:"block w-full min-w-0 shrink-0 truncate",children:k}):k:l.jsx("div",{className:"block w-full min-w-0 shrink-0 truncate",children:(D=o.find(b=>b.value===a))==null?void 0:D.label}):l.jsx("span",{className:"mr-auto text-muted-foreground",children:n})}),l.jsx("div",{className:"flex items-center self-stretch pl-1 text-muted-foreground/60 hover:text-foreground [&>div]:flex [&>div]:items-center [&>div]:self-stretch",children:a&&a.length>0&&i&&p?l.jsx("div",{onClick:b=>{b.preventDefault(),A()},children:f?l.jsx("span",{className:"text-xs",children:f}):l.jsx(An,{className:"size-3.5"})}):l.jsx("div",{children:l.jsx(Jy,{className:"size-4"})})})]})}),l.jsx(Nx,{className:"w-fit min-w-[var(--radix-popover-trigger-width)] p-0",align:"center",children:l.jsxs(lx,{filter:(b,I)=>b.toLowerCase().includes(I.toLowerCase())?1:0,children:[l.jsxs("div",{className:"relative",children:[l.jsx(ux,{value:S,onValueChange:b=>E(b),ref:x,placeholder:e??"Search...",className:"h-9"}),S&&l.jsx("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3 text-muted-foreground hover:text-foreground",onClick:()=>E(""),children:l.jsx(An,{className:"size-4"})}),!S&&i&&c&&!R&&l.jsx("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3 text-xs text-muted-foreground hover:text-foreground",onClick:b=>{b.preventDefault(),j()},children:_("select_all")}),!S&&i&&m&&R&&l.jsx("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3 text-xs text-muted-foreground hover:text-foreground",onClick:b=>{b.preventDefault(),A()},children:_("deselect_all")})]}),l.jsx(fx,{children:t??"No results found."}),l.jsx(Fc,{children:l.jsx("div",{className:"max-h-64 w-full",children:l.jsx(mx,{children:l.jsx(dx,{className:"max-h-fit w-full",children:o.map(b=>{const I=Array.isArray(a)&&a.includes(b.value);return l.jsxs(px,{className:"flex items-center",onSelect:()=>T(b.value),children:[i&&l.jsx("div",{className:ne("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",I?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:l.jsx(Us,{})}),l.jsxs("div",{className:"flex items-center truncate",children:[l.jsx("span",{children:b.label}),b.description&&l.jsx("span",{className:"ml-1 text-xs text-muted-foreground",children:b.description})]}),!i&&b.value===a&&l.jsx(Us,{className:ne("ml-auto",b.value===a?"opacity-100":"opacity-0")})]},b.value)})})})})})]})})]})});en.displayName="SelectBox";const jM=[{name:"bigint",id:"bigint"},{name:"binary",id:"binary"},{name:"blob",id:"blob"},{name:"boolean",id:"boolean"},{name:"char",id:"char"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"decimal",id:"decimal"},{name:"double",id:"double"},{name:"enum",id:"enum"},{name:"float",id:"float"},{name:"int",id:"int"},{name:"json",id:"json"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"set",id:"set"},{name:"smallint",id:"smallint"},{name:"text",id:"text"},{name:"time",id:"time"},{name:"timestamp",id:"timestamp"},{name:"uuid",id:"uuid"},{name:"varbinary",id:"varbinary"},{name:"varchar",id:"varchar"}],MM=[{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"int",id:"int"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"boolean",id:"boolean"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"timestamp",id:"timestamp"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char"},{name:"varchar",id:"varchar"},{name:"binary",id:"binary"},{name:"varbinary",id:"varbinary"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"},{name:"json",id:"json"}],IM=[{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"int",id:"int"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"boolean",id:"boolean"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"timestamp",id:"timestamp"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char"},{name:"varchar",id:"varchar"},{name:"binary",id:"binary"},{name:"varbinary",id:"varbinary"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"},{name:"json",id:"json"}],kM=[{name:"smallint",id:"smallint"},{name:"integer",id:"integer"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"double precision",id:"double_precision"},{name:"smallserial",id:"smallserial"},{name:"serial",id:"serial"},{name:"bigserial",id:"bigserial"},{name:"money",id:"money"},{name:"char",id:"char"},{name:"varchar",id:"varchar"},{name:"character varying",id:"character_varying"},{name:"text",id:"text"},{name:"bytea",id:"bytea"},{name:"date",id:"date"},{name:"timestamp",id:"timestamp"},{name:"timestamp with time zone",id:"timestamp_with_time_zone"},{name:"timestamp without time zone",id:"timestamp_without_time_zone"},{name:"time",id:"time"},{name:"time with time zone",id:"time_with_time_zone"},{name:"time without time zone",id:"time_without_time_zone"},{name:"interval",id:"interval"},{name:"boolean",id:"boolean"},{name:"enum",id:"enum"},{name:"point",id:"point"},{name:"line",id:"line"},{name:"lseg",id:"lseg"},{name:"box",id:"box"},{name:"path",id:"path"},{name:"polygon",id:"polygon"},{name:"circle",id:"circle"},{name:"cidr",id:"cidr"},{name:"inet",id:"inet"},{name:"macaddr",id:"macaddr"},{name:"macaddr8",id:"macaddr8"},{name:"bit",id:"bit"},{name:"bit varying",id:"bit_varying"},{name:"tsvector",id:"tsvector"},{name:"tsquery",id:"tsquery"},{name:"uuid",id:"uuid"},{name:"xml",id:"xml"},{name:"json",id:"json"},{name:"jsonb",id:"jsonb"},{name:"array",id:"array"},{name:"int4range",id:"int4range"},{name:"int8range",id:"int8range"},{name:"numrange",id:"numrange"},{name:"tsrange",id:"tsrange"},{name:"tstzrange",id:"tstzrange"},{name:"daterange",id:"daterange"},{name:"oid",id:"oid"},{name:"regproc",id:"regproc"},{name:"regprocedure",id:"regprocedure"},{name:"regoper",id:"regoper"},{name:"regoperator",id:"regoperator"},{name:"regclass",id:"regclass"},{name:"regtype",id:"regtype"},{name:"regrole",id:"regrole"},{name:"regnamespace",id:"regnamespace"},{name:"regconfig",id:"regconfig"},{name:"regdictionary",id:"regdictionary"},{name:"user-defined",id:"user-defined"}],$M=[{name:"bigint",id:"bigint"},{name:"bit",id:"bit"},{name:"decimal",id:"decimal"},{name:"int",id:"int"},{name:"money",id:"money"},{name:"numeric",id:"numeric"},{name:"smallint",id:"smallint"},{name:"smallmoney",id:"smallmoney"},{name:"tinyint",id:"tinyint"},{name:"float",id:"float"},{name:"real",id:"real"},{name:"date",id:"date"},{name:"datetime2",id:"datetime2"},{name:"datetime",id:"datetime"},{name:"datetimeoffset",id:"datetimeoffset"},{name:"smalldatetime",id:"smalldatetime"},{name:"time",id:"time"},{name:"char",id:"char"},{name:"varchar",id:"varchar"},{name:"text",id:"text"},{name:"nchar",id:"nchar"},{name:"nvarchar",id:"nvarchar"},{name:"ntext",id:"ntext"},{name:"binary",id:"binary"},{name:"varbinary",id:"varbinary"},{name:"image",id:"image"},{name:"cursor",id:"cursor"},{name:"hierarchyid",id:"hierarchyid"},{name:"sql_variant",id:"sql_variant"},{name:"timestamp",id:"timestamp"},{name:"uniqueidentifier",id:"uniqueidentifier"},{name:"xml",id:"xml"},{name:"geometry",id:"geometry"},{name:"geography",id:"geography"},{name:"json",id:"json"}],OM=[{name:"integer",id:"integer"},{name:"real",id:"real"},{name:"numeric",id:"numeric"},{name:"text",id:"text"},{name:"blob",id:"blob"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"int",id:"int"},{name:"float",id:"float"},{name:"boolean",id:"boolean"},{name:"varchar",id:"varchar"},{name:"decimal",id:"decimal"}],zI={[te.GENERIC]:jM,[te.POSTGRESQL]:kM,[te.MYSQL]:IM,[te.SQL_SERVER]:$M,[te.MARIADB]:MM,[te.SQLITE]:OM},LM={[te.POSTGRESQL]:{serial:["integer"],smallserial:["smallint"],bigserial:["bigint"]},[te.MYSQL]:{int:["integer"],tinyint:["boolean"]},[te.SQL_SERVER]:{},[te.MARIADB]:{},[te.SQLITE]:{},[te.GENERIC]:{}};function FM(e,t,n){var o,a;if(e.id===t.id)return!0;const r=LM[n]||{};return((o=r[e.id])==null?void 0:o.includes(t.id))||((a=r[t.id])==null?void 0:a.includes(e.id))}const HM="Relationships can only be created between fields of the same type",BM=({dialog:e})=>{const{closeCreateRelationshipDialog:t}=Ue(),[n,r]=d.useState(),[o,a]=d.useState(),[s,i]=d.useState(),[u,c]=d.useState(),[m,f]=d.useState(""),{t:p}=Te(),{tables:h,getTable:v,createRelationship:g,getField:y}=ze(),{openRelationshipFromSidebar:x}=Ji(),[S,E]=d.useState(!1),{fitView:w,setEdges:C}=qn(),{databaseType:_}=ze(),N=d.useMemo(()=>h.map(k=>({label:k.name,value:k.id})),[h]),T=d.useMemo(()=>{if(!n)return[];const k=v(n);return k?k.fields.map(R=>({label:R.name,value:R.id,description:`(${R.type.name})`})):[]},[n,v]),A=d.useMemo(()=>{if(!s)return[];const k=v(s);return k?k.fields.map(R=>({label:R.name,value:R.id,description:`(${R.type.name})`})):[]},[s,v]);d.useEffect(()=>{e.open&&(r(void 0),a(void 0),i(void 0),c(void 0),f(""))},[e.open]),d.useEffect(()=>{if(E(!1),f(""),!n||!o||!s||!u)return;const k=y(n,o),R=y(s,u);if(!(!k||!R)){if(!FM(k.type,R.type,_)){f(HM);return}E(!0)}},[n,o,s,u,f,y,_]);const j=d.useCallback(async()=>{if(!n||!o||!s||!u)return;const k=await g({sourceFieldId:o,sourceTableId:n,targetFieldId:u,targetTableId:s});C(R=>R.map(D=>D.id==k.id?{...D,selected:!0}:{...D,selected:!1})),w({duration:500,maxZoom:1,minZoom:1,nodes:[{id:k.sourceTableId},{id:k.targetTableId}]}),x(k.id)},[n,o,s,u,g,x,C,w]);return l.jsx(lt,{...e,onOpenChange:k=>{k||t()},children:l.jsxs(tt,{className:"flex flex-col overflow-y-auto",showClose:!0,children:[l.jsx(Nt,{children:l.jsx(ut,{children:p("create_relationship_dialog.title")})}),l.jsxs("div",{className:"flex flex-col gap-4 pt-3",children:[l.jsxs("div",{className:"flex flex-row justify-between gap-2",children:[l.jsxs("div",{className:"flex flex-1 basis-1/2 flex-col gap-2 overflow-hidden",children:[l.jsxs("div",{className:"flex gap-1 text-xs",children:[l.jsx(Vw,{className:"size-4 text-subtitle"}),l.jsx("div",{className:"font-bold text-subtitle",children:p("create_relationship_dialog.primary_table")})]}),l.jsx("div",{className:"flex min-w-0 grow-0",children:l.jsx(en,{className:"flex h-8 min-h-8 w-full",options:N,placeholder:p("create_relationship_dialog.primary_table_placeholder"),value:n,onChange:k=>{r(k),a(void 0)},emptyPlaceholder:p("create_relationship_dialog.no_tables_found")})})]}),l.jsxs("div",{className:"flex flex-1 basis-1/2 flex-col gap-2 overflow-hidden",children:[l.jsxs("div",{className:"flex gap-1 text-xs",children:[l.jsx(ml,{className:"size-4 text-subtitle"}),l.jsx("div",{className:"font-bold text-subtitle",children:p("create_relationship_dialog.primary_field")})]}),l.jsx("div",{children:l.jsx("div",{className:"flex min-w-0 grow-0",children:l.jsx(en,{disabled:T.length===0,className:"flex h-8 min-h-8 w-full min-w-0",options:T,placeholder:p("create_relationship_dialog.primary_field_placeholder"),value:o,onChange:k=>a(k),emptyPlaceholder:p("create_relationship_dialog.no_fields_found")})})})]})]}),l.jsxs("div",{className:"flex flex-row justify-between gap-2",children:[l.jsxs("div",{className:"flex flex-1 basis-1/2 flex-col gap-2 overflow-hidden",children:[l.jsxs("div",{className:"flex gap-1 text-xs",children:[l.jsx(Bw,{className:"size-4 text-subtitle"}),l.jsx("div",{className:"font-bold text-subtitle",children:p("create_relationship_dialog.referenced_table")})]}),l.jsx("div",{className:"flex min-w-0 grow-0",children:l.jsx(en,{className:"flex h-8 min-h-8 w-full",options:N,placeholder:p("create_relationship_dialog.referenced_table_placeholder"),value:s,onChange:k=>{i(k),c(void 0)},emptyPlaceholder:p("create_relationship_dialog.no_tables_found")})})]}),l.jsxs("div",{className:"flex flex-1 basis-1/2 flex-col gap-2 overflow-hidden",children:[l.jsxs("div",{className:"flex gap-1 text-xs",children:[l.jsx(ml,{className:"size-4 text-subtitle"}),l.jsx("div",{className:"font-bold text-subtitle",children:p("create_relationship_dialog.referenced_field")})]}),l.jsx("div",{children:l.jsx("div",{className:"flex min-w-0 grow-0",children:l.jsx(en,{disabled:A.length===0,className:"flex h-8 min-h-8 w-full min-w-0",options:A,placeholder:p("create_relationship_dialog.referenced_field_placeholder"),value:u,onChange:k=>c(k),emptyPlaceholder:p("create_relationship_dialog.no_fields_found")})})})]})]}),l.jsx("p",{className:"mt-2 text-sm text-red-700",children:m})]}),l.jsxs(Tt,{className:"flex !justify-between gap-2",children:[l.jsx(ke,{asChild:!0,children:l.jsx(we,{type:"button",variant:"secondary",children:p("create_relationship_dialog.cancel")})}),l.jsx(ke,{asChild:!0,children:l.jsx(we,{disabled:!S,type:"button",onClick:j,children:p("create_relationship_dialog.create")})})]})]})})},VM=({dialog:e,databaseType:t})=>{const{closeImportDatabaseDialog:n,showAlert:r}=Ue(),{tables:o,relationships:a,removeTables:s,removeRelationships:i,addTables:u,addRelationships:c,diagramName:m}=ze(),[f,p]=d.useState(""),{resetRedoStack:h,resetUndoStack:v}=wa(),{setNodes:g}=qn(),{t:y}=Te(),[x,S]=d.useState();d.useEffect(()=>{e.open&&(S(void 0),p(""))},[e.open]);const E=d.useCallback(async()=>{var k,R;const w=ig(f),C=await sg({databaseType:t,databaseMetadata:w,databaseEdition:(x==null?void 0:x.trim().length)===0?void 0:x}),_=o.filter(D=>{var b;return(b=C.tables)==null?void 0:b.some(I=>I.name===D.name&&I.schema===D.schema)}).map(D=>D.id),N=a.filter(D=>{var V,G,O;const b=o.find(H=>H.id===D.sourceTableId),I=o.find(H=>H.id===D.targetTableId);if(!b||!I)return!0;const P=b.fields.find(H=>H.id===D.sourceFieldId),L=I.fields.find(H=>H.id===D.targetFieldId);if(!P||!L)return!0;const $=(V=C.tables)==null?void 0:V.find(H=>H.name===b.name&&H.schema===b.schema),M=(G=C.tables)==null?void 0:G.find(H=>H.name===I.name&&H.schema===I.schema);return $&&!$.fields.some(H=>H.name===P.name)||M&&!M.fields.some(H=>H.name===L.name)?!0:(O=C.relationships)==null?void 0:O.some(H=>{var X,J;const U=(X=C.tables)==null?void 0:X.find(se=>se.id===H.sourceTableId),z=(J=C.tables)==null?void 0:J.find(se=>se.id===H.targetTableId),Y=U==null?void 0:U.fields.find(se=>se.id===H.sourceFieldId),K=z==null?void 0:z.fields.find(se=>se.id===H.targetFieldId);return P.name===(Y==null?void 0:Y.name)&&b.name===(U==null?void 0:U.name)&&b.schema===(U==null?void 0:U.schema)&&L.name===(K==null?void 0:K.name)&&I.name===(z==null?void 0:z.name)&&I.schema===(z==null?void 0:z.schema)})}).map(D=>D.id),T=(k=C.relationships)==null?void 0:k.filter(D=>{var $,M;const b=($=C.tables)==null?void 0:$.find(V=>V.id===D.sourceTableId),I=(M=C.tables)==null?void 0:M.find(V=>V.id===D.targetTableId),P=b==null?void 0:b.fields.find(V=>V.id===D.sourceFieldId),L=I==null?void 0:I.fields.find(V=>V.id===D.targetFieldId);return!a.some(V=>{const G=o.find(z=>z.id===V.sourceTableId),O=o.find(z=>z.id===V.targetTableId),H=G==null?void 0:G.fields.find(z=>z.id===V.sourceFieldId),U=O==null?void 0:O.fields.find(z=>z.id===V.targetFieldId);return(H==null?void 0:H.name)===(P==null?void 0:P.name)&&(G==null?void 0:G.name)===(b==null?void 0:b.name)&&(G==null?void 0:G.schema)===(b==null?void 0:b.schema)&&(U==null?void 0:U.name)===(L==null?void 0:L.name)&&(O==null?void 0:O.name)===(I==null?void 0:I.name)&&(O==null?void 0:O.schema)===(I==null?void 0:I.schema)})}).length,A=(R=C.tables)==null?void 0:R.filter(D=>!o.some(b=>b.name===D.name&&b.schema===D.schema)).length;await new Promise(D=>{if(_.length===0&&N.length===0&&A===0&&T===0){D(!0);return}const b=l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"!mb-2",children:y("import_database_dialog.override_alert.content.alert")}),A??!1?l.jsx("div",{className:"!m-0 text-blue-500",children:l.jsx(pr,{i18nKey:"import_database_dialog.override_alert.content.new_tables",values:{newTablesNumber:A},components:{bold:l.jsx("span",{className:"font-bold"})}})}):null,T??!1?l.jsx("div",{className:"!m-0 text-blue-500",children:l.jsx(pr,{i18nKey:"import_database_dialog.override_alert.content.new_relationships",values:{newRelationshipsNumber:T},components:{bold:l.jsx("span",{className:"font-bold"})}})}):null,_.length>0&&l.jsx("div",{className:"!m-0 text-red-500",children:l.jsx(pr,{i18nKey:"import_database_dialog.override_alert.content.tables_override",values:{tablesOverrideNumber:_.length},components:{bold:l.jsx("span",{className:"font-bold"})}})}),l.jsx("div",{className:"!mt-2",children:y("import_database_dialog.override_alert.content.proceed")})]});r({title:y("import_database_dialog.override_alert.title"),content:b,actionLabel:y("import_database_dialog.override_alert.import"),closeLabel:y("import_database_dialog.override_alert.cancel"),onAction:()=>D(!0),onClose:()=>D(!1)})})&&(await Promise.all([s(_,{updateHistory:!1}),i(N,{updateHistory:!1})]),await Promise.all([u(C.tables??[],{updateHistory:!1}),c(C.relationships??[],{updateHistory:!1})]),g(D=>D.map(b=>{var I;return{...b,selected:((I=C.tables)==null?void 0:I.some(P=>P.id===b.id))??!1}})),h(),v(),n())},[x,t,f,o,c,u,n,a,i,s,h,v,r,g,y]);return l.jsx(lt,{...e,onOpenChange:w=>{w||n()},children:l.jsx(tt,{className:"flex max-h-[90vh] w-[90vw] flex-col overflow-y-auto md:overflow-visible xl:min-w-[45vw]",showClose:!0,children:l.jsx(Qg,{databaseType:t,databaseEdition:x,setDatabaseEdition:S,onImport:E,scriptResult:f,setScriptResult:p,keepDialogAfterImport:!0,title:y("import_database_dialog.title",{diagramName:m})})})})},zM=({dialog:e,table:t,schemas:n,onConfirm:r})=>{var m;const{t:o}=Te(),[a,s]=W.useState(t!=null&&t.schema?$n(t.schema):((m=n==null?void 0:n[0])==null?void 0:m.id)??"");d.useEffect(()=>{var f;e.open&&s(t!=null&&t.schema?$n(t.schema):((f=n==null?void 0:n[0])==null?void 0:f.id)??"")},[e.open,n,t==null?void 0:t.schema]);const{closeTableSchemaDialog:i}=Ue(),u=d.useCallback(()=>{r(a)},[r,a]),c=d.useMemo(()=>n.map(f=>({value:f.id,label:f.name})),[n]);return l.jsx(lt,{...e,onOpenChange:f=>{f||i()},children:l.jsxs(tt,{className:"flex flex-col",showClose:!0,children:[l.jsxs(Nt,{children:[l.jsx(ut,{children:o(t?"update_table_schema_dialog.title":"new_table_schema_dialog.title")}),l.jsx(dt,{children:t?o("update_table_schema_dialog.description",{tableName:t.name}):o("new_table_schema_dialog.description")})]}),l.jsx("div",{className:"grid gap-4 py-1",children:l.jsx("div",{className:"grid w-full items-center gap-4",children:l.jsx(en,{options:c,multiple:!1,value:a,onChange:f=>s(f)})})}),l.jsxs(Tt,{className:"flex gap-1 md:justify-between",children:[l.jsx(ke,{asChild:!0,children:l.jsx(we,{variant:"secondary",children:o(t?"update_table_schema_dialog.cancel":"new_table_schema_dialog.cancel")})}),l.jsx(ke,{asChild:!0,children:l.jsx(we,{onClick:u,children:o(t?"update_table_schema_dialog.confirm":"new_table_schema_dialog.confirm")})})]})]})})},UM="/assets/star-us-Cg_Tox7m.gif",GM=({dialog:e})=>{const{t}=Te(),{setGithubRepoOpened:n}=ia();d.useEffect(()=>{e.open},[e.open]);const{closeStarUsDialog:r}=Ue(),o=d.useCallback(()=>{n(!0),window.open("https://github.com/chartdb/chartdb","_blank")},[n]);return l.jsx(lt,{...e,onOpenChange:a=>{a||r()},children:l.jsxs(tt,{className:"flex flex-col",showClose:!0,children:[l.jsxs(Nt,{children:[l.jsx(ut,{children:t("star_us_dialog.title")}),l.jsx(dt,{children:t("star_us_dialog.description")})]}),l.jsx("div",{className:"flex",children:l.jsx(Ir,{src:UM})}),l.jsxs(Tt,{className:"flex gap-1 md:justify-between",children:[l.jsx(ke,{asChild:!0,children:l.jsx(we,{variant:"secondary",children:t("star_us_dialog.close")})}),l.jsx(ke,{asChild:!0,children:l.jsx(we,{onClick:o,children:t("star_us_dialog.confirm")})})]})]})})},qu="2",WM=({dialog:e,format:t})=>{const{t:n}=Te(),[r,o]=d.useState(qu),{exportImage:a}=Zf();d.useEffect(()=>{e.open&&o(qu)},[e.open]);const{closeExportImageDialog:s}=Ue(),i=d.useCallback(()=>{a(t,Number(r))},[a,t,r]),u=d.useMemo(()=>["1","2","3","4"].map(c=>({value:c,label:n(`export_image_dialog.scale_${c}x`)})),[n]);return l.jsx(lt,{...e,onOpenChange:c=>{c||s()},children:l.jsxs(tt,{className:"flex flex-col",showClose:!0,children:[l.jsxs(Nt,{children:[l.jsx(ut,{children:n("export_image_dialog.title")}),l.jsx(dt,{children:n("export_image_dialog.description")})]}),l.jsx("div",{className:"grid gap-4 py-1",children:l.jsx("div",{className:"grid w-full items-center gap-4",children:l.jsx(en,{options:u,multiple:!1,value:r,onChange:c=>o(c)})})}),l.jsxs(Tt,{className:"flex gap-1 md:justify-between",children:[l.jsx(ke,{asChild:!0,children:l.jsx(we,{variant:"secondary",children:n("export_image_dialog.cancel")})}),l.jsx(ke,{asChild:!0,children:l.jsx(we,{onClick:i,children:n("export_image_dialog.export")})})]})]})})},KM=({children:e})=>{const[t,n]=d.useState(!1),[r,o]=d.useState(!1),[a,s]=d.useState(!1),[i,u]=d.useState(!1),[c,m]=d.useState(!1),[f,p]=d.useState({format:"png"}),h=d.useCallback(M=>{p(M),m(!0)},[m]),[v,g]=d.useState(!1),[y,x]=d.useState({targetDatabaseType:te.GENERIC}),S=d.useCallback(({targetDatabaseType:M})=>{x({targetDatabaseType:M}),g(!0)},[g]),[E,w]=d.useState(!1),[C,_]=d.useState({databaseType:te.GENERIC}),N=d.useCallback(({databaseType:M})=>{_({databaseType:M}),w(!0)},[w]),[T,A]=d.useState(!1),[j,k]=d.useState({schemas:[],onConfirm:q}),R=d.useCallback(M=>{k(M),A(!0)},[A]),[D,b]=d.useState(!1),[I,P]=d.useState({title:""}),L=d.useCallback(M=>{P(M),b(!0)},[b,P]),$=d.useCallback(()=>{b(!1)},[b]);return l.jsxs(qf.Provider,{value:{openCreateDiagramDialog:()=>n(!0),closeCreateDiagramDialog:()=>n(!1),openOpenDiagramDialog:()=>o(!0),closeOpenDiagramDialog:()=>o(!1),openExportSQLDialog:S,closeExportSQLDialog:()=>g(!1),showAlert:L,closeAlert:$,openCreateRelationshipDialog:()=>s(!0),closeCreateRelationshipDialog:()=>s(!1),openImportDatabaseDialog:N,closeImportDatabaseDialog:()=>w(!1),openTableSchemaDialog:R,closeTableSchemaDialog:()=>A(!1),openStarUsDialog:()=>u(!0),closeStarUsDialog:()=>u(!1),closeExportImageDialog:()=>m(!1),openExportImageDialog:h},children:[e,l.jsx(lP,{dialog:{open:t}}),l.jsx(TP,{dialog:{open:r}}),l.jsx(PP,{dialog:{open:v},...y}),l.jsx(GP,{dialog:{open:D},...I}),l.jsx(BM,{dialog:{open:a}}),l.jsx(VM,{dialog:{open:E},...C}),l.jsx(zM,{dialog:{open:T},...j}),l.jsx(GM,{dialog:{open:i}}),l.jsx(WM,{dialog:{open:c},...f})]})},XM=d.createContext({});function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ki.apply(null,arguments)}var Tx=["shift","alt","meta","mod","ctrl"],YM={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Lt(e){return(e&&YM[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function qM(e){return Tx.includes(e)}function Os(e,t){return t===void 0&&(t=","),e.split(t)}function Ls(e,t,n){t===void 0&&(t="+");var r=e.toLocaleLowerCase().split(t).map(function(s){return Lt(s)}),o={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},a=r.filter(function(s){return!Tx.includes(s)});return ki({},o,{keys:a,description:n})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&Rx([Lt(e.key),Lt(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&Ax([Lt(e.key),Lt(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){Ft.clear()})})();var Ft=new Set;function Gc(e){return Array.isArray(e)}function QM(e,t){t===void 0&&(t=",");var n=Gc(e)?e:e.split(t);return n.every(function(r){return Ft.has(r.trim().toLowerCase())})}function Rx(e){var t=Array.isArray(e)?e:[e];Ft.has("meta")&&Ft.forEach(function(n){return!qM(n)&&Ft.delete(n.toLowerCase())}),t.forEach(function(n){return Ft.add(n.toLowerCase())})}function Ax(e){var t=Array.isArray(e)?e:[e];e==="meta"?Ft.clear():t.forEach(function(n){return Ft.delete(n.toLowerCase())})}function ZM(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function JM(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function eI(e){return Dx(e,["input","textarea","select"])}function Dx(e,t){var n=e.target;t===void 0&&(t=!1);var r=n&&n.tagName;return Gc(t)?!!(r&&t&&t.some(function(o){return o.toLowerCase()===r.toLowerCase()})):!!(r&&t&&t===!0)}function tI(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(function(n){return t.includes(n)})||e.includes("*"):!0}var nI=function(t,n,r){r===void 0&&(r=!1);var o=n.alt,a=n.meta,s=n.mod,i=n.shift,u=n.ctrl,c=n.keys,m=t.key,f=t.code,p=t.ctrlKey,h=t.metaKey,v=t.shiftKey,g=t.altKey,y=Lt(f),x=m.toLowerCase();if(!(c!=null&&c.includes(y))&&!(c!=null&&c.includes(x))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(y))return!1;if(!r){if(o===!g&&x!=="alt"||i===!v&&x!=="shift")return!1;if(s){if(!h&&!p)return!1}else if(a===!h&&x!=="meta"&&x!=="os"||u===!p&&x!=="ctrl"&&x!=="control")return!1}return c&&c.length===1&&(c.includes(x)||c.includes(y))?!0:c?QM(c):!c},rI=d.createContext(void 0),oI=function(){return d.useContext(rI)};function Px(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce(function(n,r){return n&&Px(e[r],t[r])},!0):e===t}var aI=d.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),sI=function(){return d.useContext(aI)};function iI(e){var t=d.useRef(void 0);return Px(t.current,e)||(t.current=e),t.current}var Qu=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},cI=typeof window<"u"?d.useLayoutEffect:d.useEffect;function Co(e,t,n,r){var o=d.useState(null),a=o[0],s=o[1],i=d.useRef(!1),u=n instanceof Array?r instanceof Array?void 0:r:n,c=Gc(e)?e.join(u==null?void 0:u.splitKey):e,m=n instanceof Array?n:r instanceof Array?r:void 0,f=d.useCallback(t,m??[]),p=d.useRef(f);m?p.current=f:p.current=t;var h=iI(u),v=sI(),g=v.enabledScopes,y=oI();return cI(function(){if(!((h==null?void 0:h.enabled)===!1||!tI(g,h==null?void 0:h.scopes))){var x=function(_,N){var T;if(N===void 0&&(N=!1),!(eI(_)&&!Dx(_,h==null?void 0:h.enableOnFormTags))){if(a!==null){var A=a.getRootNode();if((A instanceof Document||A instanceof ShadowRoot)&&A.activeElement!==a&&!a.contains(A.activeElement)){Qu(_);return}}(T=_.target)!=null&&T.isContentEditable&&!(h!=null&&h.enableOnContentEditable)||Os(c,h==null?void 0:h.splitKey).forEach(function(j){var k,R=Ls(j,h==null?void 0:h.combinationKey);if(nI(_,R,h==null?void 0:h.ignoreModifiers)||(k=R.keys)!=null&&k.includes("*")){if(h!=null&&h.ignoreEventWhen!=null&&h.ignoreEventWhen(_)||N&&i.current)return;if(ZM(_,R,h==null?void 0:h.preventDefault),!JM(_,R,h==null?void 0:h.enabled)){Qu(_);return}p.current(_,R),N||(i.current=!0)}})}},S=function(_){_.key!==void 0&&(Rx(Lt(_.code)),((h==null?void 0:h.keydown)===void 0&&(h==null?void 0:h.keyup)!==!0||h!=null&&h.keydown)&&x(_))},E=function(_){_.key!==void 0&&(Ax(Lt(_.code)),i.current=!1,h!=null&&h.keyup&&x(_,!0))},w=a||(u==null?void 0:u.document)||document;return w.addEventListener("keyup",E),w.addEventListener("keydown",S),y&&Os(c,h==null?void 0:h.splitKey).forEach(function(C){return y.addHotkey(Ls(C,h==null?void 0:h.combinationKey,h==null?void 0:h.description))}),function(){w.removeEventListener("keyup",E),w.removeEventListener("keydown",S),y&&Os(c,h==null?void 0:h.splitKey).forEach(function(C){return y.removeHotkey(Ls(C,h==null?void 0:h.combinationKey,h==null?void 0:h.description))})}}},[a,c,h,g]),s}const lI=({children:e})=>{const{redo:t,undo:n}=tm(),{openOpenDiagramDialog:r}=Ue(),{updateDiagramUpdatedAt:o}=ze();return Co(Ot[bt.REDO].keyCombination,t,{preventDefault:!0},[t]),Co(Ot[bt.UNDO].keyCombination,n,{preventDefault:!0},[n]),Co(Ot[bt.OPEN_DIAGRAM].keyCombination,r,{preventDefault:!0},[r]),Co(Ot[bt.SAVE_DIAGRAM].keyCombination,o,{preventDefault:!0},[o]),l.jsx(XM.Provider,{value:{},children:e})},uI=30,dI=1,jx=W.lazy(()=>rn(()=>import("./editor-desktop-layout-iPvnKuL9.js"),__vite__mapDeps([9,1,2,10,4,11]))),Mx=W.lazy(()=>rn(()=>import("./editor-mobile-layout-DaMO939S.js"),__vite__mapDeps([12,1,2,10,4,11]))),fI=()=>{const{loadDiagram:e,currentDiagram:t,schemas:n,filteredSchemas:r}=ze(),{openSelectSchema:o,showSidePanel:a}=Ji(),{resetRedoStack:s,resetUndoStack:i}=wa(),{showLoader:u,hideLoader:c}=Bm(),{openCreateDiagramDialog:m,openStarUsDialog:f}=Ue(),{diagramId:p}=Ey(),{config:h,updateConfig:v}=Ur(),g=sa(),{isMd:y}=Yn("md"),[x,S]=d.useState(),{hideMultiSchemaNotification:E,setHideMultiSchemaNotification:w,starUsDialogLastOpen:C,setStarUsDialogLastOpen:_,githubRepoOpened:N}=ia(),{toast:T}=Fm(),{t:A}=Te();d.useEffect(()=>{if(!h||(t==null?void 0:t.id)===p)return;(async()=>{if(p){S(void 0),u(),s(),i();const D=await e(p);D||g("/"),S(D),c()}else!p&&h.defaultDiagramId?await e(h.defaultDiagramId)?g(`/diagrams/${h.defaultDiagramId}`):(await v({defaultDiagramId:""}),g("/")):m()})()},[p,m,h,g,e,s,i,c,u,t==null?void 0:t.id,v]),d.useEffect(()=>{if(!(!(t!=null&&t.id)||N)&&new Date().getTime()-C>1e3*60*60*24*dI){const R=new Date().getTime();_(R),setTimeout(f,uI*1e3)}},[t==null?void 0:t.id,N,f,_,C]);const j=d.useRef(""),k=d.useCallback(async()=>{a(),y||await new Promise(R=>setTimeout(R,500)),o()},[o,a,y]);return d.useEffect(()=>{if(j.current!==t.id&&(j.current=t.id,n.length>1&&!E)){const R=r?r.map(D=>n.find(b=>b.id===D)).map(D=>`'${D==null?void 0:D.name}'`).join(", "):A("multiple_schemas_alert.none");T({duration:5500,title:A("multiple_schemas_alert.title"),description:A("multiple_schemas_alert.description",{schemasCount:n.length,formattedSchemas:R}),variant:"default",layout:"column",className:"top-0 right-0 flex fixed md:max-w-[420px] md:top-4 md:right-4",action:l.jsxs("div",{className:"flex justify-between gap-1",children:[l.jsx(oi,{altText:"Don't show this notification again",className:"flex-nowrap",onClick:()=>w(!0),children:A("multiple_schemas_alert.dont_show_again")}),l.jsx(oi,{onClick:()=>k(),altText:"Change the schema",className:"border border-pink-600 bg-pink-600 text-white hover:bg-pink-500",children:A("multiple_schemas_alert.change_schema")})]})})}},[n,r,T,t.id,p,o,A,k,E,w]),l.jsxs(l.Fragment,{children:[l.jsxs("section",{className:`bg-background ${y?"h-screen w-screen":"h-dvh w-dvw"} flex select-none flex-col overflow-x-hidden`,children:[l.jsx(_E,{}),l.jsx(d.Suspense,{fallback:l.jsx("div",{className:"flex flex-1 items-center justify-center",children:l.jsx(Sr,{size:y?"large":"medium"})}),children:y?l.jsx(jx,{initialDiagram:x}):l.jsx(Mx,{initialDiagram:x})})]}),l.jsx(QE,{})]})},mI=()=>l.jsx(My,{children:l.jsx(Iy,{children:l.jsx(uS,{children:l.jsx(dS,{children:l.jsx(ky,{children:l.jsx(fS,{children:l.jsx(mS,{children:l.jsx(vS,{children:l.jsx(xS,{children:l.jsx(Kh,{children:l.jsx(fD,{children:l.jsx(KM,{children:l.jsx(lI,{children:l.jsx(fI,{})})})})})})})})})})})})})}),UI=Object.freeze(Object.defineProperty({__proto__:null,EditorDesktopLayoutLazy:jx,EditorMobileLayoutLazy:Mx,EditorPage:mI},Symbol.toStringTag,{value:"Module"}));export{zI as $,Yb as A,Xb as B,Wr as C,xI as D,r0 as E,ua as F,Zb as G,i0 as H,ew as I,ze as J,Ue as K,Jb as L,Te as M,qn as N,Gr as O,uc as P,eE as Q,op as R,aw as S,ap as T,aE as U,ml as V,rm as W,Kw as X,Hw as Y,MI as Z,PD as _,Yn as a,en as a0,DM as a1,PM as a2,Nx as a3,xg as a4,SI as a5,Fc as a6,PI as a7,Vw as a8,Bw as a9,UI as aA,jI as aa,EI as ab,VR as ac,Wo as ad,ie as ae,me as af,DI as ag,vi as ah,tm as ai,NI as aj,Fm as ak,CI as al,_I as am,FM as an,pD as ao,wI as ap,RI as aq,Gw as ar,CE as as,AI as at,TI as au,Ht as av,No as aw,lE as ax,iP as ay,je as az,Yr as b,Kr as c,Xr as d,la as e,Hi as f,xa as g,pa as h,Fr as i,uP as j,Xn as k,Jy as l,vI as m,gI as n,Us as o,Tb as p,Qb as q,tw as r,nw as s,rw as t,Ji as u,ow as v,sw as w,cw as x,lw as y,qb as z};
