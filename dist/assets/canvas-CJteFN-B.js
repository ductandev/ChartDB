import{r as i,i as yt,k as io,c as ke,j as s,A as Pi,P as ne,f as q,u as qe,I as Qe,S as Oi,D as Li,C as $i,h as pt,m as zi,V as Fi,d as lo,e as ft,p as Bi,R as N,q as $,l as co,n as Hi,a0 as Vi,T as de,w as ue,x as pe,g as Ui,a1 as Hs}from"./index-CjVg0o4A.js";import{e as uo,h as Gi,f as Wi,g as Ki,F as qi,i as Xi,j as Vs,k as po,l as Yi,m as Zi,n as fo,o as gn,p as vn,A as ho,q as mo,G as xo,L as go,I as vo,r as bo,s as yo,t as wo,v as Co,S as jo,w as No,x as So,y as Ro,z as _o,B as Io,E as Mo,H as To,J as ie,K as Ht,M as ge,N as Ge,u as je,a as wt,Q as ko,U as Do,V as Hn,W as xt,X as bn,Y as Eo,Z as Ao,_ as Ji,$ as Us,a0 as rs,a1 as as,a2 as is,a3 as ls,a4 as Po,a5 as Qi,a6 as cs,a7 as Dt,a8 as Oo,a9 as Lo,aa as el,ab as $o,ac as zo,ad as it,ae as Ce,af as tl,ag as nl,ah as Fo,ai as sl,aj as ol,ak as rl,al,am as il,an as ll,ao as cl,ap as dl,aq as Jt,ar as ul,as as pl,at as fl,au as hl,av as ml}from"./editor-page-edtufqYh.js";import{c as Z,B as Q,L as ht,t as xl,w as gl,x as vl,y as bl,f as Bo,e as yl}from"./theme-provider-Jqc5CFOj.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=Z("ChevronsLeftRightEllipsis",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=Z("ChevronsLeftRight",[["path",{d:"m9 7-5 5 5 5",key:"j5w590"}],["path",{d:"m15 7 5 5-5 5",key:"1bl6da"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=Z("ChevronsRightLeft",[["path",{d:"m20 17-5-5 5-5",key:"30x0n2"}],["path",{d:"m4 17 5-5-5-5",key:"16spf4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Z("CircleDotDashed",[["path",{d:"M10.1 2.18a9.93 9.93 0 0 1 3.8 0",key:"1qdqn0"}],["path",{d:"M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7",key:"1bq7p6"}],["path",{d:"M21.82 10.1a9.93 9.93 0 0 1 0 3.8",key:"1rlaqf"}],["path",{d:"M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69",key:"1xk03u"}],["path",{d:"M13.9 21.82a9.94 9.94 0 0 1-3.8 0",key:"l7re25"}],["path",{d:"M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7",key:"1v18p6"}],["path",{d:"M2.18 13.9a9.93 9.93 0 0 1 0-3.8",key:"xdo6bj"}],["path",{d:"M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69",key:"1jjmaz"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Z("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Z("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Z("FileKey2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v6",key:"rc0qvx"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"4",cy:"16",r:"2",key:"1ehqvc"}],["path",{d:"m10 10-4.5 4.5",key:"7fwrp6"}],["path",{d:"m9 11 1 1",key:"wa6s5q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=Z("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Z("Group",[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Z("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Z("ListCollapse",[["path",{d:"m3 10 2.5-2.5L3 5",key:"i6eama"}],["path",{d:"m3 19 2.5-2.5L3 14",key:"w2gmor"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=Z("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=Z("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=Z("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=Z("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=Z("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=Z("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Z("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Z("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=Z("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Z("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=Z("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function Uo(e){const t=i.useRef({value:e,previous:e});return i.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var zl=[" ","Enter","ArrowUp","ArrowDown"],Fl=[" ","Enter"],Vt="Select",[yn,wn,Bl]=uo(Vt),[Ct,nf]=yt(Vt,[Bl,io]),Cn=io(),[Hl,st]=Ct(Vt),[Vl,Ul]=Ct(Vt),Go=e=>{const{__scopeSelect:t,children:n,open:o,defaultOpen:r,onOpenChange:a,value:l,defaultValue:c,onValueChange:d,dir:u,name:f,autoComplete:p,disabled:m,required:x,form:g}=e,h=Cn(t),[v,w]=i.useState(null),[b,y]=i.useState(null),[S,j]=i.useState(!1),R=po(u),[C=!1,I]=ft({prop:o,defaultProp:r,onChange:a}),[D,T]=ft({prop:l,defaultProp:c,onChange:d}),E=i.useRef(null),F=v?g||!!v.closest("form"):!0,[X,ee]=i.useState(new Set),ae=Array.from(X).map(Y=>Y.props.value).join(";");return s.jsx(Bi,{...h,children:s.jsxs(Hl,{required:x,scope:t,trigger:v,onTriggerChange:w,valueNode:b,onValueNodeChange:y,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:pt(),value:D,onValueChange:T,open:C,onOpenChange:I,dir:R,triggerPointerDownPosRef:E,disabled:m,children:[s.jsx(yn.Provider,{scope:t,children:s.jsx(Vl,{scope:e.__scopeSelect,onNativeOptionAdd:i.useCallback(Y=>{ee(W=>new Set(W).add(Y))},[]),onNativeOptionRemove:i.useCallback(Y=>{ee(W=>{const H=new Set(W);return H.delete(Y),H})},[]),children:n})}),F?s.jsxs(gr,{"aria-hidden":!0,required:x,tabIndex:-1,name:f,autoComplete:p,value:D,onChange:Y=>T(Y.target.value),disabled:m,form:g,children:[D===void 0?s.jsx("option",{value:""}):null,Array.from(X)]},ae):null]})})};Go.displayName=Vt;var Wo="SelectTrigger",Ko=i.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:o=!1,...r}=e,a=Cn(n),l=st(Wo,n),c=l.disabled||o,d=ke(t,l.onTriggerChange),u=wn(n),f=i.useRef("touch"),[p,m,x]=vr(h=>{const v=u().filter(y=>!y.disabled),w=v.find(y=>y.value===l.value),b=br(v,h,w);b!==void 0&&l.onValueChange(b.value)}),g=h=>{c||(l.onOpenChange(!0),x()),h&&(l.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return s.jsx(Pi,{asChild:!0,...a,children:s.jsx(ne.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":xr(l.value)?"":void 0,...r,ref:d,onClick:q(r.onClick,h=>{h.currentTarget.focus(),f.current!=="mouse"&&g(h)}),onPointerDown:q(r.onPointerDown,h=>{f.current=h.pointerType;const v=h.target;v.hasPointerCapture(h.pointerId)&&v.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(g(h),h.preventDefault())}),onKeyDown:q(r.onKeyDown,h=>{const v=p.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&m(h.key),!(v&&h.key===" ")&&zl.includes(h.key)&&(g(),h.preventDefault())})})})});Ko.displayName=Wo;var qo="SelectValue",Xo=i.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,children:a,placeholder:l="",...c}=e,d=st(qo,n),{onValueNodeHasChildrenChange:u}=d,f=a!==void 0,p=ke(t,d.onValueNodeChange);return qe(()=>{u(f)},[u,f]),s.jsx(ne.span,{...c,ref:p,style:{pointerEvents:"none"},children:xr(d.value)?s.jsx(s.Fragment,{children:l}):a})});Xo.displayName=qo;var Gl="SelectIcon",Yo=i.forwardRef((e,t)=>{const{__scopeSelect:n,children:o,...r}=e;return s.jsx(ne.span,{"aria-hidden":!0,...r,ref:t,children:o||"â–¼"})});Yo.displayName=Gl;var Wl="SelectPortal",Zo=e=>s.jsx(Xi,{asChild:!0,...e});Zo.displayName=Wl;var mt="SelectContent",Jo=i.forwardRef((e,t)=>{const n=st(mt,e.__scopeSelect),[o,r]=i.useState();if(qe(()=>{r(new DocumentFragment)},[]),!n.open){const a=o;return a?Qe.createPortal(s.jsx(Qo,{scope:e.__scopeSelect,children:s.jsx(yn.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(er,{...e,ref:t})});Jo.displayName=mt;var Fe=10,[Qo,ot]=Ct(mt),Kl="SelectContentImpl",er=i.forwardRef((e,t)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:a,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:x,sticky:g,hideWhenDetached:h,avoidCollisions:v,...w}=e,b=st(mt,n),[y,S]=i.useState(null),[j,R]=i.useState(null),C=ke(t,A=>S(A)),[I,D]=i.useState(null),[T,E]=i.useState(null),F=wn(n),[X,ee]=i.useState(!1),ae=i.useRef(!1);i.useEffect(()=>{if(y)return Gi(y)},[y]),Wi();const Y=i.useCallback(A=>{const[U,...J]=F().map(B=>B.ref.current),[k]=J.slice(-1),V=document.activeElement;for(const B of A)if(B===V||(B==null||B.scrollIntoView({block:"nearest"}),B===U&&j&&(j.scrollTop=0),B===k&&j&&(j.scrollTop=j.scrollHeight),B==null||B.focus(),document.activeElement!==V))return},[F,j]),W=i.useCallback(()=>Y([I,y]),[Y,I,y]);i.useEffect(()=>{X&&W()},[X,W]);const{onOpenChange:H,triggerPointerDownPosRef:G}=b;i.useEffect(()=>{if(y){let A={x:0,y:0};const U=k=>{var V,B;A={x:Math.abs(Math.round(k.pageX)-(((V=G.current)==null?void 0:V.x)??0)),y:Math.abs(Math.round(k.pageY)-(((B=G.current)==null?void 0:B.y)??0))}},J=k=>{A.x<=10&&A.y<=10?k.preventDefault():y.contains(k.target)||H(!1),document.removeEventListener("pointermove",U),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",U),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",U),document.removeEventListener("pointerup",J,{capture:!0})}}},[y,H,G]),i.useEffect(()=>{const A=()=>H(!1);return window.addEventListener("blur",A),window.addEventListener("resize",A),()=>{window.removeEventListener("blur",A),window.removeEventListener("resize",A)}},[H]);const[se,te]=vr(A=>{const U=F().filter(V=>!V.disabled),J=U.find(V=>V.ref.current===document.activeElement),k=br(U,A,J);k&&setTimeout(()=>k.ref.current.focus())}),oe=i.useCallback((A,U,J)=>{const k=!ae.current&&!J;(b.value!==void 0&&b.value===U||k)&&(D(A),k&&(ae.current=!0))},[b.value]),ve=i.useCallback(()=>y==null?void 0:y.focus(),[y]),fe=i.useCallback((A,U,J)=>{const k=!ae.current&&!J;(b.value!==void 0&&b.value===U||k)&&E(A)},[b.value]),we=o==="popper"?Un:tr,re=we===Un?{side:c,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:x,sticky:g,hideWhenDetached:h,avoidCollisions:v}:{};return s.jsx(Qo,{scope:n,content:y,viewport:j,onViewportChange:R,itemRefCallback:oe,selectedItem:I,onItemLeave:ve,itemTextRefCallback:fe,focusSelectedItem:W,selectedItemText:T,position:o,isPositioned:X,searchRef:se,children:s.jsx(Ki,{as:Oi,allowPinchZoom:!0,children:s.jsx(qi,{asChild:!0,trapped:b.open,onMountAutoFocus:A=>{A.preventDefault()},onUnmountAutoFocus:q(r,A=>{var U;(U=b.trigger)==null||U.focus({preventScroll:!0}),A.preventDefault()}),children:s.jsx(Li,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:A=>A.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(we,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:A=>A.preventDefault(),...w,...re,onPlaced:()=>ee(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:q(w.onKeyDown,A=>{const U=A.ctrlKey||A.altKey||A.metaKey;if(A.key==="Tab"&&A.preventDefault(),!U&&A.key.length===1&&te(A.key),["ArrowUp","ArrowDown","Home","End"].includes(A.key)){let k=F().filter(V=>!V.disabled).map(V=>V.ref.current);if(["ArrowUp","End"].includes(A.key)&&(k=k.slice().reverse()),["ArrowUp","ArrowDown"].includes(A.key)){const V=A.target,B=k.indexOf(V);k=k.slice(B+1)}setTimeout(()=>Y(k)),A.preventDefault()}})})})})})})});er.displayName=Kl;var ql="SelectItemAlignedPosition",tr=i.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:o,...r}=e,a=st(mt,n),l=ot(mt,n),[c,d]=i.useState(null),[u,f]=i.useState(null),p=ke(t,C=>f(C)),m=wn(n),x=i.useRef(!1),g=i.useRef(!0),{viewport:h,selectedItem:v,selectedItemText:w,focusSelectedItem:b}=l,y=i.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&u&&h&&v&&w){const C=a.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),T=w.getBoundingClientRect();if(a.dir!=="rtl"){const V=T.left-I.left,B=D.left-V,be=C.left-B,le=C.width+be,Ie=Math.max(le,I.width),De=window.innerWidth-Fe,Ye=Vs(B,[Fe,Math.max(Fe,De-Ie)]);c.style.minWidth=le+"px",c.style.left=Ye+"px"}else{const V=I.right-T.right,B=window.innerWidth-D.right-V,be=window.innerWidth-C.right-B,le=C.width+be,Ie=Math.max(le,I.width),De=window.innerWidth-Fe,Ye=Vs(B,[Fe,Math.max(Fe,De-Ie)]);c.style.minWidth=le+"px",c.style.right=Ye+"px"}const E=m(),F=window.innerHeight-Fe*2,X=h.scrollHeight,ee=window.getComputedStyle(u),ae=parseInt(ee.borderTopWidth,10),Y=parseInt(ee.paddingTop,10),W=parseInt(ee.borderBottomWidth,10),H=parseInt(ee.paddingBottom,10),G=ae+Y+X+H+W,se=Math.min(v.offsetHeight*5,G),te=window.getComputedStyle(h),oe=parseInt(te.paddingTop,10),ve=parseInt(te.paddingBottom,10),fe=C.top+C.height/2-Fe,we=F-fe,re=v.offsetHeight/2,A=v.offsetTop+re,U=ae+Y+A,J=G-U;if(U<=fe){const V=E.length>0&&v===E[E.length-1].ref.current;c.style.bottom="0px";const B=u.clientHeight-h.offsetTop-h.offsetHeight,be=Math.max(we,re+(V?ve:0)+B+W),le=U+be;c.style.height=le+"px"}else{const V=E.length>0&&v===E[0].ref.current;c.style.top="0px";const be=Math.max(fe,ae+h.offsetTop+(V?oe:0)+re)+J;c.style.height=be+"px",h.scrollTop=U-fe+h.offsetTop}c.style.margin=`${Fe}px 0`,c.style.minHeight=se+"px",c.style.maxHeight=F+"px",o==null||o(),requestAnimationFrame(()=>x.current=!0)}},[m,a.trigger,a.valueNode,c,u,h,v,w,a.dir,o]);qe(()=>y(),[y]);const[S,j]=i.useState();qe(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const R=i.useCallback(C=>{C&&g.current===!0&&(y(),b==null||b(),g.current=!1)},[y,b]);return s.jsx(Yl,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:R,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:s.jsx(ne.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});tr.displayName=ql;var Xl="SelectPopperPosition",Un=i.forwardRef((e,t)=>{const{__scopeSelect:n,align:o="start",collisionPadding:r=Fe,...a}=e,l=Cn(n);return s.jsx($i,{...l,...a,ref:t,align:o,collisionPadding:r,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Un.displayName=Xl;var[Yl,fs]=Ct(mt,{}),Gn="SelectViewport",nr=i.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:o,...r}=e,a=ot(Gn,n),l=fs(Gn,n),c=ke(t,a.onViewportChange),d=i.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),s.jsx(yn.Slot,{scope:n,children:s.jsx(ne.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:q(r.onScroll,u=>{const f=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=l;if(m!=null&&m.current&&p){const x=Math.abs(d.current-f.scrollTop);if(x>0){const g=window.innerHeight-Fe*2,h=parseFloat(p.style.minHeight),v=parseFloat(p.style.height),w=Math.max(h,v);if(w<g){const b=w+x,y=Math.min(g,b),S=b-y;p.style.height=y+"px",p.style.bottom==="0px"&&(f.scrollTop=S>0?S:0,p.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});nr.displayName=Gn;var sr="SelectGroup",[Zl,Jl]=Ct(sr),or=i.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=pt();return s.jsx(Zl,{scope:n,id:r,children:s.jsx(ne.div,{role:"group","aria-labelledby":r,...o,ref:t})})});or.displayName=sr;var rr="SelectLabel",ar=i.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=Jl(rr,n);return s.jsx(ne.div,{id:r.id,...o,ref:t})});ar.displayName=rr;var cn="SelectItem",[Ql,ir]=Ct(cn),lr=i.forwardRef((e,t)=>{const{__scopeSelect:n,value:o,disabled:r=!1,textValue:a,...l}=e,c=st(cn,n),d=ot(cn,n),u=c.value===o,[f,p]=i.useState(a??""),[m,x]=i.useState(!1),g=ke(t,b=>{var y;return(y=d.itemRefCallback)==null?void 0:y.call(d,b,o,r)}),h=pt(),v=i.useRef("touch"),w=()=>{r||(c.onValueChange(o),c.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Ql,{scope:n,value:o,disabled:r,textId:h,isSelected:u,onItemTextChange:i.useCallback(b=>{p(y=>y||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(yn.ItemSlot,{scope:n,value:o,disabled:r,textValue:f,children:s.jsx(ne.div,{role:"option","aria-labelledby":h,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...l,ref:g,onFocus:q(l.onFocus,()=>x(!0)),onBlur:q(l.onBlur,()=>x(!1)),onClick:q(l.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:q(l.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:q(l.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:q(l.onPointerMove,b=>{var y;v.current=b.pointerType,r?(y=d.onItemLeave)==null||y.call(d):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:q(l.onPointerLeave,b=>{var y;b.currentTarget===document.activeElement&&((y=d.onItemLeave)==null||y.call(d))}),onKeyDown:q(l.onKeyDown,b=>{var S;((S=d.searchRef)==null?void 0:S.current)!==""&&b.key===" "||(Fl.includes(b.key)&&w(),b.key===" "&&b.preventDefault())})})})})});lr.displayName=cn;var kt="SelectItemText",cr=i.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,...a}=e,l=st(kt,n),c=ot(kt,n),d=ir(kt,n),u=Ul(kt,n),[f,p]=i.useState(null),m=ke(t,w=>p(w),d.onItemTextChange,w=>{var b;return(b=c.itemTextRefCallback)==null?void 0:b.call(c,w,d.value,d.disabled)}),x=f==null?void 0:f.textContent,g=i.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:h,onNativeOptionRemove:v}=u;return qe(()=>(h(g),()=>v(g)),[h,v,g]),s.jsxs(s.Fragment,{children:[s.jsx(ne.span,{id:d.textId,...a,ref:m}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Qe.createPortal(a.children,l.valueNode):null]})});cr.displayName=kt;var dr="SelectItemIndicator",ur=i.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return ir(dr,n).isSelected?s.jsx(ne.span,{"aria-hidden":!0,...o,ref:t}):null});ur.displayName=dr;var Wn="SelectScrollUpButton",pr=i.forwardRef((e,t)=>{const n=ot(Wn,e.__scopeSelect),o=fs(Wn,e.__scopeSelect),[r,a]=i.useState(!1),l=ke(t,o.onScrollButtonChange);return qe(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollTop>0;a(u)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?s.jsx(hr,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});pr.displayName=Wn;var Kn="SelectScrollDownButton",fr=i.forwardRef((e,t)=>{const n=ot(Kn,e.__scopeSelect),o=fs(Kn,e.__scopeSelect),[r,a]=i.useState(!1),l=ke(t,o.onScrollButtonChange);return qe(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<u;a(f)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?s.jsx(hr,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});fr.displayName=Kn;var hr=i.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:o,...r}=e,a=ot("SelectScrollButton",n),l=i.useRef(null),c=wn(n),d=i.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return i.useEffect(()=>()=>d(),[d]),qe(()=>{var f;const u=c().find(p=>p.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),s.jsx(ne.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:q(r.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(o,50))}),onPointerMove:q(r.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),l.current===null&&(l.current=window.setInterval(o,50))}),onPointerLeave:q(r.onPointerLeave,()=>{d()})})}),ec="SelectSeparator",mr=i.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return s.jsx(ne.div,{"aria-hidden":!0,...o,ref:t})});mr.displayName=ec;var qn="SelectArrow",tc=i.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=Cn(n),a=st(qn,n),l=ot(qn,n);return a.open&&l.position==="popper"?s.jsx(zi,{...r,...o,ref:t}):null});tc.displayName=qn;function xr(e){return e===""||e===void 0}var gr=i.forwardRef((e,t)=>{const{value:n,...o}=e,r=i.useRef(null),a=ke(t,r),l=Uo(n);return i.useEffect(()=>{const c=r.current,d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==n&&f){const p=new Event("change",{bubbles:!0});f.call(c,n),c.dispatchEvent(p)}},[l,n]),s.jsx(Fi,{asChild:!0,children:s.jsx("select",{...o,ref:a,defaultValue:n})})});gr.displayName="BubbleSelect";function vr(e){const t=lo(e),n=i.useRef(""),o=i.useRef(0),r=i.useCallback(l=>{const c=n.current+l;t(c),function d(u){n.current=u,window.clearTimeout(o.current),u!==""&&(o.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),a=i.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return i.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,r,a]}function br(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let l=nc(e,Math.max(a,0));r.length===1&&(l=l.filter(u=>u!==n));const d=l.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function nc(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var sc=Go,yr=Ko,oc=Xo,rc=Yo,ac=Zo,wr=Jo,ic=nr,lc=or,Cr=ar,jr=lr,cc=cr,dc=ur,Nr=pr,Sr=fr,Rr=mr;const _r=sc,Ir=lc,Mr=oc,hs=N.forwardRef(({className:e,children:t,...n},o)=>s.jsxs(yr,{ref:o,className:$("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(rc,{asChild:!0,children:s.jsx(Yi,{className:"size-4 opacity-50"})})]}));hs.displayName=yr.displayName;const Tr=N.forwardRef(({className:e,...t},n)=>s.jsx(Nr,{ref:n,className:$("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Zi,{})}));Tr.displayName=Nr.displayName;const kr=N.forwardRef(({className:e,...t},n)=>s.jsx(Sr,{ref:n,className:$("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(fo,{})}));kr.displayName=Sr.displayName;const ms=N.forwardRef(({className:e,children:t,position:n="popper",...o},r)=>s.jsx(ac,{children:s.jsxs(wr,{ref:r,className:$("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:[s.jsx(Tr,{}),s.jsx(ic,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(kr,{})]})}));ms.displayName=wr.displayName;const uc=N.forwardRef(({className:e,...t},n)=>s.jsx(Cr,{ref:n,className:$("px-2 py-1.5 text-sm font-semibold",e),...t}));uc.displayName=Cr.displayName;const et=N.forwardRef(({className:e,children:t,...n},o)=>s.jsxs(jr,{ref:o,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(dc,{children:s.jsx(gn,{className:"size-4"})})}),s.jsx(cc,{children:t})]}));et.displayName=jr.displayName;const pc=N.forwardRef(({className:e,...t},n)=>s.jsx(Rr,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",e),...t}));pc.displayName=Rr.displayName;var xs="Collapsible",[fc,Dr]=yt(xs),[hc,gs]=fc(xs),Er=i.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:o,defaultOpen:r,disabled:a,onOpenChange:l,...c}=e,[d=!1,u]=ft({prop:o,defaultProp:r,onChange:l});return s.jsx(hc,{scope:n,disabled:a,contentId:pt(),open:d,onOpenToggle:i.useCallback(()=>u(f=>!f),[u]),children:s.jsx(ne.div,{"data-state":bs(d),"data-disabled":a?"":void 0,...c,ref:t})})});Er.displayName=xs;var Ar="CollapsibleTrigger",Pr=i.forwardRef((e,t)=>{const{__scopeCollapsible:n,...o}=e,r=gs(Ar,n);return s.jsx(ne.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":bs(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...o,ref:t,onClick:q(e.onClick,r.onOpenToggle)})});Pr.displayName=Ar;var vs="CollapsibleContent",Or=i.forwardRef((e,t)=>{const{forceMount:n,...o}=e,r=gs(vs,e.__scopeCollapsible);return s.jsx(co,{present:n||r.open,children:({present:a})=>s.jsx(mc,{...o,ref:t,present:a})})});Or.displayName=vs;var mc=i.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:o,children:r,...a}=e,l=gs(vs,n),[c,d]=i.useState(o),u=i.useRef(null),f=ke(t,u),p=i.useRef(0),m=p.current,x=i.useRef(0),g=x.current,h=l.open||c,v=i.useRef(h),w=i.useRef();return i.useEffect(()=>{const b=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(b)},[]),qe(()=>{const b=u.current;if(b){w.current=w.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const y=b.getBoundingClientRect();p.current=y.height,x.current=y.width,v.current||(b.style.transitionDuration=w.current.transitionDuration,b.style.animationName=w.current.animationName),d(o)}},[l.open,o]),s.jsx(ne.div,{"data-state":bs(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!h,...a,ref:f,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:h&&r})});function bs(e){return e?"open":"closed"}var xc=Er,gc=Pr,vc=Or,Xe="Accordion",bc=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ys,yc,wc]=uo(Xe),[jn,sf]=yt(Xe,[wc,Dr]),ws=Dr(),Lr=N.forwardRef((e,t)=>{const{type:n,...o}=e,r=o,a=o;return s.jsx(ys.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?s.jsx(Sc,{...a,ref:t}):s.jsx(Nc,{...r,ref:t})})});Lr.displayName=Xe;var[$r,Cc]=jn(Xe),[zr,jc]=jn(Xe,{collapsible:!1}),Nc=N.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:r=()=>{},collapsible:a=!1,...l}=e,[c,d]=ft({prop:n,defaultProp:o,onChange:r});return s.jsx($r,{scope:e.__scopeAccordion,value:c?[c]:[],onItemOpen:d,onItemClose:N.useCallback(()=>a&&d(""),[a,d]),children:s.jsx(zr,{scope:e.__scopeAccordion,collapsible:a,children:s.jsx(Fr,{...l,ref:t})})})}),Sc=N.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:r=()=>{},...a}=e,[l=[],c]=ft({prop:n,defaultProp:o,onChange:r}),d=N.useCallback(f=>c((p=[])=>[...p,f]),[c]),u=N.useCallback(f=>c((p=[])=>p.filter(m=>m!==f)),[c]);return s.jsx($r,{scope:e.__scopeAccordion,value:l,onItemOpen:d,onItemClose:u,children:s.jsx(zr,{scope:e.__scopeAccordion,collapsible:!0,children:s.jsx(Fr,{...a,ref:t})})})}),[Rc,Nn]=jn(Xe),Fr=N.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:o,dir:r,orientation:a="vertical",...l}=e,c=N.useRef(null),d=ke(c,t),u=yc(n),p=po(r)==="ltr",m=q(e.onKeyDown,x=>{var I;if(!bc.includes(x.key))return;const g=x.target,h=u().filter(D=>{var T;return!((T=D.ref.current)!=null&&T.disabled)}),v=h.findIndex(D=>D.ref.current===g),w=h.length;if(v===-1)return;x.preventDefault();let b=v;const y=0,S=w-1,j=()=>{b=v+1,b>S&&(b=y)},R=()=>{b=v-1,b<y&&(b=S)};switch(x.key){case"Home":b=y;break;case"End":b=S;break;case"ArrowRight":a==="horizontal"&&(p?j():R());break;case"ArrowDown":a==="vertical"&&j();break;case"ArrowLeft":a==="horizontal"&&(p?R():j());break;case"ArrowUp":a==="vertical"&&R();break}const C=b%w;(I=h[C].ref.current)==null||I.focus()});return s.jsx(Rc,{scope:n,disabled:o,direction:r,orientation:a,children:s.jsx(ys.Slot,{scope:n,children:s.jsx(ne.div,{...l,"data-orientation":a,ref:d,onKeyDown:o?void 0:m})})})}),dn="AccordionItem",[_c,Cs]=jn(dn),Br=N.forwardRef((e,t)=>{const{__scopeAccordion:n,value:o,...r}=e,a=Nn(dn,n),l=Cc(dn,n),c=ws(n),d=pt(),u=o&&l.value.includes(o)||!1,f=a.disabled||e.disabled;return s.jsx(_c,{scope:n,open:u,disabled:f,triggerId:d,children:s.jsx(xc,{"data-orientation":a.orientation,"data-state":Kr(u),...c,...r,ref:t,disabled:f,open:u,onOpenChange:p=>{p?l.onItemOpen(o):l.onItemClose(o)}})})});Br.displayName=dn;var Hr="AccordionHeader",Vr=N.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=Nn(Xe,n),a=Cs(Hr,n);return s.jsx(ne.h3,{"data-orientation":r.orientation,"data-state":Kr(a.open),"data-disabled":a.disabled?"":void 0,...o,ref:t})});Vr.displayName=Hr;var Xn="AccordionTrigger",Ur=N.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=Nn(Xe,n),a=Cs(Xn,n),l=jc(Xn,n),c=ws(n);return s.jsx(ys.ItemSlot,{scope:n,children:s.jsx(gc,{"aria-disabled":a.open&&!l.collapsible||void 0,"data-orientation":r.orientation,id:a.triggerId,...c,...o,ref:t})})});Ur.displayName=Xn;var Gr="AccordionContent",Wr=N.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=Nn(Xe,n),a=Cs(Gr,n),l=ws(n);return s.jsx(vc,{role:"region","aria-labelledby":a.triggerId,"data-orientation":r.orientation,...l,...o,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Wr.displayName=Gr;function Kr(e){return e?"open":"closed"}var Ic=Lr,Mc=Br,Tc=Vr,qr=Ur,Xr=Wr;const Sn=Ic,ct=N.forwardRef(({className:e,...t},n)=>s.jsx(Mc,{ref:n,className:$("border-b",e),...t}));ct.displayName="AccordionItem";const dt=N.forwardRef(({className:e,children:t,iconPosition:n="left",...o},r)=>{const a=()=>s.jsx(fo,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"});return s.jsx(Tc,{className:"flex",children:s.jsx(qr,{ref:r,className:$("flex flex-1 items-center py-4 gap-x-2 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180 justify-between",e),...o,children:o.asChild?s.jsxs("div",{className:"flex",children:[n==="left"?a():null,t,n==="right"?a():null]}):s.jsxs(s.Fragment,{children:[n==="left"?a():null,t,n==="right"?a():null]})})})});dt.displayName=qr.displayName;const ut=N.forwardRef(({className:e,children:t,...n},o)=>s.jsx(Xr,{ref:o,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:$("pb-4 pt-0",e),children:t})}));ut.displayName=Xr.displayName;const Be=N.forwardRef((e,t)=>s.jsx(Q,{ref:t,variant:"ghost",className:"size-8 p-2 text-slate-500 hover:cursor-pointer hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",asChild:!0,...e}));Be.displayName="ListItemHeaderButton";var js="DropdownMenu",[kc,of]=yt(js,[vn]),Ne=vn(),[Dc,Yr]=kc(js),Zr=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:r,defaultOpen:a,onOpenChange:l,modal:c=!0}=e,d=Ne(t),u=i.useRef(null),[f=!1,p]=ft({prop:r,defaultProp:a,onChange:l});return s.jsx(Dc,{scope:t,triggerId:pt(),triggerRef:u,contentId:pt(),open:f,onOpenChange:p,onOpenToggle:i.useCallback(()=>p(m=>!m),[p]),modal:c,children:s.jsx(Io,{...d,open:f,onOpenChange:p,dir:o,modal:c,children:n})})};Zr.displayName=js;var Jr="DropdownMenuTrigger",Qr=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...r}=e,a=Yr(Jr,n),l=Ne(n);return s.jsx(ho,{asChild:!0,...l,children:s.jsx(ne.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...r,ref:Hi(t,a.triggerRef),onPointerDown:q(e.onPointerDown,c=>{!o&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:q(e.onKeyDown,c=>{o||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});Qr.displayName=Jr;var Ec="DropdownMenuPortal",ea=e=>{const{__scopeDropdownMenu:t,...n}=e,o=Ne(t);return s.jsx(_o,{...o,...n})};ea.displayName=Ec;var ta="DropdownMenuContent",na=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Yr(ta,n),a=Ne(n),l=i.useRef(!1);return s.jsx(mo,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...o,ref:t,onCloseAutoFocus:q(e.onCloseAutoFocus,c=>{var d;l.current||(d=r.triggerRef.current)==null||d.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:q(e.onInteractOutside,c=>{const d=c.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0,f=d.button===2||u;(!r.modal||f)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});na.displayName=ta;var Ac="DropdownMenuGroup",sa=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(xo,{...r,...o,ref:t})});sa.displayName=Ac;var Pc="DropdownMenuLabel",oa=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(go,{...r,...o,ref:t})});oa.displayName=Pc;var Oc="DropdownMenuItem",ra=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(vo,{...r,...o,ref:t})});ra.displayName=Oc;var Lc="DropdownMenuCheckboxItem",aa=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(bo,{...r,...o,ref:t})});aa.displayName=Lc;var $c="DropdownMenuRadioGroup",zc=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(yo,{...r,...o,ref:t})});zc.displayName=$c;var Fc="DropdownMenuRadioItem",ia=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(wo,{...r,...o,ref:t})});ia.displayName=Fc;var Bc="DropdownMenuItemIndicator",la=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(Co,{...r,...o,ref:t})});la.displayName=Bc;var Hc="DropdownMenuSeparator",ca=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(jo,{...r,...o,ref:t})});ca.displayName=Hc;var Vc="DropdownMenuArrow",Uc=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(No,{...r,...o,ref:t})});Uc.displayName=Vc;var Gc="DropdownMenuSubTrigger",da=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(So,{...r,...o,ref:t})});da.displayName=Gc;var Wc="DropdownMenuSubContent",ua=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Ne(n);return s.jsx(Ro,{...r,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ua.displayName=Wc;var Kc=Zr,qc=Qr,Xc=ea,pa=na,Yc=sa,fa=oa,ha=ra,ma=aa,xa=ia,ga=la,va=ca,ba=da,ya=ua;const Ns=Kc,Ss=qc,Et=Yc,Zc=N.forwardRef(({className:e,inset:t,children:n,...o},r)=>s.jsxs(ba,{ref:r,className:$("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...o,children:[n,s.jsx(Mo,{className:"ml-auto size-4"})]}));Zc.displayName=ba.displayName;const Jc=N.forwardRef(({className:e,...t},n)=>s.jsx(ya,{ref:n,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Jc.displayName=ya.displayName;const Rn=N.forwardRef(({className:e,sideOffset:t=4,...n},o)=>s.jsx(Xc,{children:s.jsx(pa,{ref:o,sideOffset:t,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Rn.displayName=pa.displayName;const lt=N.forwardRef(({className:e,inset:t,...n},o)=>s.jsx(ha,{ref:o,className:$("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));lt.displayName=ha.displayName;const Qc=N.forwardRef(({className:e,children:t,checked:n,...o},r)=>s.jsxs(ma,{ref:r,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...o,children:[s.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:s.jsx(ga,{children:s.jsx(gn,{className:"size-4"})})}),t]}));Qc.displayName=ma.displayName;const ed=N.forwardRef(({className:e,children:t,...n},o)=>s.jsxs(xa,{ref:o,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:s.jsx(ga,{children:s.jsx(To,{className:"size-4 fill-current"})})}),t]}));ed.displayName=xa.displayName;const _n=N.forwardRef(({className:e,inset:t,...n},o)=>s.jsx(fa,{ref:o,className:$("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));_n.displayName=fa.displayName;const vt=N.forwardRef(({className:e,...t},n)=>s.jsx(va,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",e),...t}));vt.displayName=va.displayName;const td=({table:e})=>{const{updateTable:t,removeTable:n,createIndex:o,createField:r,schemas:a,filteredSchemas:l}=ie(),{openTableSchemaDialog:c}=Ht(),{t:d}=ge(),{fitView:u,setNodes:f}=Ge(),{hideSidePanel:p}=je(),[m,x]=N.useState(!1),[g,h]=N.useState(e.name),{isMd:v}=wt("md"),w=N.useRef(null),b=i.useCallback(()=>{m&&(g.trim()&&t(e.id,{name:g.trim()}),x(!1))},[g,e.id,t,m]);ko(w,b),Do("Enter",b);const y=T=>{T.stopPropagation(),x(!0)},S=i.useCallback(T=>{T.stopPropagation(),f(E=>E.map(F=>F.id==e.id?{...F,selected:!0}:{...F,selected:!1})),u({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.id}]}),v||p()},[u,e.id,f,p,v]),j=i.useCallback(()=>{n(e.id)},[e.id,n]),R=i.useCallback(T=>{t(e.id,{schema:T})},[e.id,t]),C=i.useCallback(()=>{c({table:e,schemas:a,onConfirm:R})},[c,e,a,R]),I=i.useCallback(()=>s.jsxs(Ns,{children:[s.jsx(Ss,{children:s.jsx(Be,{children:s.jsx(us,{})})}),s.jsxs(Rn,{className:"w-fit",children:[s.jsx(_n,{children:d("side_panel.tables_section.table.table_actions.title")}),s.jsx(vt,{}),a.length>0?s.jsxs(s.Fragment,{children:[s.jsx(Et,{children:s.jsxs(lt,{className:"flex justify-between gap-4",onClick:T=>{T.stopPropagation(),C()},children:[d("side_panel.tables_section.table.table_actions.change_schema"),s.jsx(_l,{className:"size-3.5"})]})}),s.jsx(vt,{})]}):null,s.jsxs(Et,{children:[s.jsxs(lt,{className:"flex justify-between gap-4",onClick:T=>{T.stopPropagation(),r(e.id)},children:[d("side_panel.tables_section.table.table_actions.add_field"),s.jsx(Hn,{className:"size-3.5"})]}),s.jsxs(lt,{className:"flex justify-between gap-4",onClick:T=>{T.stopPropagation(),o(e.id)},children:[d("side_panel.tables_section.table.table_actions.add_index"),s.jsx(Vn,{className:"size-3.5"})]})]}),s.jsx(vt,{}),s.jsx(Et,{children:s.jsxs(lt,{onClick:j,className:"flex justify-between !text-red-700",children:[d("side_panel.tables_section.table.table_actions.delete_table"),s.jsx(nt,{className:"size-3.5 text-red-700"})]})})]})]}),[e.id,r,o,j,d,C,a.length]);let D;return a.length>1&&l&&l.length>1&&(D=e.schema),s.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between gap-1 overflow-hidden",children:[s.jsx("div",{className:"flex min-w-0 flex-1",children:m?s.jsx(xt,{ref:w,autoFocus:!0,type:"text",placeholder:e.name,value:g,onClick:T=>T.stopPropagation(),onChange:T=>h(T.target.value),className:"h-7 w-full focus-visible:ring-0"}):s.jsxs("div",{className:"truncate",children:[e.name,s.jsx("span",{className:"text-xs text-muted-foreground",children:D?` (${D})`:""})]})}),s.jsx("div",{className:"flex flex-row-reverse",children:m?s.jsx(Be,{onClick:b,children:s.jsx(Eo,{})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{children:I()}),s.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[s.jsx(Be,{onClick:y,children:s.jsx(bn,{})}),s.jsx(Be,{onClick:S,children:s.jsx(ds,{})})]})]})})]})};var nd="Separator",Ws="horizontal",sd=["horizontal","vertical"],wa=i.forwardRef((e,t)=>{const{decorative:n,orientation:o=Ws,...r}=e,a=od(o)?o:Ws,c=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(ne.div,{"data-orientation":a,...c,...r,ref:t})});wa.displayName=nd;function od(e){return sd.includes(e)}var Ca=wa;const Ke=N.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...o},r)=>s.jsx(Ca,{ref:r,decorative:n,orientation:t,className:$("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...o}));Ke.displayName=Ca.displayName;var Rs="Checkbox",[rd,rf]=yt(Rs),[ad,id]=rd(Rs),ja=i.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:o,checked:r,defaultChecked:a,required:l,disabled:c,value:d="on",onCheckedChange:u,form:f,...p}=e,[m,x]=i.useState(null),g=ke(t,S=>x(S)),h=i.useRef(!1),v=m?f||!!m.closest("form"):!0,[w=!1,b]=ft({prop:r,defaultProp:a,onChange:u}),y=i.useRef(w);return i.useEffect(()=>{const S=m==null?void 0:m.form;if(S){const j=()=>b(y.current);return S.addEventListener("reset",j),()=>S.removeEventListener("reset",j)}},[m,b]),s.jsxs(ad,{scope:n,state:w,disabled:c,children:[s.jsx(ne.button,{type:"button",role:"checkbox","aria-checked":tt(w)?"mixed":w,"aria-required":l,"data-state":Ra(w),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:g,onKeyDown:q(e.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:q(e.onClick,S=>{b(j=>tt(j)?!0:!j),v&&(h.current=S.isPropagationStopped(),h.current||S.stopPropagation())})}),v&&s.jsx(ld,{control:m,bubbles:!h.current,name:o,value:d,checked:w,required:l,disabled:c,form:f,style:{transform:"translateX(-100%)"},defaultChecked:tt(a)?!1:a})]})});ja.displayName=Rs;var Na="CheckboxIndicator",Sa=i.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:o,...r}=e,a=id(Na,n);return s.jsx(co,{present:o||tt(a.state)||a.state===!0,children:s.jsx(ne.span,{"data-state":Ra(a.state),"data-disabled":a.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})});Sa.displayName=Na;var ld=e=>{const{control:t,checked:n,bubbles:o=!0,defaultChecked:r,...a}=e,l=i.useRef(null),c=Uo(n),d=Vi(t);i.useEffect(()=>{const f=l.current,p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==n&&x){const g=new Event("click",{bubbles:o});f.indeterminate=tt(n),x.call(f,tt(n)?!1:n),f.dispatchEvent(g)}},[c,n,o]);const u=i.useRef(tt(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r??u.current,...a,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function tt(e){return e==="indeterminate"}function Ra(e){return tt(e)?"indeterminate":e?"checked":"unchecked"}var _a=ja,cd=Sa;const _s=N.forwardRef(({className:e,...t},n)=>s.jsx(_a,{ref:n,className:$("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(cd,{className:$("flex items-center justify-center text-current"),children:s.jsx(gn,{className:"size-4"})})}));_s.displayName=_a.displayName;const Is=N.forwardRef(({className:e,variant:t,size:n,...o},r)=>s.jsx(Ao,{ref:r,className:$(Ji({variant:t,size:n,className:e})),...o}));Is.displayName=Ao.displayName;const Yn=N.forwardRef((e,t)=>s.jsx(Is,{...e,ref:t,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));Yn.displayName=Is.displayName;function dd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>o=>{t.forEach(r=>r(o))},t)}const In=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ms(e){return"nodeType"in e}function _e(e){var t,n;return e?jt(e)?e:Ms(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ts(e){const{Document:t}=_e(e);return e instanceof t}function Ut(e){return jt(e)?!1:e instanceof _e(e).HTMLElement}function Ia(e){return e instanceof _e(e).SVGElement}function Nt(e){return e?jt(e)?e.document:Ms(e)?Ts(e)?e:Ut(e)||Ia(e)?e.ownerDocument:document:document:document}const He=In?i.useLayoutEffect:i.useEffect;function ks(e){const t=i.useRef(e);return He(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.current==null?void 0:t.current(...o)},[])}function ud(){const e=i.useRef(null),t=i.useCallback((o,r)=>{e.current=setInterval(o,r)},[]),n=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function $t(e,t){t===void 0&&(t=[e]);const n=i.useRef(e);return He(()=>{n.current!==e&&(n.current=e)},t),n}function Gt(e,t){const n=i.useRef();return i.useMemo(()=>{const o=e(n.current);return n.current=o,o},[...t])}function un(e){const t=ks(e),n=i.useRef(null),o=i.useCallback(r=>{r!==n.current&&(t==null||t(r,n.current)),n.current=r},[]);return[n,o]}function Zn(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let An={};function Wt(e,t){return i.useMemo(()=>{if(t)return t;const n=An[e]==null?0:An[e]+1;return An[e]=n,e+"-"+n},[e,t])}function Ma(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.reduce((a,l)=>{const c=Object.entries(l);for(const[d,u]of c){const f=a[d];f!=null&&(a[d]=f+e*u)}return a},{...t})}}const bt=Ma(1),pn=Ma(-1);function pd(e){return"clientX"in e&&"clientY"in e}function Ds(e){if(!e)return!1;const{KeyboardEvent:t}=_e(e.target);return t&&e instanceof t}function fd(e){if(!e)return!1;const{TouchEvent:t}=_e(e.target);return t&&e instanceof t}function Jn(e){if(fd(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return pd(e)?{x:e.clientX,y:e.clientY}:null}const zt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[zt.Translate.toString(e),zt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:o}=e;return t+" "+n+"ms "+o}}}),Ks="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function hd(e){return e.matches(Ks)?e:e.querySelector(Ks)}const md={display:"none"};function xd(e){let{id:t,value:n}=e;return N.createElement("div",{id:t,style:md},n)}function gd(e){let{id:t,announcement:n,ariaLiveType:o="assertive"}=e;const r={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return N.createElement("div",{id:t,style:r,role:"status","aria-live":o,"aria-atomic":!0},n)}function vd(){const[e,t]=i.useState("");return{announce:i.useCallback(o=>{o!=null&&t(o)},[]),announcement:e}}const Ta=i.createContext(null);function bd(e){const t=i.useContext(Ta);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function yd(){const[e]=i.useState(()=>new Set),t=i.useCallback(o=>(e.add(o),()=>e.delete(o)),[e]);return[i.useCallback(o=>{let{type:r,event:a}=o;e.forEach(l=>{var c;return(c=l[r])==null?void 0:c.call(l,a)})},[e]),t]}const wd={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Cd={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function jd(e){let{announcements:t=Cd,container:n,hiddenTextDescribedById:o,screenReaderInstructions:r=wd}=e;const{announce:a,announcement:l}=vd(),c=Wt("DndLiveRegion"),[d,u]=i.useState(!1);if(i.useEffect(()=>{u(!0)},[]),bd(i.useMemo(()=>({onDragStart(p){let{active:m}=p;a(t.onDragStart({active:m}))},onDragMove(p){let{active:m,over:x}=p;t.onDragMove&&a(t.onDragMove({active:m,over:x}))},onDragOver(p){let{active:m,over:x}=p;a(t.onDragOver({active:m,over:x}))},onDragEnd(p){let{active:m,over:x}=p;a(t.onDragEnd({active:m,over:x}))},onDragCancel(p){let{active:m,over:x}=p;a(t.onDragCancel({active:m,over:x}))}}),[a,t])),!d)return null;const f=N.createElement(N.Fragment,null,N.createElement(xd,{id:o,value:r.draggable}),N.createElement(gd,{id:c,announcement:l}));return n?Qe.createPortal(f,n):f}var ce;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ce||(ce={}));function fn(){}function Nd(e,t){return i.useMemo(()=>({sensor:e,options:{}}),[e,t])}function Sd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>[...t].filter(o=>o!=null),[...t])}const Ve=Object.freeze({x:0,y:0});function Rd(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _d(e,t){let{data:{value:n}}=e,{data:{value:o}}=t;return n-o}function Id(e,t){let{data:{value:n}}=e,{data:{value:o}}=t;return o-n}function Md(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function qs(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Td=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const r=qs(t,t.left,t.top),a=[];for(const l of o){const{id:c}=l,d=n.get(c);if(d){const u=Rd(qs(d),r);a.push({id:c,data:{droppableContainer:l,value:u}})}}return a.sort(_d)};function kd(e,t){const n=Math.max(t.top,e.top),o=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),l=r-o,c=a-n;if(o<r&&n<a){const d=t.width*t.height,u=e.width*e.height,f=l*c,p=f/(d+u-f);return Number(p.toFixed(4))}return 0}const Dd=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const r=[];for(const a of o){const{id:l}=a,c=n.get(l);if(c){const d=kd(c,t);d>0&&r.push({id:l,data:{droppableContainer:a,value:d}})}}return r.sort(Id)};function Ed(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function ka(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ve}function Ad(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return r.reduce((l,c)=>({...l,top:l.top+e*c.y,bottom:l.bottom+e*c.y,left:l.left+e*c.x,right:l.right+e*c.x}),{...n})}}const Pd=Ad(1);function Od(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ld(e,t,n){const o=Od(t);if(!o)return e;const{scaleX:r,scaleY:a,x:l,y:c}=o,d=e.left-l-(1-r)*parseFloat(n),u=e.top-c-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),f=r?e.width/r:e.width,p=a?e.height/a:e.height;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d}}const $d={ignoreTransform:!1};function St(e,t){t===void 0&&(t=$d);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=_e(e).getComputedStyle(e);u&&(n=Ld(n,u,f))}const{top:o,left:r,width:a,height:l,bottom:c,right:d}=n;return{top:o,left:r,width:a,height:l,bottom:c,right:d}}function Xs(e){return St(e,{ignoreTransform:!0})}function zd(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Fd(e,t){return t===void 0&&(t=_e(e).getComputedStyle(e)),t.position==="fixed"}function Bd(e,t){t===void 0&&(t=_e(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const a=t[r];return typeof a=="string"?n.test(a):!1})}function Es(e,t){const n=[];function o(r){if(t!=null&&n.length>=t||!r)return n;if(Ts(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Ut(r)||Ia(r)||n.includes(r))return n;const a=_e(e).getComputedStyle(r);return r!==e&&Bd(r,a)&&n.push(r),Fd(r,a)?n:o(r.parentNode)}return e?o(e):n}function Da(e){const[t]=Es(e,1);return t??null}function Pn(e){return!In||!e?null:jt(e)?e:Ms(e)?Ts(e)||e===Nt(e).scrollingElement?window:Ut(e)?e:null:null}function Ea(e){return jt(e)?e.scrollX:e.scrollLeft}function Aa(e){return jt(e)?e.scrollY:e.scrollTop}function Qn(e){return{x:Ea(e),y:Aa(e)}}var he;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(he||(he={}));function Pa(e){return!In||!e?!1:e===document.scrollingElement}function Oa(e){const t={x:0,y:0},n=Pa(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},o={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},r=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,l=e.scrollTop>=o.y,c=e.scrollLeft>=o.x;return{isTop:r,isLeft:a,isBottom:l,isRight:c,maxScroll:o,minScroll:t}}const Hd={x:.2,y:.2};function Vd(e,t,n,o,r){let{top:a,left:l,right:c,bottom:d}=n;o===void 0&&(o=10),r===void 0&&(r=Hd);const{isTop:u,isBottom:f,isLeft:p,isRight:m}=Oa(e),x={x:0,y:0},g={x:0,y:0},h={height:t.height*r.y,width:t.width*r.x};return!u&&a<=t.top+h.height?(x.y=he.Backward,g.y=o*Math.abs((t.top+h.height-a)/h.height)):!f&&d>=t.bottom-h.height&&(x.y=he.Forward,g.y=o*Math.abs((t.bottom-h.height-d)/h.height)),!m&&c>=t.right-h.width?(x.x=he.Forward,g.x=o*Math.abs((t.right-h.width-c)/h.width)):!p&&l<=t.left+h.width&&(x.x=he.Backward,g.x=o*Math.abs((t.left+h.width-l)/h.width)),{direction:x,speed:g}}function Ud(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:t,left:n,right:o,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:o,bottom:r,width:e.clientWidth,height:e.clientHeight}}function La(e){return e.reduce((t,n)=>bt(t,Qn(n)),Ve)}function Gd(e){return e.reduce((t,n)=>t+Ea(n),0)}function Wd(e){return e.reduce((t,n)=>t+Aa(n),0)}function Kd(e,t){if(t===void 0&&(t=St),!e)return;const{top:n,left:o,bottom:r,right:a}=t(e);Da(e)&&(r<=0||a<=0||n>=window.innerHeight||o>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const qd=[["x",["left","right"],Gd],["y",["top","bottom"],Wd]];class As{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=Es(n),r=La(o);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,l,c]of qd)for(const d of l)Object.defineProperty(this,d,{get:()=>{const u=c(o),f=r[a]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class At{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...n)})},this.target=t}add(t,n,o){var r;(r=this.target)==null||r.addEventListener(t,n,o),this.listeners.push([t,n,o])}}function Xd(e){const{EventTarget:t}=_e(e);return e instanceof t?e:Nt(e)}function On(e,t){const n=Math.abs(e.x),o=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+o**2)>t:"x"in t&&"y"in t?n>t.x&&o>t.y:"x"in t?n>t.x:"y"in t?o>t.y:!1}var Pe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Pe||(Pe={}));function Ys(e){e.preventDefault()}function Yd(e){e.stopPropagation()}var K;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(K||(K={}));const $a={start:[K.Space,K.Enter],cancel:[K.Esc],end:[K.Space,K.Enter]},Zd=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case K.Right:return{...n,x:n.x+25};case K.Left:return{...n,x:n.x-25};case K.Down:return{...n,y:n.y+25};case K.Up:return{...n,y:n.y-25}}};class za{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new At(Nt(n)),this.windowListeners=new At(_e(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pe.Resize,this.handleCancel),this.windowListeners.add(Pe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,o=t.node.current;o&&Kd(o),n(Ve)}handleKeyDown(t){if(Ds(t)){const{active:n,context:o,options:r}=this.props,{keyboardCodes:a=$a,coordinateGetter:l=Zd,scrollBehavior:c="smooth"}=r,{code:d}=t;if(a.end.includes(d)){this.handleEnd(t);return}if(a.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=o.current,f=u?{x:u.left,y:u.top}:Ve;this.referenceCoordinates||(this.referenceCoordinates=f);const p=l(t,{active:n,context:o.current,currentCoordinates:f});if(p){const m=pn(p,f),x={x:0,y:0},{scrollableAncestors:g}=o.current;for(const h of g){const v=t.code,{isTop:w,isRight:b,isLeft:y,isBottom:S,maxScroll:j,minScroll:R}=Oa(h),C=Ud(h),I={x:Math.min(v===K.Right?C.right-C.width/2:C.right,Math.max(v===K.Right?C.left:C.left+C.width/2,p.x)),y:Math.min(v===K.Down?C.bottom-C.height/2:C.bottom,Math.max(v===K.Down?C.top:C.top+C.height/2,p.y))},D=v===K.Right&&!b||v===K.Left&&!y,T=v===K.Down&&!S||v===K.Up&&!w;if(D&&I.x!==p.x){const E=h.scrollLeft+m.x,F=v===K.Right&&E<=j.x||v===K.Left&&E>=R.x;if(F&&!m.y){h.scrollTo({left:E,behavior:c});return}F?x.x=h.scrollLeft-E:x.x=v===K.Right?h.scrollLeft-j.x:h.scrollLeft-R.x,x.x&&h.scrollBy({left:-x.x,behavior:c});break}else if(T&&I.y!==p.y){const E=h.scrollTop+m.y,F=v===K.Down&&E<=j.y||v===K.Up&&E>=R.y;if(F&&!m.x){h.scrollTo({top:E,behavior:c});return}F?x.y=h.scrollTop-E:x.y=v===K.Down?h.scrollTop-j.y:h.scrollTop-R.y,x.y&&h.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(t,bt(pn(p,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:o}=this.props;t.preventDefault(),o(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}za.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:o=$a,onActivation:r}=t,{active:a}=n;const{code:l}=e.nativeEvent;if(o.start.includes(l)){const c=a.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),r==null||r({event:e.nativeEvent}),!0)}return!1}}];function Zs(e){return!!(e&&"distance"in e)}function Js(e){return!!(e&&"delay"in e)}class Ps{constructor(t,n,o){var r;o===void 0&&(o=Xd(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:l}=a;this.props=t,this.events=n,this.document=Nt(l),this.documentListeners=new At(this.document),this.listeners=new At(o),this.windowListeners=new At(_e(l)),this.initialCoordinates=(r=Jn(a))!=null?r:Ve,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:o}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(Pe.Resize,this.handleCancel),this.windowListeners.add(Pe.DragStart,Ys),this.windowListeners.add(Pe.VisibilityChange,this.handleCancel),this.windowListeners.add(Pe.ContextMenu,Ys),this.documentListeners.add(Pe.Keydown,this.handleKeydown),n){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Js(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(Zs(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Pe.Click,Yd,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:o,initialCoordinates:r,props:a}=this,{onMove:l,options:{activationConstraint:c}}=a;if(!r)return;const d=(n=Jn(t))!=null?n:Ve,u=pn(r,d);if(!o&&c){if(Zs(c)){if(c.tolerance!=null&&On(u,c.tolerance))return this.handleCancel();if(On(u,c.distance))return this.handleStart()}return Js(c)&&On(u,c.tolerance)?this.handleCancel():void 0}t.cancelable&&t.preventDefault(),l(d)}handleEnd(){const{onEnd:t}=this.props;this.detach(),t()}handleCancel(){const{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===K.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Jd={move:{name:"pointermove"},end:{name:"pointerup"}};class Os extends Ps{constructor(t){const{event:n}=t,o=Nt(n.target);super(t,Jd,o)}}Os.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;return!n.isPrimary||n.button!==0?!1:(o==null||o({event:n}),!0)}}];const Qd={move:{name:"mousemove"},end:{name:"mouseup"}};var es;(function(e){e[e.RightClick=2]="RightClick"})(es||(es={}));class eu extends Ps{constructor(t){super(t,Qd,Nt(t.event.target))}}eu.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;return n.button===es.RightClick?!1:(o==null||o({event:n}),!0)}}];const Ln={move:{name:"touchmove"},end:{name:"touchend"}};class tu extends Ps{constructor(t){super(t,Ln)}static setup(){return window.addEventListener(Ln.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ln.move.name,t)};function t(){}}}tu.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;const{touches:r}=n;return r.length>1?!1:(o==null||o({event:n}),!0)}}];var Pt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Pt||(Pt={}));var hn;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(hn||(hn={}));function nu(e){let{acceleration:t,activator:n=Pt.Pointer,canScroll:o,draggingRect:r,enabled:a,interval:l=5,order:c=hn.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:p,threshold:m}=e;const x=ou({delta:p,disabled:!a}),[g,h]=ud(),v=i.useRef({x:0,y:0}),w=i.useRef({x:0,y:0}),b=i.useMemo(()=>{switch(n){case Pt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Pt.DraggableRect:return r}},[n,r,d]),y=i.useRef(null),S=i.useCallback(()=>{const R=y.current;if(!R)return;const C=v.current.x*w.current.x,I=v.current.y*w.current.y;R.scrollBy(C,I)},[]),j=i.useMemo(()=>c===hn.TreeOrder?[...u].reverse():u,[c,u]);i.useEffect(()=>{if(!a||!u.length||!b){h();return}for(const R of j){if((o==null?void 0:o(R))===!1)continue;const C=u.indexOf(R),I=f[C];if(!I)continue;const{direction:D,speed:T}=Vd(R,I,b,t,m);for(const E of["x","y"])x[E][D[E]]||(T[E]=0,D[E]=0);if(T.x>0||T.y>0){h(),y.current=R,g(S,l),v.current=T,w.current=D;return}}v.current={x:0,y:0},w.current={x:0,y:0},h()},[t,S,o,h,a,l,JSON.stringify(b),JSON.stringify(x),g,u,j,f,JSON.stringify(m)])}const su={x:{[he.Backward]:!1,[he.Forward]:!1},y:{[he.Backward]:!1,[he.Forward]:!1}};function ou(e){let{delta:t,disabled:n}=e;const o=Zn(t);return Gt(r=>{if(n||!o||!r)return su;const a={x:Math.sign(t.x-o.x),y:Math.sign(t.y-o.y)};return{x:{[he.Backward]:r.x[he.Backward]||a.x===-1,[he.Forward]:r.x[he.Forward]||a.x===1},y:{[he.Backward]:r.y[he.Backward]||a.y===-1,[he.Forward]:r.y[he.Forward]||a.y===1}}},[n,t,o])}function ru(e,t){const n=t!==null?e.get(t):void 0,o=n?n.node.current:null;return Gt(r=>{var a;return t===null?null:(a=o??r)!=null?a:null},[o,t])}function au(e,t){return i.useMemo(()=>e.reduce((n,o)=>{const{sensor:r}=o,a=r.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,o)}));return[...n,...a]},[]),[e,t])}var Ft;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ft||(Ft={}));var ts;(function(e){e.Optimized="optimized"})(ts||(ts={}));const Qs=new Map;function iu(e,t){let{dragging:n,dependencies:o,config:r}=t;const[a,l]=i.useState(null),{frequency:c,measure:d,strategy:u}=r,f=i.useRef(e),p=v(),m=$t(p),x=i.useCallback(function(w){w===void 0&&(w=[]),!m.current&&l(b=>b===null?w:b.concat(w.filter(y=>!b.includes(y))))},[m]),g=i.useRef(null),h=Gt(w=>{if(p&&!n)return Qs;if(!w||w===Qs||f.current!==e||a!=null){const b=new Map;for(let y of e){if(!y)continue;if(a&&a.length>0&&!a.includes(y.id)&&y.rect.current){b.set(y.id,y.rect.current);continue}const S=y.node.current,j=S?new As(d(S),S):null;y.rect.current=j,j&&b.set(y.id,j)}return b}return w},[e,a,n,p,d]);return i.useEffect(()=>{f.current=e},[e]),i.useEffect(()=>{p||x()},[n,p]),i.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),i.useEffect(()=>{p||typeof c!="number"||g.current!==null||(g.current=setTimeout(()=>{x(),g.current=null},c))},[c,p,x,...o]),{droppableRects:h,measureDroppableContainers:x,measuringScheduled:a!=null};function v(){switch(u){case Ft.Always:return!1;case Ft.BeforeDragging:return n;default:return!n}}}function Fa(e,t){return Gt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function lu(e,t){return Fa(e,t)}function cu(e){let{callback:t,disabled:n}=e;const o=ks(t),r=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(o)},[o,n]);return i.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function Mn(e){let{callback:t,disabled:n}=e;const o=ks(t),r=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(o)},[n]);return i.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function du(e){return new As(St(e),e)}function eo(e,t,n){t===void 0&&(t=du);const[o,r]=i.useReducer(c,null),a=cu({callback(d){if(e)for(const u of d){const{type:f,target:p}=u;if(f==="childList"&&p instanceof HTMLElement&&p.contains(e)){r();break}}}}),l=Mn({callback:r});return He(()=>{r(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),o;function c(d){if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f}}function uu(e){const t=Fa(e);return ka(e,t)}const to=[];function pu(e){const t=i.useRef(e),n=Gt(o=>e?o&&o!==to&&e&&t.current&&e.parentNode===t.current.parentNode?o:Es(e):to,[e]);return i.useEffect(()=>{t.current=e},[e]),n}function fu(e){const[t,n]=i.useState(null),o=i.useRef(e),r=i.useCallback(a=>{const l=Pn(a.target);l&&n(c=>c?(c.set(l,Qn(l)),new Map(c)):null)},[]);return i.useEffect(()=>{const a=o.current;if(e!==a){l(a);const c=e.map(d=>{const u=Pn(d);return u?(u.addEventListener("scroll",r,{passive:!0}),[u,Qn(u)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),o.current=e}return()=>{l(e),l(a)};function l(c){c.forEach(d=>{const u=Pn(d);u==null||u.removeEventListener("scroll",r)})}},[r,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,l)=>bt(a,l),Ve):La(e):Ve,[e,t])}function no(e,t){t===void 0&&(t=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},t),i.useEffect(()=>{const o=e!==Ve;o&&!n.current&&(n.current=e),!o&&n.current&&(n.current=null)},[e]),n.current?pn(e,n.current):Ve}function hu(e){i.useEffect(()=>{if(!In)return;const t=e.map(n=>{let{sensor:o}=n;return o.setup==null?void 0:o.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function mu(e,t){return i.useMemo(()=>e.reduce((n,o)=>{let{eventName:r,handler:a}=o;return n[r]=l=>{a(l,t)},n},{}),[e,t])}function Ba(e){return i.useMemo(()=>e?zd(e):null,[e])}const $n=[];function xu(e,t){t===void 0&&(t=St);const[n]=e,o=Ba(n?_e(n):null),[r,a]=i.useReducer(c,$n),l=Mn({callback:a});return e.length>0&&r===$n&&a(),He(()=>{e.length?e.forEach(d=>l==null?void 0:l.observe(d)):(l==null||l.disconnect(),a())},[e]),r;function c(){return e.length?e.map(d=>Pa(d)?o:new As(t(d),d)):$n}}function gu(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ut(t)?t:e}function vu(e){let{measure:t}=e;const[n,o]=i.useState(null),r=i.useCallback(u=>{for(const{target:f}of u)if(Ut(f)){o(p=>{const m=t(f);return p?{...p,width:m.width,height:m.height}:m});break}},[t]),a=Mn({callback:r}),l=i.useCallback(u=>{const f=gu(u);a==null||a.disconnect(),f&&(a==null||a.observe(f)),o(f?t(f):null)},[t,a]),[c,d]=un(l);return i.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const bu=[{sensor:Os,options:{}},{sensor:za,options:{}}],yu={current:{}},rn={draggable:{measure:Xs},droppable:{measure:Xs,strategy:Ft.WhileDragging,frequency:ts.Optimized},dragOverlay:{measure:St}};class Ot extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,o;return(n=(o=this.get(t))==null?void 0:o.node.current)!=null?n:void 0}}const wu={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ot,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rn,measureDroppableContainers:fn,windowRect:null,measuringScheduled:!1},Cu={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fn,draggableNodes:new Map,over:null,measureDroppableContainers:fn},Tn=i.createContext(Cu),Ha=i.createContext(wu);function ju(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ot}}}function Nu(e,t){switch(t.type){case ce.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ce.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case ce.DragEnd:case ce.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ce.RegisterDroppable:{const{element:n}=t,{id:o}=n,r=new Ot(e.droppable.containers);return r.set(o,n),{...e,droppable:{...e.droppable,containers:r}}}case ce.SetDroppableDisabled:{const{id:n,key:o,disabled:r}=t,a=e.droppable.containers.get(n);if(!a||o!==a.key)return e;const l=new Ot(e.droppable.containers);return l.set(n,{...a,disabled:r}),{...e,droppable:{...e.droppable,containers:l}}}case ce.UnregisterDroppable:{const{id:n,key:o}=t,r=e.droppable.containers.get(n);if(!r||o!==r.key)return e;const a=new Ot(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Su(e){let{disabled:t}=e;const{active:n,activatorEvent:o,draggableNodes:r}=i.useContext(Tn),a=Zn(o),l=Zn(n==null?void 0:n.id);return i.useEffect(()=>{if(!t&&!o&&a&&l!=null){if(!Ds(a)||document.activeElement===a.target)return;const c=r.get(l);if(!c)return;const{activatorNode:d,node:u}=c;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const p=hd(f);if(p){p.focus();break}}})}},[o,t,r,l,a]),null}function Ru(e,t){let{transform:n,...o}=t;return e!=null&&e.length?e.reduce((r,a)=>a({transform:r,...o}),n):n}function _u(e){return i.useMemo(()=>({draggable:{...rn.draggable,...e==null?void 0:e.draggable},droppable:{...rn.droppable,...e==null?void 0:e.droppable},dragOverlay:{...rn.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Iu(e){let{activeNode:t,measure:n,initialRect:o,config:r=!0}=e;const a=i.useRef(!1),{x:l,y:c}=typeof r=="boolean"?{x:r,y:r}:r;He(()=>{if(!l&&!c||!t){a.current=!1;return}if(a.current||!o)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),p=ka(f,o);if(l||(p.x=0),c||(p.y=0),a.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=Da(u);m&&m.scrollBy({top:p.y,left:p.x})}},[t,l,c,o,n])}const Va=i.createContext({...Ve,scaleX:1,scaleY:1});var Je;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Je||(Je={}));const Mu=i.memo(function(t){var n,o,r,a;let{id:l,accessibility:c,autoScroll:d=!0,children:u,sensors:f=bu,collisionDetection:p=Dd,measuring:m,modifiers:x,...g}=t;const h=i.useReducer(Nu,void 0,ju),[v,w]=h,[b,y]=yd(),[S,j]=i.useState(Je.Uninitialized),R=S===Je.Initialized,{draggable:{active:C,nodes:I,translate:D},droppable:{containers:T}}=v,E=C?I.get(C):null,F=i.useRef({initial:null,translated:null}),X=i.useMemo(()=>{var xe;return C!=null?{id:C,data:(xe=E==null?void 0:E.data)!=null?xe:yu,rect:F}:null},[C,E]),ee=i.useRef(null),[ae,Y]=i.useState(null),[W,H]=i.useState(null),G=$t(g,Object.values(g)),se=Wt("DndDescribedBy",l),te=i.useMemo(()=>T.getEnabled(),[T]),oe=_u(m),{droppableRects:ve,measureDroppableContainers:fe,measuringScheduled:we}=iu(te,{dragging:R,dependencies:[D.x,D.y],config:oe.droppable}),re=ru(I,C),A=i.useMemo(()=>W?Jn(W):null,[W]),U=Ai(),J=lu(re,oe.draggable.measure);Iu({activeNode:C?I.get(C):null,config:U.layoutShiftCompensation,initialRect:J,measure:oe.draggable.measure});const k=eo(re,oe.draggable.measure,J),V=eo(re?re.parentElement:null),B=i.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:ve,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=T.getNodeFor((n=B.current.over)==null?void 0:n.id),le=vu({measure:oe.dragOverlay.measure}),Ie=(o=le.nodeRef.current)!=null?o:re,De=R?(r=le.rect)!=null?r:k:null,Ye=!!(le.nodeRef.current&&le.rect),Kt=uu(Ye?null:k),M=Ba(Ie?_e(Ie):null),P=pu(R?be??re:null),_=xu(P),z=Ru(x,{transform:{x:D.x-Kt.x,y:D.y-Kt.y,scaleX:1,scaleY:1},activatorEvent:W,active:X,activeNodeRect:k,containerNodeRect:V,draggingNodeRect:De,over:B.current.over,overlayNodeRect:le.rect,scrollableAncestors:P,scrollableAncestorRects:_,windowRect:M}),L=A?bt(A,D):null,O=fu(P),me=no(O),ye=no(O,[k]),Ee=bt(z,me),Re=De?Pd(De,z):null,Oe=X&&Re?p({active:X,collisionRect:Re,droppableRects:ve,droppableContainers:te,pointerCoordinates:L}):null,We=Md(Oe,"id"),[Le,Rt]=i.useState(null),qt=Ye?z:bt(z,ye),Dn=Ed(qt,(a=Le==null?void 0:Le.rect)!=null?a:null,k),Xt=i.useCallback((xe,Me)=>{let{sensor:Te,options:Ze}=Me;if(ee.current==null)return;const Ae=I.get(ee.current);if(!Ae)return;const $e=xe.nativeEvent,Ue=new Te({active:ee.current,activeNode:Ae,event:$e,options:Ze,context:B,onStart(ze){const _t=ee.current;if(_t==null)return;const It=I.get(_t);if(!It)return;const{onDragStart:Yt}=G.current,Zt={active:{id:_t,data:It.data,rect:F}};Qe.unstable_batchedUpdates(()=>{Yt==null||Yt(Zt),j(Je.Initializing),w({type:ce.DragStart,initialCoordinates:ze,active:_t}),b({type:"onDragStart",event:Zt})})},onMove(ze){w({type:ce.DragMove,coordinates:ze})},onEnd:gt(ce.DragEnd),onCancel:gt(ce.DragCancel)});Qe.unstable_batchedUpdates(()=>{Y(Ue),H(xe.nativeEvent)});function gt(ze){return async function(){const{active:It,collisions:Yt,over:Zt,scrollAdjustedTranslate:Bs}=B.current;let Mt=null;if(It&&Bs){const{cancelDrop:Tt}=G.current;Mt={activatorEvent:$e,active:It,collisions:Yt,delta:Bs,over:Zt},ze===ce.DragEnd&&typeof Tt=="function"&&await Promise.resolve(Tt(Mt))&&(ze=ce.DragCancel)}ee.current=null,Qe.unstable_batchedUpdates(()=>{w({type:ze}),j(Je.Uninitialized),Rt(null),Y(null),H(null);const Tt=ze===ce.DragEnd?"onDragEnd":"onDragCancel";if(Mt){const En=G.current[Tt];En==null||En(Mt),b({type:Tt,event:Mt})}})}}},[I]),ki=i.useCallback((xe,Me)=>(Te,Ze)=>{const Ae=Te.nativeEvent,$e=I.get(Ze);if(ee.current!==null||!$e||Ae.dndKit||Ae.defaultPrevented)return;const Ue={active:$e};xe(Te,Me.options,Ue)===!0&&(Ae.dndKit={capturedBy:Me.sensor},ee.current=Ze,Xt(Te,Me))},[I,Xt]),Fs=au(f,ki);hu(f),He(()=>{k&&S===Je.Initializing&&j(Je.Initialized)},[k,S]),i.useEffect(()=>{const{onDragMove:xe}=G.current,{active:Me,activatorEvent:Te,collisions:Ze,over:Ae}=B.current;if(!Me||!Te)return;const $e={active:Me,activatorEvent:Te,collisions:Ze,delta:{x:Ee.x,y:Ee.y},over:Ae};Qe.unstable_batchedUpdates(()=>{xe==null||xe($e),b({type:"onDragMove",event:$e})})},[Ee.x,Ee.y]),i.useEffect(()=>{const{active:xe,activatorEvent:Me,collisions:Te,droppableContainers:Ze,scrollAdjustedTranslate:Ae}=B.current;if(!xe||ee.current==null||!Me||!Ae)return;const{onDragOver:$e}=G.current,Ue=Ze.get(We),gt=Ue&&Ue.rect.current?{id:Ue.id,rect:Ue.rect.current,data:Ue.data,disabled:Ue.disabled}:null,ze={active:xe,activatorEvent:Me,collisions:Te,delta:{x:Ae.x,y:Ae.y},over:gt};Qe.unstable_batchedUpdates(()=>{Rt(gt),$e==null||$e(ze),b({type:"onDragOver",event:ze})})},[We]),He(()=>{B.current={activatorEvent:W,active:X,activeNode:re,collisionRect:Re,collisions:Oe,droppableRects:ve,draggableNodes:I,draggingNode:Ie,draggingNodeRect:De,droppableContainers:T,over:Le,scrollableAncestors:P,scrollAdjustedTranslate:Ee},F.current={initial:De,translated:Re}},[X,re,Oe,Re,I,Ie,De,ve,T,Le,P,Ee]),nu({...U,delta:D,draggingRect:Re,pointerCoordinates:L,scrollableAncestors:P,scrollableAncestorRects:_});const Di=i.useMemo(()=>({active:X,activeNode:re,activeNodeRect:k,activatorEvent:W,collisions:Oe,containerNodeRect:V,dragOverlay:le,draggableNodes:I,droppableContainers:T,droppableRects:ve,over:Le,measureDroppableContainers:fe,scrollableAncestors:P,scrollableAncestorRects:_,measuringConfiguration:oe,measuringScheduled:we,windowRect:M}),[X,re,k,W,Oe,V,le,I,T,ve,Le,fe,P,_,oe,we,M]),Ei=i.useMemo(()=>({activatorEvent:W,activators:Fs,active:X,activeNodeRect:k,ariaDescribedById:{draggable:se},dispatch:w,draggableNodes:I,over:Le,measureDroppableContainers:fe}),[W,Fs,X,k,w,se,I,Le,fe]);return N.createElement(Ta.Provider,{value:y},N.createElement(Tn.Provider,{value:Ei},N.createElement(Ha.Provider,{value:Di},N.createElement(Va.Provider,{value:Dn},u)),N.createElement(Su,{disabled:(c==null?void 0:c.restoreFocus)===!1})),N.createElement(jd,{...c,hiddenTextDescribedById:se}));function Ai(){const xe=(ae==null?void 0:ae.autoScrollEnabled)===!1,Me=typeof d=="object"?d.enabled===!1:d===!1,Te=R&&!xe&&!Me;return typeof d=="object"?{...d,enabled:Te}:{enabled:Te}}}),Tu=i.createContext(null),so="button",ku="Droppable";function Du(e){let{id:t,data:n,disabled:o=!1,attributes:r}=e;const a=Wt(ku),{activators:l,activatorEvent:c,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:p,over:m}=i.useContext(Tn),{role:x=so,roleDescription:g="draggable",tabIndex:h=0}=r??{},v=(d==null?void 0:d.id)===t,w=i.useContext(v?Va:Tu),[b,y]=un(),[S,j]=un(),R=mu(l,t),C=$t(n);He(()=>(p.set(t,{id:t,key:a,node:b,activatorNode:S,data:C}),()=>{const D=p.get(t);D&&D.key===a&&p.delete(t)}),[p,t]);const I=i.useMemo(()=>({role:x,tabIndex:h,"aria-disabled":o,"aria-pressed":v&&x===so?!0:void 0,"aria-roledescription":g,"aria-describedby":f.draggable}),[o,x,h,v,g,f.draggable]);return{active:d,activatorEvent:c,activeNodeRect:u,attributes:I,isDragging:v,listeners:o?void 0:R,node:b,over:m,setNodeRef:y,setActivatorNodeRef:j,transform:w}}function Eu(){return i.useContext(Ha)}const Au="Droppable",Pu={timeout:25};function Ou(e){let{data:t,disabled:n=!1,id:o,resizeObserverConfig:r}=e;const a=Wt(Au),{active:l,dispatch:c,over:d,measureDroppableContainers:u}=i.useContext(Tn),f=i.useRef({disabled:n}),p=i.useRef(!1),m=i.useRef(null),x=i.useRef(null),{disabled:g,updateMeasurementsFor:h,timeout:v}={...Pu,...r},w=$t(h??o),b=i.useCallback(()=>{if(!p.current){p.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),x.current=null},v)},[v]),y=Mn({callback:b,disabled:g||!l}),S=i.useCallback((I,D)=>{y&&(D&&(y.unobserve(D),p.current=!1),I&&y.observe(I))},[y]),[j,R]=un(S),C=$t(t);return i.useEffect(()=>{!y||!j.current||(y.disconnect(),p.current=!1,y.observe(j.current))},[j,y]),He(()=>(c({type:ce.RegisterDroppable,element:{id:o,key:a,disabled:n,node:j,rect:m,data:C}}),()=>c({type:ce.UnregisterDroppable,key:a,id:o})),[o]),i.useEffect(()=>{n!==f.current.disabled&&(c({type:ce.SetDroppableDisabled,id:o,key:a,disabled:n}),f.current.disabled=n)},[o,a,n,c]),{active:l,rect:m,isOver:(d==null?void 0:d.id)===o,node:j,over:d,setNodeRef:R}}function Ls(e,t,n){const o=e.slice();return o.splice(n<0?o.length+n:n,0,o.splice(t,1)[0]),o}function Lu(e,t){return e.reduce((n,o,r)=>{const a=t.get(o);return a&&(n[r]=a),n},Array(e.length))}function Qt(e){return e!==null&&e>=0}function $u(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function zu(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ua=e=>{let{rects:t,activeIndex:n,overIndex:o,index:r}=e;const a=Ls(t,o,n),l=t[r],c=a[r];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},en={scaleX:1,scaleY:1},Fu=e=>{var t;let{activeIndex:n,activeNodeRect:o,index:r,rects:a,overIndex:l}=e;const c=(t=a[n])!=null?t:o;if(!c)return null;if(r===n){const u=a[l];return u?{x:0,y:n<l?u.top+u.height-(c.top+c.height):u.top-c.top,...en}:null}const d=Bu(a,r,n);return r>n&&r<=l?{x:0,y:-c.height-d,...en}:r<n&&r>=l?{x:0,y:c.height+d,...en}:{x:0,y:0,...en}};function Bu(e,t,n){const o=e[t],r=e[t-1],a=e[t+1];return o?n<t?r?o.top-(r.top+r.height):a?a.top-(o.top+o.height):0:a?a.top-(o.top+o.height):r?o.top-(r.top+r.height):0:0}const Ga="Sortable",Wa=N.createContext({activeIndex:-1,containerId:Ga,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ua,disabled:{draggable:!1,droppable:!1}});function Hu(e){let{children:t,id:n,items:o,strategy:r=Ua,disabled:a=!1}=e;const{active:l,dragOverlay:c,droppableRects:d,over:u,measureDroppableContainers:f}=Eu(),p=Wt(Ga,n),m=c.rect!==null,x=i.useMemo(()=>o.map(R=>typeof R=="object"&&"id"in R?R.id:R),[o]),g=l!=null,h=l?x.indexOf(l.id):-1,v=u?x.indexOf(u.id):-1,w=i.useRef(x),b=!$u(x,w.current),y=v!==-1&&h===-1||b,S=zu(a);He(()=>{b&&g&&f(x)},[b,x,g,f]),i.useEffect(()=>{w.current=x},[x]);const j=i.useMemo(()=>({activeIndex:h,containerId:p,disabled:S,disableTransforms:y,items:x,overIndex:v,useDragOverlay:m,sortedRects:Lu(x,d),strategy:r}),[h,p,S.draggable,S.droppable,y,x,v,d,m,r]);return N.createElement(Wa.Provider,{value:j},t)}const Vu=e=>{let{id:t,items:n,activeIndex:o,overIndex:r}=e;return Ls(n,o,r).indexOf(t)},Uu=e=>{let{containerId:t,isSorting:n,wasDragging:o,index:r,items:a,newIndex:l,previousItems:c,previousContainerId:d,transition:u}=e;return!u||!o||c!==a&&r===l?!1:n?!0:l!==r&&t===d},Gu={duration:200,easing:"ease"},Ka="transform",Wu=zt.Transition.toString({property:Ka,duration:0,easing:"linear"}),Ku={roleDescription:"sortable"};function qu(e){let{disabled:t,index:n,node:o,rect:r}=e;const[a,l]=i.useState(null),c=i.useRef(n);return He(()=>{if(!t&&n!==c.current&&o.current){const d=r.current;if(d){const u=St(o.current,{ignoreTransform:!0}),f={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(f.x||f.y)&&l(f)}}n!==c.current&&(c.current=n)},[t,n,o,r]),i.useEffect(()=>{a&&l(null)},[a]),a}function Xu(e){let{animateLayoutChanges:t=Uu,attributes:n,disabled:o,data:r,getNewIndex:a=Vu,id:l,strategy:c,resizeObserverConfig:d,transition:u=Gu}=e;const{items:f,containerId:p,activeIndex:m,disabled:x,disableTransforms:g,sortedRects:h,overIndex:v,useDragOverlay:w,strategy:b}=i.useContext(Wa),y=Yu(o,x),S=f.indexOf(l),j=i.useMemo(()=>({sortable:{containerId:p,index:S,items:f},...r}),[p,r,S,f]),R=i.useMemo(()=>f.slice(f.indexOf(l)),[f,l]),{rect:C,node:I,isOver:D,setNodeRef:T}=Ou({id:l,data:j,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...d}}),{active:E,activatorEvent:F,activeNodeRect:X,attributes:ee,setNodeRef:ae,listeners:Y,isDragging:W,over:H,setActivatorNodeRef:G,transform:se}=Du({id:l,data:j,attributes:{...Ku,...n},disabled:y.draggable}),te=dd(T,ae),oe=!!E,ve=oe&&!g&&Qt(m)&&Qt(v),fe=!w&&W,we=fe&&ve?se:null,A=ve?we??(c??b)({rects:h,activeNodeRect:X,activeIndex:m,overIndex:v,index:S}):null,U=Qt(m)&&Qt(v)?a({id:l,items:f,activeIndex:m,overIndex:v}):S,J=E==null?void 0:E.id,k=i.useRef({activeId:J,items:f,newIndex:U,containerId:p}),V=f!==k.current.items,B=t({active:E,containerId:p,isDragging:W,isSorting:oe,id:l,index:S,items:f,newIndex:k.current.newIndex,previousItems:k.current.items,previousContainerId:k.current.containerId,transition:u,wasDragging:k.current.activeId!=null}),be=qu({disabled:!B,index:S,node:I,rect:C});return i.useEffect(()=>{oe&&k.current.newIndex!==U&&(k.current.newIndex=U),p!==k.current.containerId&&(k.current.containerId=p),f!==k.current.items&&(k.current.items=f)},[oe,U,p,f]),i.useEffect(()=>{if(J===k.current.activeId)return;if(J&&!k.current.activeId){k.current.activeId=J;return}const Ie=setTimeout(()=>{k.current.activeId=J},50);return()=>clearTimeout(Ie)},[J]),{active:E,activeIndex:m,attributes:ee,data:j,rect:C,index:S,newIndex:U,items:f,isOver:D,isSorting:oe,isDragging:W,listeners:Y,node:I,overIndex:v,over:H,setNodeRef:te,setActivatorNodeRef:G,setDroppableNodeRef:T,setDraggableNodeRef:ae,transform:be??A,transition:le()};function le(){if(be||V&&k.current.newIndex===S)return Wu;if(!(fe&&!Ds(F)||!u)&&(oe||B))return zt.Transition.toString({...u,property:Ka})}}function Yu(e,t){var n,o;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(o=e==null?void 0:e.droppable)!=null?o:t.droppable}}K.Down,K.Right,K.Up,K.Left;const Zu=({field:e,updateField:t,removeField:n})=>{const{databaseType:o}=ie(),{t:r}=ge(),{attributes:a,listeners:l,setNodeRef:c,transform:d,transition:u}=Xu({id:e.id}),f=Us[o].map(m=>({label:m.name,value:m.id})),p={transform:zt.Transform.toString(d),transition:u};return s.jsxs("div",{className:"flex flex-1 touch-none flex-row justify-between p-1",ref:c,style:p,...a,children:[s.jsxs("div",{className:"flex w-8/12 items-center justify-start gap-1 overflow-hidden",children:[s.jsx("div",{className:"flex w-4 shrink-0 cursor-move items-center justify-center",...l,children:s.jsx(Rl,{className:"size-3.5  text-muted-foreground"})}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{className:"w-5/12",children:s.jsx(xt,{className:"h-8 w-full !truncate focus-visible:ring-0",type:"text",placeholder:r("side_panel.tables_section.table.field_name"),value:e.name,onChange:m=>t({name:m.target.value})})})}),s.jsx(pe,{children:e.name})]}),s.jsxs(de,{children:[s.jsx(ue,{className:"flex h-8 !w-5/12",asChild:!0,children:s.jsx("span",{children:s.jsx(rs,{className:"flex h-8 min-h-8 w-full",options:f,placeholder:r("side_panel.tables_section.table.field_type"),value:e.type.id,onChange:m=>t({type:Us[o].find(x=>x.id===m)}),emptyPlaceholder:r("side_panel.tables_section.table.no_types_found")})})}),s.jsx(pe,{children:e.type.name})]})]}),s.jsxs("div",{className:"flex w-4/12 justify-end gap-1 overflow-hidden",children:[s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(Yn,{pressed:e.nullable,onPressedChange:m=>t({nullable:m}),children:"N"})})}),s.jsx(pe,{children:r("side_panel.tables_section.table.nullable")})]}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(Yn,{pressed:e.primaryKey,onPressedChange:m=>t({unique:m,primaryKey:m}),children:s.jsx(Vo,{className:"h-3.5"})})})}),s.jsx(pe,{children:r("side_panel.tables_section.table.primary_key")})]}),s.jsxs(as,{children:[s.jsx(is,{asChild:!0,children:s.jsx(Q,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:s.jsx(Ho,{className:"size-3.5"})})}),s.jsx(ls,{className:"w-52",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"text-sm font-semibold",children:r("side_panel.tables_section.table.field_actions.title")}),s.jsx(Ke,{orientation:"horizontal"}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ht,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.field_actions.unique")}),s.jsx(_s,{checked:e.unique,disabled:e.primaryKey,onCheckedChange:m=>t({unique:!!m})})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ht,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.field_actions.comments")}),s.jsx(Po,{value:e.comments,onChange:m=>t({comments:m.target.value}),placeholder:r("side_panel.tables_section.table.field_actions.no_comments"),className:"w-full rounded-md bg-muted text-sm"})]})]}),s.jsx(Ke,{orientation:"horizontal"}),s.jsxs(Q,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:n,children:[s.jsx(nt,{className:"size-3.5 text-red-700"}),r("side_panel.tables_section.table.field_actions.delete_field")]})]})})]})]})]})},Ju=({fields:e,index:t,updateIndex:n,removeIndex:o})=>{const{t:r}=ge(),a=e.map(c=>({label:c.name,value:c.id})),l=c=>{const d=Array.isArray(c)?c:[c];n({fieldIds:d})};return s.jsxs("div",{className:"flex flex-1 flex-row justify-between gap-2 p-1",children:[s.jsx(rs,{className:"flex h-8 min-h-8 min-w-0 flex-1",multiple:!0,oneLine:!0,options:a,placeholder:r("side_panel.tables_section.table.index_select_fields"),value:t.fieldIds,onChange:l,emptyPlaceholder:r("side_panel.tables_section.table.no_types_found"),keepOrder:!0}),s.jsx("div",{className:"flex shrink-0",children:s.jsxs(as,{children:[s.jsx(is,{asChild:!0,children:s.jsx(Q,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:s.jsx(Ho,{className:"size-3.5"})})}),s.jsx(ls,{className:"w-52",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"text-sm font-semibold",children:r("side_panel.tables_section.table.index_actions.title")}),s.jsx(Ke,{orientation:"horizontal"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ht,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.index_actions.name")}),s.jsx(xt,{value:t.name,onChange:c=>n({name:c.target.value})})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsx(ht,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.index_actions.unique")}),s.jsx(_s,{checked:t.unique,onCheckedChange:c=>n({unique:!!c})})]}),s.jsx(Ke,{orientation:"horizontal"}),s.jsxs(Q,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:o,children:[s.jsx(nt,{className:"size-3.5 text-red-700"}),r("side_panel.tables_section.table.index_actions.delete_index")]})]})})]})})]})},qa=N.forwardRef(({color:e,onChange:t},n)=>s.jsxs(as,{children:[s.jsx(is,{asChild:!0,ref:n,children:s.jsx("div",{className:"h-6 w-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:e}})}),s.jsx(ls,{className:"w-fit",children:s.jsx("div",{className:"grid grid-cols-4 gap-2",children:xl.map(o=>s.jsx("div",{className:"size-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:o},onClick:()=>t(o)},o))})})]}));qa.displayName="ColorPicker";const Qu=({table:e})=>{const{updateField:t,removeField:n,createField:o,createIndex:r,removeIndex:a,updateIndex:l,updateTable:c}=ie(),{t:d}=ge(),{color:u}=e,[f,p]=N.useState(["fields"]),m=Sd(Nd(Os)),x=h=>{const{active:v,over:w}=h;if((v==null?void 0:v.id)!==(w==null?void 0:w.id)&&w&&v){const b=e.fields,y=b.findIndex(j=>j.id===v.id),S=b.findIndex(j=>j.id===w.id);c(e.id,{fields:Ls(b,y,S)})}},g=()=>{p(h=>h.includes("indexes")?h:[...h,"indexes"]),r(e.id)};return s.jsxs("div",{className:"flex flex-col gap-1 rounded-b-md border-l-[6px] px-1",style:{borderColor:u},children:[s.jsxs(Sn,{type:"multiple",className:"w-full",value:f,onValueChange:h=>p(h),children:[s.jsxs(ct,{value:"fields",className:"mb-2 border-y-0",children:[s.jsx(dt,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:s.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Hn,{className:"size-4"}),d("side_panel.tables_section.table.fields")]}),s.jsx("div",{className:"flex flex-row-reverse",children:s.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:s.jsx(Q,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:h=>{h.stopPropagation(),o(e.id)},children:s.jsx(Gs,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),s.jsx(ut,{className:"flex flex-col pb-0 pt-1",children:s.jsx(Mu,{sensors:m,collisionDetection:Td,onDragEnd:x,children:s.jsx(Hu,{items:e.fields,strategy:Fu,children:e.fields.map(h=>s.jsx(Zu,{field:h,updateField:v=>t(e.id,h.id,v),removeField:()=>n(e.id,h.id)},h.id))})})})]}),s.jsxs(ct,{value:"indexes",className:"mb-2 border-y-0",children:[s.jsx(dt,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:s.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Vn,{className:"size-4"}),d("side_panel.tables_section.table.indexes")]}),s.jsx("div",{className:"flex flex-row-reverse",children:s.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:s.jsx(Q,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:h=>{h.stopPropagation(),g()},children:s.jsx(Gs,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),s.jsx(ut,{className:"pb-0 pt-1",children:e.indexes.map(h=>s.jsx(Ju,{index:h,removeIndex:()=>a(e.id,h.id),updateIndex:v=>l(e.id,h.id,v),fields:e.fields},h.id))})]}),s.jsxs(ct,{value:"comments",className:"border-y-0",children:[s.jsx(dt,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:s.jsx("div",{className:"flex flex-1 items-center justify-between",children:s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Il,{className:"size-4"}),d("side_panel.tables_section.table.comments")]})})}),s.jsx(ut,{className:"pb-0 pt-1",children:s.jsx(Po,{value:e.comments,onChange:h=>c(e.id,{comments:h.target.value}),placeholder:d("side_panel.tables_section.table.no_comments"),className:"w-full rounded-md bg-muted text-sm focus-visible:ring-0"})})]})]}),s.jsx(Ke,{className:""}),s.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[s.jsx(qa,{color:u,onChange:h=>c(e.id,{color:h})}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(Q,{variant:"outline",className:"h-8 p-2 text-xs",onClick:g,children:[s.jsx(Vn,{className:"h-4"}),d("side_panel.tables_section.table.add_index")]}),s.jsxs(Q,{variant:"outline",className:"h-8 p-2 text-xs",onClick:()=>o(e.id),children:[s.jsx(Hn,{className:"h-4"}),d("side_panel.tables_section.table.add_field")]})]})]})]})},Xa=N.forwardRef(({table:e},t)=>s.jsxs(ct,{value:e.id,className:"rounded-md",ref:t,children:[s.jsx(dt,{className:"w-full rounded-md border-l-[6px] px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",style:{borderColor:e.color},asChild:!0,children:s.jsx(td,{table:e})}),s.jsx(ut,{children:s.jsx(Qu,{table:e})})]}));Xa.displayName="TableListItem";const ep=({tables:e})=>{const{openTableFromSidebar:t,openedTableInSidebar:n}=je(),o=N.useRef(null),r=i.useMemo(()=>e.reduce((c,d)=>(c[d.id]=N.createRef(),c),{}),[e]),a=i.useCallback(c=>{var d,u;return(u=(d=r[c])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[r]),l=i.useCallback(()=>{n&&o.current!==n&&(o.current=n,a(n))},[a,n]);return s.jsx(Sn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:n,onValueChange:t,onAnimationEnd:l,children:e.map(c=>s.jsx(Xa,{table:c,ref:r[c.id]},c.id))})},tp="/assets/empty_state-BMd8EWHz.png",kn=i.forwardRef(({title:e,description:t,className:n},o)=>s.jsxs("div",{ref:o,className:$("flex flex-1 flex-col items-center justify-center space-y-1",n),children:[s.jsx("img",{src:tp,alt:"Empty state",className:"w-32"}),s.jsx(ht,{className:"text-base",children:e}),s.jsx(ht,{className:"text-sm font-normal text-muted-foreground",children:t})]}));kn.displayName="EmptyState";const np=()=>{const{createTable:e,tables:t,filteredSchemas:n,schemas:o}=ie(),{openTableSchemaDialog:r}=Ht(),a=Qi(),{t:l}=ge(),{closeAllTablesInSidebar:c,openTableFromSidebar:d}=je(),[u,f]=N.useState(""),p=i.useMemo(()=>{const g=v=>{var w;return!((w=u==null?void 0:u.trim)!=null&&w.call(u))||v.name.toLowerCase().includes(u.toLowerCase())},h=v=>Dt(v,n);return t.filter(h).filter(g)},[t,u,n]),m=i.useCallback(async g=>{const v=-a.x/a.zoom+80/a.zoom,w=-a.y/a.zoom+80/a.zoom,b=await e({x:v,y:w,schema:g});d(b.id)},[e,d,a.x,a.y,a.zoom]),x=i.useCallback(async()=>{var g;if(f(""),((n==null?void 0:n.length)??0)>1)r({onConfirm:m,schemas:o.filter(h=>n==null?void 0:n.includes(h.id))});else{const h=(n==null?void 0:n.length)===1?(g=o.find(v=>v.id===n[0]))==null?void 0:g.name:void 0;m(h)}},[m,n,r,o,f]);return s.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[s.jsx("div",{children:s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(Q,{variant:"ghost",className:"size-8 p-0",onClick:c,children:s.jsx(ps,{className:"size-4"})})})}),s.jsx(pe,{children:l("side_panel.tables_section.collapse")})]})}),s.jsx("div",{className:"flex-1",children:s.jsx(xt,{type:"text",placeholder:l("side_panel.tables_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:u,onChange:g=>f(g.target.value)})}),s.jsxs(Q,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:x,children:[s.jsx(El,{className:"h-4"}),l("side_panel.tables_section.add_table")]})]}),s.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:s.jsx(cs,{className:"h-full",children:t.length===0?s.jsx(kn,{title:l("side_panel.tables_section.empty_state.title"),description:l("side_panel.tables_section.empty_state.description"),className:"mt-20"}):s.jsx(ep,{tables:p})})})]})},sp=({relationship:e})=>{const{updateRelationship:t,removeRelationship:n}=ie(),{fitView:o,deleteElements:r,setEdges:a}=Ge(),{t:l}=ge(),{hideSidePanel:c}=je(),[d,u]=N.useState(!1),{isMd:f}=wt("md"),[p,m]=N.useState(e.name),x=N.useRef(null),g=i.useCallback(()=>{d&&(p.trim()&&p!==e.name&&t(e.id,{name:p.trim()}),u(!1))},[p,e.id,t,d,e.name]);ko(x,g),Do("Enter",g);const h=y=>{y.stopPropagation(),u(!0)},v=i.useCallback(y=>{y.stopPropagation(),a(S=>S.map(j=>j.id==e.id?{...j,selected:!0}:{...j,selected:!1})),o({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.sourceTableId},{id:e.targetTableId}]}),f||c()},[o,e.sourceTableId,e.targetTableId,a,e.id,f,c]),w=i.useCallback(()=>{n(e.id),r({edges:[{id:e.id}]})},[e.id,n,r]),b=i.useCallback(()=>s.jsxs(Ns,{children:[s.jsx(Ss,{children:s.jsx(Be,{children:s.jsx(us,{})})}),s.jsxs(Rn,{className:"w-40",children:[s.jsx(_n,{children:l("side_panel.relationships_section.relationship.relationship_actions.title")}),s.jsx(vt,{}),s.jsx(Et,{children:s.jsxs(lt,{onClick:w,className:"flex justify-between !text-red-700",children:[l("side_panel.relationships_section.relationship.relationship_actions.delete_relationship"),s.jsx(nt,{className:"size-3.5 text-red-700"})]})})]})]}),[w,l]);return s.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[s.jsx("div",{className:"flex min-w-0 flex-1",children:d?s.jsx(xt,{ref:x,autoFocus:!0,type:"text",placeholder:e.name,value:p,onClick:y=>y.stopPropagation(),onChange:y=>m(y.target.value),className:"h-7 w-full focus-visible:ring-0"}):s.jsx("div",{className:"truncate",children:e.name})}),s.jsx("div",{className:"flex flex-row-reverse",children:d?s.jsx(Be,{onClick:g,children:s.jsx(Eo,{})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{children:b()}),s.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[s.jsx(Be,{onClick:h,children:s.jsx(bn,{})}),s.jsx(Be,{onClick:v,children:s.jsx(ds,{})})]})]})})]})},op=({relationship:e})=>{const{getTable:t,getField:n,updateRelationship:o,removeRelationship:r}=ie(),{deleteElements:a}=Ge(),{t:l}=ge(),c=i.useMemo(()=>gl({sourceCardinality:e.sourceCardinality,targetCardinality:e.targetCardinality}),[e.sourceCardinality,e.targetCardinality]),d=i.useCallback(g=>{const{sourceCardinality:h,targetCardinality:v}=vl(g);o(e.id,{sourceCardinality:h,targetCardinality:v})},[e.id,o]),u=t(e.targetTableId),f=n(e.targetTableId,e.targetFieldId),p=t(e.sourceTableId),m=n(e.sourceTableId,e.sourceFieldId),x=i.useCallback(()=>{r(e.id),a({edges:[{id:e.id}]})},[e.id,r,a]);return s.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[s.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Oo,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:l("side_panel.relationships_section.relationship.primary")})]}),s.jsxs(de,{children:[s.jsx(ue,{children:s.jsxs("div",{className:"truncate text-left text-sm",children:[p==null?void 0:p.name,"(",m==null?void 0:m.name,")"]})}),s.jsxs(pe,{children:[p==null?void 0:p.name,"(",m==null?void 0:m.name,")"]})]})]}),s.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Lo,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:l("side_panel.relationships_section.relationship.foreign")})]}),s.jsxs(de,{children:[s.jsx(ue,{children:s.jsxs("div",{className:"truncate text-left text-sm	",children:[u==null?void 0:u.name,"(",f==null?void 0:f.name,")"]})}),s.jsxs(pe,{children:[u==null?void 0:u.name,"(",f==null?void 0:f.name,")"]})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(jl,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:l("side_panel.relationships_section.relationship.cardinality")})]}),s.jsxs(_r,{value:c,onValueChange:d,children:[s.jsx(hs,{className:"h-8",children:s.jsx(Mr,{})}),s.jsx(ms,{children:s.jsxs(Ir,{children:[s.jsx(et,{value:"one_to_one",children:l("relationship_type.one_to_one")}),s.jsx(et,{value:"one_to_many",children:l("relationship_type.one_to_many")}),s.jsx(et,{value:"many_to_one",children:l("relationship_type.many_to_one")}),s.jsx(et,{value:"many_to_many",children:l("relationship_type.many_to_many")})]})})]})]})]}),s.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:s.jsxs(Q,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:x,children:[s.jsx(nt,{className:"mr-1 size-3.5 text-red-700"}),s.jsx("div",{className:"text-red-700",children:l("side_panel.relationships_section.relationship.delete_relationship")})]})})]})},Ya=N.forwardRef(({relationship:e},t)=>s.jsxs(ct,{value:e.id,className:"rounded-md",ref:t,children:[s.jsx(dt,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:s.jsx(sp,{relationship:e})}),s.jsx(ut,{className:"p-1 pb-0",children:s.jsx(op,{relationship:e})})]}));Ya.displayName="RelationshipListItem";const rp=({relationships:e})=>{const{openRelationshipFromSidebar:t,openedRelationshipInSidebar:n}=je(),o=N.useRef(null),r=e.reduce((c,d)=>(c[d.id]=N.createRef(),c),{}),a=i.useCallback(c=>{var d,u;return(u=(d=r[c])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[r]),l=i.useCallback(()=>{n&&o.current!==n&&(o.current=n,a(n))},[a,n]);return s.jsx(Sn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:n,onValueChange:t,onAnimationEnd:l,children:e.map(c=>s.jsx(Ya,{relationship:c,ref:r[c.id]},c.id))})},ap=()=>{const{relationships:e,filteredSchemas:t}=ie(),[n,o]=N.useState(""),{closeAllRelationshipsInSidebar:r}=je(),{t:a}=ge(),{openCreateRelationshipDialog:l}=Ht(),c=i.useMemo(()=>{const u=p=>{var m;return!((m=n==null?void 0:n.trim)!=null&&m.call(n))||p.name.toLowerCase().includes(n.toLowerCase())},f=p=>bl(p,t);return e.filter(f).filter(u)},[e,n,t]),d=i.useCallback(async()=>{o(""),l()},[l,o]);return s.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[s.jsx("div",{children:s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(Q,{variant:"ghost",className:"size-8 p-0",onClick:r,children:s.jsx(ps,{className:"size-4"})})})}),s.jsx(pe,{children:a("side_panel.relationships_section.collapse")})]})}),s.jsx("div",{className:"flex-1",children:s.jsx(xt,{type:"text",placeholder:a("side_panel.relationships_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:n,onChange:u=>o(u.target.value)})}),s.jsxs(Q,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:d,children:[s.jsx(Ol,{className:"h-4"}),a("side_panel.relationships_section.add_relationship")]})]}),s.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:s.jsx(cs,{className:"h-full",children:e.length===0?s.jsx(kn,{title:a("side_panel.relationships_section.empty_state.title"),description:a("side_panel.relationships_section.empty_state.description"),className:"mt-20"}):s.jsx(rp,{relationships:c})})})]})},ip=({dependency:e})=>{const{removeDependency:t,getTable:n}=ie(),{fitView:o,deleteElements:r,setEdges:a}=Ge(),{t:l}=ge(),{hideSidePanel:c}=je(),{isMd:d}=wt("md"),u=i.useMemo(()=>{const x=n(e.tableId),g=n(e.dependentTableId);return!x||!g?"":`${g.name} -> ${x.name}`},[e.tableId,e.dependentTableId,n]),f=i.useCallback(x=>{x.stopPropagation(),a(g=>g.map(h=>h.id==e.id?{...h,selected:!0}:{...h,selected:!1})),o({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.tableId},{id:e.dependentTableId}]}),d||c()},[o,e.tableId,e.dependentTableId,a,e.id,d,c]),p=i.useCallback(()=>{t(e.id),r({edges:[{id:e.id}]})},[e.id,t,r]),m=i.useCallback(()=>s.jsxs(Ns,{children:[s.jsx(Ss,{children:s.jsx(Be,{children:s.jsx(us,{})})}),s.jsxs(Rn,{className:"w-40",children:[s.jsx(_n,{children:l("side_panel.dependencies_section.dependency.dependency_actions.title")}),s.jsx(vt,{}),s.jsx(Et,{children:s.jsxs(lt,{onClick:p,className:"flex justify-between !text-red-700",children:[l("side_panel.dependencies_section.dependency.dependency_actions.delete_dependency"),s.jsx(nt,{className:"size-3.5 text-red-700"})]})})]})]}),[p,l]);return s.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[s.jsx("div",{className:"flex min-w-0 flex-1",children:s.jsx("div",{className:"truncate",children:u})}),s.jsxs("div",{className:"flex flex-row-reverse",children:[s.jsx("div",{children:m()}),s.jsx("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:s.jsx(Be,{onClick:f,children:s.jsx(ds,{})})})]})]})},lp=({dependency:e})=>{const{getTable:t,removeDependency:n}=ie(),{deleteElements:o}=Ge(),{t:r}=ge(),a=t(e.tableId),l=t(e.dependentTableId),c=i.useCallback(()=>{n(e.id),o({edges:[{id:e.id}]})},[e.id,n,o]);return s.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[s.jsx("div",{className:"flex flex-col gap-6",children:s.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[s.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Lo,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:r("side_panel.dependencies_section.dependency.dependent_table")})]}),s.jsxs(de,{children:[s.jsx(ue,{children:s.jsx("div",{className:"truncate text-left text-sm	",children:l==null?void 0:l.name})}),s.jsx(pe,{children:l==null?void 0:l.name})]})]}),s.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Oo,{className:"size-4 text-subtitle"}),s.jsx("div",{className:"font-bold text-subtitle",children:r("side_panel.dependencies_section.dependency.table")})]}),s.jsxs(de,{children:[s.jsx(ue,{children:s.jsx("div",{className:"truncate text-left text-sm",children:a==null?void 0:a.name})}),s.jsx(pe,{children:a==null?void 0:a.name})]})]})]})}),s.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:s.jsxs(Q,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:c,children:[s.jsx(nt,{className:"mr-1 size-3.5 text-red-700"}),s.jsx("div",{className:"text-red-700",children:r("side_panel.dependencies_section.dependency.delete_dependency")})]})})]})},Za=N.forwardRef(({dependency:e},t)=>s.jsxs(ct,{value:e.id,className:"rounded-md",ref:t,children:[s.jsx(dt,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:s.jsx(ip,{dependency:e})}),s.jsx(ut,{className:"p-1 pb-0",children:s.jsx(lp,{dependency:e})})]}));Za.displayName="DependencyListItem";const cp=({dependencies:e})=>{const{openDependencyFromSidebar:t,openedDependencyInSidebar:n}=je(),o=N.useRef(null),r=e.reduce((c,d)=>(c[d.id]=N.createRef(),c),{}),a=i.useCallback(c=>{var d,u;return(u=(d=r[c])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[r]),l=i.useCallback(()=>{n&&o.current!==n&&(o.current=n,a(n))},[a,n]);return s.jsx(Sn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:n,onValueChange:t,onAnimationEnd:l,children:e.map(c=>s.jsx(Za,{dependency:c,ref:r[c.id]},c.id))})},dp=()=>{const{dependencies:e,filteredSchemas:t,getTable:n}=ie(),[o,r]=N.useState(""),{closeAllDependenciesInSidebar:a}=je(),{t:l}=ge(),c=i.useMemo(()=>{const d=f=>{var x,g,h;if(!((x=o==null?void 0:o.trim)!=null&&x.call(o)))return!0;const p=((g=n(f.tableId))==null?void 0:g.name)??"",m=((h=n(f.dependentTableId))==null?void 0:h.name)??"";return p.toLowerCase().includes(o.toLowerCase())||m.toLowerCase().includes(o.toLowerCase())},u=f=>el(f,t);return e.filter(u).filter(d).sort((f,p)=>{const m=n(f.dependentTableId),x=n(f.tableId),g=n(p.dependentTableId),h=n(p.tableId);return`${m==null?void 0:m.name}${x==null?void 0:x.name}`.localeCompare(`${g==null?void 0:g.name}${h==null?void 0:h.name}`)})},[e,o,t,n]);return s.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[s.jsx("div",{children:s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(Q,{variant:"ghost",className:"size-8 p-0",onClick:a,children:s.jsx(ps,{className:"size-4"})})})}),s.jsx(pe,{children:l("side_panel.dependencies_section.collapse")})]})}),s.jsx("div",{className:"flex-1",children:s.jsx(xt,{type:"text",placeholder:l("side_panel.dependencies_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:o,onChange:d=>r(d.target.value)})})]}),s.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:s.jsx(cs,{className:"h-full",children:e.length===0?s.jsx(kn,{title:l("side_panel.dependencies_section.empty_state.title"),description:l("side_panel.dependencies_section.empty_state.description"),className:"mt-20"}):s.jsx(cp,{dependencies:c})})})]})},af=()=>{const{t:e}=ge(),{schemas:t,filterSchemas:n,filteredSchemas:o}=ie(),{selectSidebarSection:r,selectedSidebarSection:a,isSelectSchemaOpen:l,openSelectSchema:c,closeSelectSchema:d}=je(),u=i.useMemo(()=>t.map(p=>({label:p.name,value:p.id,description:`(${p.tableCount} tables)`})),[t]),f=i.useCallback(p=>{p?c():d()},[c,d]);return s.jsxs("aside",{className:"flex h-full flex-col overflow-hidden",children:[u.length>0?s.jsxs("div",{className:"flex items-center justify-center border-b pl-3 pt-0.5",children:[s.jsx("div",{className:"shrink-0 text-sm font-semibold",children:e("side_panel.schema")}),s.jsx("div",{className:"flex min-w-0 flex-1",children:s.jsx(rs,{oneLine:!0,className:"w-full rounded-none border-none",selectAll:!0,deselectAll:!0,options:u,value:o??[],onChange:p=>{n(p)},placeholder:e("side_panel.filter_by_schema"),inputPlaceholder:e("side_panel.search_schema"),emptyPlaceholder:e("side_panel.no_schemas_found"),multiple:!0,open:l,onOpenChange:f})})]}):null,s.jsx("div",{className:"flex justify-center border-b pt-0.5",children:s.jsxs(_r,{value:a,onValueChange:p=>r(p),children:[s.jsxs(hs,{className:"rounded-none border-none font-semibold shadow-none hover:bg-secondary hover:underline focus:border-transparent focus:ring-0",children:[s.jsx(Mr,{}),s.jsx("div",{className:"flex flex-1 justify-end px-2 text-xs font-normal text-muted-foreground",children:e("side_panel.view_all_options")})]}),s.jsx(ms,{children:s.jsxs(Ir,{children:[s.jsx(et,{value:"tables",children:e("side_panel.tables_section.tables")}),s.jsx(et,{value:"relationships",children:e("side_panel.relationships_section.relationships")}),s.jsx(et,{value:"dependencies",children:e("side_panel.dependencies_section.dependencies")})]})})]})}),a==="tables"?s.jsx(np,{}):a==="relationships"?s.jsx(ap,{}):s.jsx(dp,{})]})};var up=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var o,r,a;if(Array.isArray(t)){if(o=t.length,o!=n.length)return!1;for(r=o;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),o=a.length,o!==Object.keys(n).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=o;r--!==0;){var l=a[r];if(!e(t[l],n[l]))return!1}return!0}return t!==t&&n!==n};const tn=Ui(up),ns="left_rel_",ss="right_rel_",an="target_rel_",Ja=N.memo(({field:e,focused:t,tableNodeId:n,highlighted:o,visible:r,isConnectable:a})=>{const{removeField:l,relationships:c}=ie(),d=$o(),u=zo(),f=i.useMemo(()=>{var x,g;return u.inProgress&&u.fromNode.id!==n&&(((x=u.fromHandle.id)==null?void 0:x.startsWith(ss))||((g=u.fromHandle.id)==null?void 0:g.startsWith(ns)))},[u,n]),p=i.useMemo(()=>c.filter(x=>x.targetTableId===n&&x.targetFieldId===e.id).length,[c,n,e.id]),m=i.useRef(p);return i.useEffect(()=>{m.current!==p&&(d(n),m.current=p)},[n,d,p]),s.jsxs("div",{className:`group relative flex h-8 items-center justify-between gap-1 border-t px-3 text-sm last:rounded-b-[6px] hover:bg-slate-100 dark:hover:bg-slate-800 ${o?"bg-pink-100 dark:bg-pink-900":""} transition-all duration-200 ease-in-out ${r?"max-h-8 opacity-100":"z-0 max-h-0 overflow-hidden opacity-0"}`,children:[a&&s.jsxs(s.Fragment,{children:[s.jsx(it,{id:`${ss}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${t?"":"!invisible"}`,position:Ce.Right,type:"source"}),s.jsx(it,{id:`${ns}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${t?"":"!invisible"}`,position:Ce.Left,type:"source"})]}),(!u.inProgress||f)&&a&&s.jsxs(s.Fragment,{children:[Array.from({length:p},(x,g)=>g).map(x=>s.jsx(it,{id:`${an}${x}_${e.id}`,className:"!invisible",position:Ce.Left,type:"target"},`${an}${x}_${e.id}`)),s.jsx(it,{id:`${an}${p}_${e.id}`,className:f?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:Ce.Left,type:"target"})]}),s.jsx("div",{className:"block truncate text-left",children:e.name}),s.jsxs("div",{className:"flex max-w-[35%] justify-end gap-2 truncate hover:shrink-0",children:[e.primaryKey?s.jsx("div",{className:"text-muted-foreground group-hover:hidden",children:s.jsx(Vo,{size:14})}):null,s.jsx("div",{className:"content-center truncate text-right text-xs text-muted-foreground group-hover:hidden",children:e.type.name}),s.jsx("div",{className:"hidden flex-row group-hover:flex",children:s.jsx(Q,{variant:"ghost",className:"size-6 p-0 hover:bg-primary-foreground",onClick:x=>{x.stopPropagation(),l(n,e.id)},children:s.jsx(nt,{className:"size-3.5 text-red-700"})})})]})]})});Ja.displayName="TableNodeField";var $s="ContextMenu",[pp,lf]=yt($s,[vn]),Se=vn(),[fp,Qa]=pp($s),ei=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:o,dir:r,modal:a=!0}=e,[l,c]=i.useState(!1),d=Se(t),u=lo(o),f=i.useCallback(p=>{c(p),u(p)},[u]);return s.jsx(fp,{scope:t,open:l,onOpenChange:f,modal:a,children:s.jsx(Io,{...d,dir:r,open:l,onOpenChange:f,modal:a,children:n})})};ei.displayName=$s;var ti="ContextMenuTrigger",ni=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:o=!1,...r}=e,a=Qa(ti,n),l=Se(n),c=i.useRef({x:0,y:0}),d=i.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...c.current})}),u=i.useRef(0),f=i.useCallback(()=>window.clearTimeout(u.current),[]),p=m=>{c.current={x:m.clientX,y:m.clientY},a.onOpenChange(!0)};return i.useEffect(()=>f,[f]),i.useEffect(()=>void(o&&f()),[o,f]),s.jsxs(s.Fragment,{children:[s.jsx(ho,{...l,virtualRef:d}),s.jsx(ne.span,{"data-state":a.open?"open":"closed","data-disabled":o?"":void 0,...r,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:o?e.onContextMenu:q(e.onContextMenu,m=>{f(),p(m),m.preventDefault()}),onPointerDown:o?e.onPointerDown:q(e.onPointerDown,nn(m=>{f(),u.current=window.setTimeout(()=>p(m),700)})),onPointerMove:o?e.onPointerMove:q(e.onPointerMove,nn(f)),onPointerCancel:o?e.onPointerCancel:q(e.onPointerCancel,nn(f)),onPointerUp:o?e.onPointerUp:q(e.onPointerUp,nn(f))})]})});ni.displayName=ti;var hp="ContextMenuPortal",si=e=>{const{__scopeContextMenu:t,...n}=e,o=Se(t);return s.jsx(_o,{...o,...n})};si.displayName=hp;var oi="ContextMenuContent",ri=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Qa(oi,n),a=Se(n),l=i.useRef(!1);return s.jsx(mo,{...a,...o,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:c=>{var d;(d=e.onCloseAutoFocus)==null||d.call(e,c),!c.defaultPrevented&&l.current&&c.preventDefault(),l.current=!1},onInteractOutside:c=>{var d;(d=e.onInteractOutside)==null||d.call(e,c),!c.defaultPrevented&&!r.modal&&(l.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ri.displayName=oi;var mp="ContextMenuGroup",xp=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(xo,{...r,...o,ref:t})});xp.displayName=mp;var gp="ContextMenuLabel",ai=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(go,{...r,...o,ref:t})});ai.displayName=gp;var vp="ContextMenuItem",ii=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(vo,{...r,...o,ref:t})});ii.displayName=vp;var bp="ContextMenuCheckboxItem",li=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(bo,{...r,...o,ref:t})});li.displayName=bp;var yp="ContextMenuRadioGroup",wp=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(yo,{...r,...o,ref:t})});wp.displayName=yp;var Cp="ContextMenuRadioItem",ci=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(wo,{...r,...o,ref:t})});ci.displayName=Cp;var jp="ContextMenuItemIndicator",di=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(Co,{...r,...o,ref:t})});di.displayName=jp;var Np="ContextMenuSeparator",ui=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(jo,{...r,...o,ref:t})});ui.displayName=Np;var Sp="ContextMenuArrow",Rp=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(No,{...r,...o,ref:t})});Rp.displayName=Sp;var _p="ContextMenuSubTrigger",pi=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(So,{...r,...o,ref:t})});pi.displayName=_p;var Ip="ContextMenuSubContent",fi=i.forwardRef((e,t)=>{const{__scopeContextMenu:n,...o}=e,r=Se(n);return s.jsx(Ro,{...r,...o,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fi.displayName=Ip;function nn(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Mp=ei,Tp=ni,kp=si,hi=ri,mi=ai,xi=ii,gi=li,vi=ci,bi=di,yi=ui,wi=pi,Ci=fi;const ji=Mp,Ni=Tp,Dp=i.forwardRef(({className:e,inset:t,children:n,...o},r)=>s.jsxs(wi,{ref:r,className:$("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...o,children:[n,s.jsx(Mo,{className:"ml-auto size-4"})]}));Dp.displayName=wi.displayName;const Ep=i.forwardRef(({className:e,...t},n)=>s.jsx(Ci,{ref:n,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Ep.displayName=Ci.displayName;const zs=i.forwardRef(({className:e,...t},n)=>s.jsx(kp,{children:s.jsx(hi,{ref:n,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));zs.displayName=hi.displayName;const Bt=i.forwardRef(({className:e,inset:t,...n},o)=>s.jsx(xi,{ref:o,className:$("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Bt.displayName=xi.displayName;const Ap=i.forwardRef(({className:e,children:t,checked:n,...o},r)=>s.jsxs(gi,{ref:r,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...o,children:[s.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:s.jsx(bi,{children:s.jsx(gn,{className:"size-4"})})}),t]}));Ap.displayName=gi.displayName;const Pp=i.forwardRef(({className:e,children:t,...n},o)=>s.jsxs(vi,{ref:o,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:s.jsx(bi,{children:s.jsx(To,{className:"size-4 fill-current"})})}),t]}));Pp.displayName=vi.displayName;const Op=i.forwardRef(({className:e,inset:t,...n},o)=>s.jsx(mi,{ref:o,className:$("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n}));Op.displayName=mi.displayName;const Lp=i.forwardRef(({className:e,...t},n)=>s.jsx(yi,{ref:n,className:$("-mx-1 my-1 h-px bg-border",e),...t}));Lp.displayName=yi.displayName;const $p=({children:e,table:t})=>{const{removeTable:n}=ie(),{openTableFromSidebar:o}=je(),{t:r}=ge(),{isMd:a}=wt("md"),l=i.useCallback(()=>{o(t.id)},[o,t.id]),c=i.useCallback(()=>{n(t.id)},[n,t.id]);return a?s.jsxs(ji,{children:[s.jsx(Ni,{children:e}),s.jsxs(zs,{children:[s.jsx(Bt,{onClick:l,children:r("table_node_context_menu.edit_table")}),s.jsx(Bt,{onClick:c,children:r("table_node_context_menu.delete_table")})]})]}):s.jsx(s.Fragment,{children:e})},mn="top_dep_",Si="bottom_dep_",ln="target_dep_",Ri=N.memo(({table:e,focused:t})=>{const{dependencies:n}=ie(),o=$o(),r=zo(),a=i.useMemo(()=>{var d,u;return r.inProgress&&r.fromNode.id!==e.id&&(((d=r.fromHandle.id)==null?void 0:d.startsWith(mn))||((u=r.fromHandle.id)==null?void 0:u.startsWith(Si)))},[r,e.id]),l=i.useMemo(()=>n.filter(d=>d.tableId===e.id).length,[n,e.id]),c=i.useRef(l);return i.useEffect(()=>{c.current!==l&&(o(e.id),c.current=l)},[e.id,o,l]),s.jsxs(s.Fragment,{children:[e.isView||e.isMaterializedView?s.jsx(it,{id:`${mn}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${t?"":"!invisible"}`,position:Ce.Top,type:"source"}):null,Array.from({length:l},(d,u)=>u).map(d=>s.jsx(it,{id:`${ln}${d}_${e.id}`,className:"!invisible",position:Ce.Top,type:"target"},`${ln}${d}_${e.id}`)),a?s.jsx(it,{id:`${ln}${l}_${e.id}`,className:a?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:Ce.Top,type:"target"}):null]})});Ri.displayName="TableNodeDependencyIndicator";const sn=450,oo=337,Lt=224,on=10,_i=N.memo(({selected:e,dragging:t,id:n,data:{table:o,isOverlapping:r,highlightOverlappingTables:a}})=>{const{updateTable:l,relationships:c}=ie(),d=tl(R=>R.edges),{openTableFromSidebar:u,selectSidebarSection:f}=je(),[p,m]=i.useState(!1),{t:x}=ge(),g=d.filter(R=>{var C;return(R.source===n||R.target===n)&&(R.selected||((C=R.data)==null?void 0:C.highlighted))&&R.type==="relationship-edge"}),h=!!e&&!t,v=()=>{f("tables"),u(o.id)},w=i.useCallback(()=>{l(o.id,{width:(o.width??Lt)<oo?oo:sn})},[o.id,o.width,l]),b=i.useCallback(()=>{l(o.id,{width:Lt})},[o.id,l]),y=()=>{m(!p)},S=i.useCallback(R=>c.some(C=>C.sourceFieldId===R.id||C.targetFieldId===R.id)||R.primaryKey,[c]),j=i.useMemo(()=>{if(p)return o.fields;const R=o.fields.filter(E=>S(E)),C=o.fields.filter(E=>!S(E)),I=R.slice(0,on),D=on-I.length,T=C.slice(0,D);return[...I,...T].sort((E,F)=>o.fields.indexOf(E)-o.fields.indexOf(F))},[p,o.fields,S]);return s.jsx($p,{table:o,children:s.jsxs("div",{className:$("flex w-full flex-col border-2 bg-slate-50 dark:bg-slate-950 rounded-lg shadow-sm transition-transform duration-300",e?"border-pink-600":"border-slate-500 dark:border-slate-700",r?"ring-2 ring-offset-slate-50 dark:ring-offset-slate-900 ring-blue-500 ring-offset-2":"",!a&&r?"animate-scale":"",a&&r?"animate-scale-2":""),onClick:R=>{R.detail===2&&v()},children:[s.jsx(nl,{isVisible:h,lineClassName:"!border-none !w-2",minWidth:Lt,maxWidth:sn,shouldResize:R=>R.dy===0,handleClassName:"!hidden"}),s.jsx(Ri,{table:o,focused:h}),s.jsx("div",{className:"h-2 rounded-t-[6px]",style:{backgroundColor:o.color}}),s.jsxs("div",{className:"group flex h-9 items-center justify-between bg-slate-200 px-2 dark:bg-slate-900",children:[s.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[s.jsx(Dl,{className:"size-3.5 shrink-0 text-gray-600 dark:text-primary"}),s.jsx(ht,{className:"truncate text-sm font-bold",children:o.name})]}),s.jsxs("div",{className:"hidden shrink-0 flex-row group-hover:flex",children:[s.jsx(Q,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:v,children:s.jsx(bn,{className:"size-4"})}),s.jsx(Q,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:o.width!==sn?w:b,children:o.width!==sn?s.jsx(Nl,{className:"size-4"}):s.jsx(Sl,{className:"size-4"})})]})]}),s.jsx("div",{className:"transition-[max-height] duration-200 ease-in-out",style:{maxHeight:p?`${o.fields.length*2}rem`:`${on*2}rem`},children:o.fields.map(R=>s.jsx(Ja,{focused:h,tableNodeId:n,field:R,highlighted:g.some(C=>{var I,D;return((I=C.data)==null?void 0:I.relationship.sourceFieldId)===R.id||((D=C.data)==null?void 0:D.relationship.targetFieldId)===R.id}),visible:j.includes(R),isConnectable:!o.isView},R.id))}),o.fields.length>on&&s.jsx("div",{className:"z-10 flex h-8 cursor-pointer items-center justify-center rounded-b-md border-t text-xs text-muted-foreground transition-colors duration-200 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:y,children:p?s.jsxs(s.Fragment,{children:[s.jsx(Cl,{className:"mr-1 size-3.5"}),x("show_less")]}):s.jsxs(s.Fragment,{children:[s.jsx(wl,{className:"mr-1 size-3.5"}),x("show_more")]})})]})})});_i.displayName="TableNode";const Ii=()=>({graph:new Map,lastUpdated:Date.now()}),ro=(e,t)=>(e.graph.has(t)||e.graph.set(t,[]),{...e,lastUpdated:Date.now()}),zp=(e,t,n)=>{var o,r,a,l;return e.graph.has(t)||ro(e,t),e.graph.has(n)||ro(e,n),(o=e.graph.get(t))!=null&&o.includes(n)||(r=e.graph.get(t))==null||r.push(n),(a=e.graph.get(n))!=null&&a.includes(t)||(l=e.graph.get(n))==null||l.push(t),{...e,lastUpdated:Date.now()}},Fp=(e,t)=>(e.graph.delete(t),e.graph.forEach(n=>{const o=n.indexOf(t);o!==-1&&n.splice(o,1)}),{...e,lastUpdated:Date.now()}),Bp=(e,t,n)=>{var o,r,a,l;if(e.graph.has(t)){const c=((o=e.graph.get(t))==null?void 0:o.indexOf(n))??-1;c!==-1&&((r=e.graph.get(t))==null||r.splice(c,1))}if(e.graph.has(n)){const c=((a=e.graph.get(n))==null?void 0:a.indexOf(t))??-1;c!==-1&&((l=e.graph.get(n))==null||l.splice(c,1))}return{...e,lastUpdated:Date.now()}},xn=({cardinality:e,selected:t,side:n})=>`cardinality_${t?"selected":"not_selected"}_${e}_${n}`,zn=({node:e,table:t})=>{var c,d;const n=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",o=(e==null?void 0:e.position.x)??(t==null?void 0:t.x)??0,r=(e==null?void 0:e.position.y)??(t==null?void 0:t.y)??0,a=((c=e==null?void 0:e.measured)==null?void 0:c.width)??(e==null?void 0:e.data.table.width)??(t==null?void 0:t.width)??Lt,l=e?((d=e==null?void 0:e.measured)==null?void 0:d.height)??os((e==null?void 0:e.data.table.fields.length)??0):os((t==null?void 0:t.fields.length)??0);return{id:n,left:o,right:o+a,top:r,bottom:r+l}},at=({node:e,table:t},{nodes:n,tables:o},r)=>{const a=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",l=zn(e?{node:e}:{table:t});for(const c of n??o??[]){if(a===c.id)continue;const u=zn(!!n?{node:c}:{table:c});l.left<u.right&&l.right>u.left&&l.top<u.bottom&&l.bottom>u.top?r=zp(r,a,c.id):r=Bp(r,a,c.id)}return r},Fn=({tables:e,nodes:t})=>{let n=Ii();if(e)for(const o of e)n=at({table:o},{tables:e},n);else for(const o of t)n=at({node:o},{nodes:t},n);return n},os=e=>Math.min(e,11)*32+48,Hp=({id:e,sourceX:t,sourceY:n,targetX:o,targetY:r,source:a,target:l,selected:c,data:d})=>{var Y,W;const{getInternalNode:u,getEdge:f}=Ge(),{openRelationshipFromSidebar:p,selectSidebarSection:m}=je(),{relationships:x}=ie(),g=d==null?void 0:d.relationship,h=i.useCallback(()=>{m("relationships"),p(e)},[e,p,m]),v=i.useMemo(()=>x.filter(H=>H.targetTableId===l&&H.sourceTableId===a||H.targetTableId===a&&H.sourceTableId===l).findIndex(H=>H.id===e),[x,e,a,l]),w=u(a),b=u(l),y=f(e),S=(W=(Y=y==null?void 0:y.sourceHandle)==null?void 0:Y.startsWith)!=null&&W.call(Y,ss)?"right":"left",j=(w==null?void 0:w.measured.width)??0,R=S==="left"?t+3:t-j-10,C=S==="left"?t+j+9:t,I=(b==null?void 0:b.measured.width)??0,D=o-1,T=o+I+10,{sourceSide:E,targetSide:F}=i.useMemo(()=>{const H={leftToLeft:Math.abs(R-D),leftToRight:Math.abs(R-T),rightToLeft:Math.abs(C-D),rightToRight:Math.abs(C-T)},G=Math.min(H.leftToLeft,H.leftToRight,H.rightToLeft,H.rightToRight);switch(Object.keys(H).find(te=>H[te]===G)){case"leftToRight":return{sourceSide:"left",targetSide:"right"};case"rightToLeft":return{sourceSide:"right",targetSide:"left"};case"rightToRight":return{sourceSide:"right",targetSide:"right"};default:return{sourceSide:"left",targetSide:"left"}}},[R,C,D,T]),[X]=i.useMemo(()=>Fo({sourceX:E==="left"?R:C,sourceY:n,targetX:F==="left"?D:T,targetY:r,borderRadius:14,sourcePosition:E==="left"?Ce.Left:Ce.Right,targetPosition:F==="left"?Ce.Left:Ce.Right,offset:(v+1)*14}),[E,F,R,C,D,T,n,r,v]),ee=i.useMemo(()=>xn({cardinality:(g==null?void 0:g.sourceCardinality)??"one",selected:c??!1,side:E}),[g==null?void 0:g.sourceCardinality,c,E]),ae=i.useMemo(()=>xn({cardinality:(g==null?void 0:g.targetCardinality)??"one",selected:c??!1,side:F}),[g==null?void 0:g.targetCardinality,c,F]);return s.jsxs(s.Fragment,{children:[s.jsx("path",{id:e,d:X,markerStart:`url(#${ee})`,markerEnd:`url(#${ae})`,fill:"none",className:$(["react-flow__edge-path",`!stroke-2 ${c?"!stroke-pink-600":"!stroke-slate-400"}`]),onClick:H=>{H.detail===2&&h()}}),s.jsx("path",{d:X,fill:"none",strokeOpacity:0,strokeWidth:20,className:"react-flow__edge-interaction",onClick:H=>{H.detail===2&&h()}})]})},Mi=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:$("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Mi.displayName="Card";const Vp=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",e),...t}));Vp.displayName="CardHeader";const Up=N.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:$("font-semibold leading-none tracking-tight",e),...t}));Up.displayName="CardTitle";const Gp=N.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:$("text-sm text-muted-foreground",e),...t}));Gp.displayName="CardDescription";const Ti=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:$("p-6 pt-0",e),...t}));Ti.displayName="CardContent";const Wp=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",e),...t}));Wp.displayName="CardFooter";const rt=N.forwardRef((e,t)=>s.jsx(Q,{ref:t,variant:"ghost",className:"w-[36px] p-2 hover:bg-primary-foreground",...e}));rt.displayName=Q.displayName;const ao=e=>`${Math.round(e*100)}%`,Kp=()=>{const{updateDiagramUpdatedAt:e}=ie(),{t}=ge(),{redo:n,undo:o,hasRedo:r,hasUndo:a}=sl(),{getZoom:l,zoomIn:c,zoomOut:d,fitView:u}=Ge(),[f,p]=i.useState(ao(l()));ol({onChange:({zoom:w})=>{p(ao(w))}});const m=200,x=()=>{c({duration:m})},g=()=>{d({duration:m})},h=()=>{u({minZoom:1,maxZoom:1,duration:m})},v=i.useCallback(()=>{u({duration:500,padding:.1,maxZoom:.8})},[u]);return s.jsx("div",{className:"px-1",children:s.jsx(Mi,{className:"h-[44px] bg-secondary p-0 shadow-none",children:s.jsxs(Ti,{className:"flex h-full flex-row items-center p-1",children:[s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(rt,{onClick:e,children:s.jsx(Tl,{})})})}),s.jsx(pe,{children:t("toolbar.save")})]}),s.jsx(Ke,{orientation:"vertical"}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(rt,{onClick:v,children:s.jsx(kl,{})})})}),s.jsx(pe,{children:t("toolbar.show_all")})]}),s.jsx(Ke,{orientation:"vertical"}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(rt,{onClick:g,children:s.jsx($l,{})})})}),s.jsx(pe,{children:t("toolbar.zoom_out")})]}),s.jsx(Q,{variant:"ghost",onClick:h,className:"w-[60px] p-2 hover:bg-primary-foreground",children:f}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(rt,{onClick:x,children:s.jsx(Ll,{})})})}),s.jsx(pe,{children:t("toolbar.zoom_in")})]}),s.jsx(Ke,{orientation:"vertical"}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(rt,{onClick:o,disabled:!a,children:s.jsx(Pl,{})})})}),s.jsx(pe,{children:t("toolbar.undo")})]}),s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(rt,{onClick:n,disabled:!r,children:s.jsx(Ml,{})})})}),s.jsx(pe,{children:t("toolbar.redo")})]})]})})})},qp=()=>{const{showCardinality:e}=Bo(),t={one:"1",many:"N"},n=["left","right"],o=[!0,!1];return e?s.jsx("svg",{className:"absolute left-0 top-0 z-0 size-0",children:s.jsx("defs",{children:Object.entries(t).map(([r,a])=>n.map(l=>o.map(c=>s.jsxs("marker",{id:xn({cardinality:r,selected:c,side:l}),viewBox:"0 0 16 16",markerWidth:"16",markerHeight:"16",refX:l==="left"?"15":"1",refY:"8",children:[s.jsx("circle",{cx:"8",cy:"8",r:"5",className:$([c?"fill-pink-600":"fill-muted-foreground","stroke-background","stroke-[0.5]"])}),s.jsx("text",{x:"7.9",y:"8.4",fontSize:"6",fontWeight:"600",textAnchor:"middle",dominantBaseline:"middle",className:"fill-muted",children:a})]},xn({cardinality:r,selected:c,side:l})))))})}):null},Xp=({children:e})=>{const{createTable:t,filteredSchemas:n,schemas:o}=ie(),{openCreateRelationshipDialog:r,openTableSchemaDialog:a}=Ht(),{screenToFlowPosition:l}=Ge(),{t:c}=ge(),{isMd:d}=wt("md"),u=i.useCallback(p=>{var x;const m=l({x:p.clientX,y:p.clientY});if(((n==null?void 0:n.length)??0)>1)a({onConfirm:g=>t({x:m.x,y:m.y,schema:g}),schemas:o.filter(g=>n==null?void 0:n.includes(g.id))});else{const g=(n==null?void 0:n.length)===1?(x=o.find(h=>h.id===n[0]))==null?void 0:x.name:void 0;t({x:m.x,y:m.y,schema:g})}},[t,l,a,o,n]),f=i.useCallback(()=>{r()},[r]);return d?s.jsxs(ji,{children:[s.jsx(Ni,{children:e}),s.jsxs(zs,{children:[s.jsx(Bt,{onClick:u,children:c("canvas_context_menu.new_table")}),s.jsx(Bt,{onClick:f,children:c("canvas_context_menu.new_relationship")})]})]}):s.jsx(s.Fragment,{children:e})},Yp=({id:e,sourceX:t,sourceY:n,targetX:o,targetY:r,source:a,target:l,selected:c})=>{const{getInternalNode:d}=Ge(),{dependencies:u}=ie(),{openDependencyFromSidebar:f,selectSidebarSection:p}=je(),m=i.useCallback(()=>{p("dependencies"),f(e)},[e,f,p]),x=i.useMemo(()=>u.filter(C=>C.tableId===l&&C.dependentTableId===a||C.tableId===a&&C.dependentTableId===l).findIndex(C=>C.id===e),[u,e,a,l]),g=d(a),h=d(l),{sourceTopY:v,sourceBottomY:w,targetTopY:b,targetBottomY:y}=i.useMemo(()=>{const C=(g==null?void 0:g.measured.height)??0,I=n+5,D=n+C+10,T=(h==null?void 0:h.measured.height)??0,E=r+1,F=r+T+5;return{sourceTopY:I,sourceBottomY:D,targetTopY:E,targetBottomY:F}},[g==null?void 0:g.measured.height,n,h==null?void 0:h.measured.height,r]),{sourceSide:S,targetSide:j}=i.useMemo(()=>{const C={topToTop:Math.abs(v-b),topToBottom:Math.abs(v-y),bottomToTop:Math.abs(w-b),bottomToBottom:Math.abs(w-y)},I=Math.min(C.topToTop,C.topToBottom,C.bottomToTop,C.bottomToBottom);switch(Object.keys(C).find(T=>C[T]===I)){case"topToBottom":return{sourceSide:"top",targetSide:"bottom"};case"bottomToTop":return{sourceSide:"bottom",targetSide:"top"};case"bottomToBottom":return{sourceSide:"bottom",targetSide:"bottom"};default:return{sourceSide:"top",targetSide:"top"}}},[v,w,b,y]),[R]=i.useMemo(()=>Fo({sourceX:t,sourceY:S==="top"?v:w,targetX:o,targetY:j==="top"?b:y,borderRadius:14,sourcePosition:S==="top"?Ce.Top:Ce.Bottom,targetPosition:j==="top"?Ce.Top:Ce.Bottom,offset:(x+1)*14}),[x,w,S,v,t,y,j,b,o]);return s.jsxs(s.Fragment,{children:[s.jsx("path",{id:e,d:R,fill:"none",className:$(["react-flow__edge-path",`!stroke-2 ${c?"!stroke-pink-600":"!stroke-blue-400"}`]),onClick:C=>{C.detail===2&&m()}}),s.jsx("path",{d:R,fill:"none",strokeOpacity:0,strokeWidth:20,className:"react-flow__edge-interaction",onClick:C=>{C.detail===2&&m()}})]})},Zp={"relationship-edge":Hp,"dependency-edge":Yp},Jp=[],Bn=(e,t)=>({id:e.id,type:"table",position:{x:e.x,y:e.y},data:{table:e,isOverlapping:!1},width:e.width??Lt,hidden:!Dt(e,t)}),cf=({initialTables:e})=>{const{getEdge:t,getInternalNode:n,fitView:o,getEdges:r,getNode:a}=Ge(),[l,c]=i.useState([]),[d,u]=i.useState([]),{toast:f}=rl(),{t:p}=ge(),{tables:m,relationships:x,createRelationship:g,createDependency:h,updateTablesState:v,removeRelationships:w,removeDependencies:b,getField:y,databaseType:S,filteredSchemas:j,events:R,dependencies:C}=ie(),{showSidePanel:I}=je(),{effectiveTheme:D}=yl(),{scrollAction:T,showDependenciesOnCanvas:E}=Bo(),{showAlert:F}=Ht(),{isMd:X}=wt("md"),ee=i.useMemo(()=>({table:_i}),[]),[ae,Y]=i.useState(!1),[W,H]=i.useState(!0),[G,se]=i.useState(Ii()),[te,oe,ve]=al(e.map(M=>Bn(M,j))),[fe,we,re]=il(Jp);i.useEffect(()=>{H(!0)},[e]),i.useEffect(()=>{const M=e.map(P=>Bn(P,j));tn(M,te)&&H(!1)},[e,te,j]),i.useEffect(()=>{W||setTimeout(()=>o({maxZoom:1,duration:0}),0)},[W,o]),i.useEffect(()=>{const M=x.reduce((_,z)=>(_[`${z.targetTableId}${z.targetFieldId}`]=0,_),{}),P=C.reduce((_,z)=>(_[z.tableId]=0,_),{});we([...x.map(_=>({id:_.id,source:_.sourceTableId,target:_.targetTableId,sourceHandle:`${ns}${_.sourceFieldId}`,targetHandle:`${an}${M[`${_.targetTableId}${_.targetFieldId}`]++}_${_.targetFieldId}`,type:"relationship-edge",data:{relationship:_}})),...C.map(_=>({id:_.id,source:_.dependentTableId,target:_.tableId,sourceHandle:`${mn}${_.dependentTableId}`,targetHandle:`${ln}${P[_.tableId]++}_${_.tableId}`,type:"dependency-edge",data:{dependency:_},hidden:!E}))])},[x,C,we,E]),i.useEffect(()=>{const M=te.filter(P=>P.selected).map(P=>P.id);tn(M,l)||c(M)},[te,c,l]),i.useEffect(()=>{const M=fe.filter(P=>P.selected).map(P=>P.id);tn(M,d)||u(M)},[fe,u,d]),i.useEffect(()=>{const P=[...r().filter(_=>l.includes(_.source)||l.includes(_.target)).map(_=>_.id),...d];we(_=>_.map(z=>{const L=P.includes(z.id);if(z.type==="dependency-edge"){const O=z;return{...O,data:{...O.data,highlighted:L},animated:L,zIndex:L?1:0}}else{const O=z;return{...O,data:{...O.data,highlighted:L},animated:L,zIndex:L?1:0}}}))},[d,l,we,r]),i.useEffect(()=>{oe(m.map(M=>{const P=(G.graph.get(M.id)??[]).length>0,_=Bn(M,j);return{..._,data:{..._.data,isOverlapping:P,highlightOverlappingTables:ae}}}))},[m,oe,j,G.lastUpdated,G.graph,ae]);const A=i.useRef(void 0);i.useEffect(()=>{tn(j,A.current)||(Hs(()=>{const M=Fn({tables:m.filter(P=>Dt(P,j))});se(M),o({duration:500,padding:.1,maxZoom:.8})},500)(),A.current=j)},[j,o,m]);const U=i.useCallback(async M=>{var ye,Ee,Re,Oe,We,Le,Rt,qt;if((Ee=(ye=M.sourceHandle)==null?void 0:ye.startsWith)!=null&&Ee.call(ye,mn)||(Oe=(Re=M.sourceHandle)==null?void 0:Re.startsWith)!=null&&Oe.call(Re,Si)){const Dn=M.target,Xt=M.source;h({tableId:Dn,dependentTableId:Xt});return}const P=M.source,_=M.target,z=((Le=(We=M.sourceHandle)==null?void 0:We.split("_"))==null?void 0:Le.pop())??"",L=((qt=(Rt=M.targetHandle)==null?void 0:Rt.split("_"))==null?void 0:qt.pop())??"",O=y(P,z),me=y(_,L);if(!(!O||!me)){if(!ll(O.type,me.type,S)){f({title:"Field types are not compatible",variant:"destructive",description:"Relationships can only be created between compatible field types"});return}g({sourceTableId:P,targetTableId:_,sourceFieldId:z,targetFieldId:L})}},[g,h,y,f,S]),J=i.useCallback(M=>{const _=M.filter(O=>O.type==="remove").map(O=>t(O.id)).filter(O=>!!O),z=_.filter(O=>(O==null?void 0:O.type)==="relationship-edge").map(O=>{var me,ye;return(ye=(me=O==null?void 0:O.data)==null?void 0:me.relationship)==null?void 0:ye.id}),L=_.filter(O=>(O==null?void 0:O.type)==="dependency-edge").map(O=>{var me,ye;return(ye=(me=O==null?void 0:O.data)==null?void 0:me.dependency)==null?void 0:ye.id});return z.length>0&&w(z),L.length>0&&b(L),re(M)},[t,re,w,b]),k=i.useCallback(({positionChanges:M,sizeChanges:P})=>{if(M.length>0||P.length>0){let _=G;for(const z of M)_=at({node:a(z.id)},{nodes:te.filter(L=>!L.hidden)},_);for(const z of P)_=at({node:a(z.id)},{nodes:te.filter(L=>!L.hidden)},_);se(_)}},[te,G,se,a]),V=Hs(k,200),B=i.useCallback(M=>{const P=M.filter(L=>L.type==="position"&&!L.dragging),_=M.filter(L=>L.type==="remove"),z=M.filter(L=>L.type==="dimensions"&&L.resizing);return(P.length>0||_.length>0||z.length>0)&&v(L=>L.map(O=>{var Ee,Re,Oe;const me=P.find(We=>We.id===O.id),ye=z.find(We=>We.id===O.id);return me||ye?{id:O.id,...me?{x:(Ee=me.position)==null?void 0:Ee.x,y:(Re=me.position)==null?void 0:Re.y}:{},...ye?{width:((Oe=ye.dimensions)==null?void 0:Oe.width)??O.width}:{}}:O}).filter(O=>!_.some(me=>me.id===O.id))),V({positionChanges:P,sizeChanges:z}),ve(M)},[ve,v,V]),be=i.useCallback(M=>{let P=G;if(M.action==="add_tables"){for(const _ of M.data.tables)P=at({node:a(_.id)},{nodes:te.filter(z=>!z.hidden)},G);se(P)}else if(M.action==="remove_tables"){for(const _ of M.data.tableIds)P=Fp(P,_);se(P)}else if(M.action==="update_table"&&M.data.table.width){const _=a(M.data.id),z={..._.measured,width:M.data.table.width};P=at({node:{..._,measured:z}},{nodes:te.filter(L=>!L.hidden)},G),se(P)}else if(M.action==="add_field"||M.action==="remove_field"){const _=a(M.data.tableId),z={..._.measured??{},height:os(M.data.fields.length)};P=at({node:{..._,measured:z}},{nodes:te.filter(L=>!L.hidden)},G),se(P)}else if(M.action==="load_diagram"){const _=M.data.diagram.tables??[],z=Fn({tables:_.filter(L=>Dt(L,j))});se(z)}},[G,se,a,te,j]);R.useSubscription(be);const le=m.length>0?!n(m[0].id):!1,Ie=i.useCallback(()=>{const M=cl({relationships:x,tables:m.filter(_=>Dt(_,j)),mode:"all"}),P=Fn({tables:M});v(_=>_.map(z=>{const L=M.find(O=>O.id===z.id);return{id:z.id,x:(L==null?void 0:L.x)??z.x,y:(L==null?void 0:L.y)??z.y}})),se(P)},[j,x,m,v]),De=i.useCallback(()=>{F({title:p("reorder_diagram_alert.title"),description:p("reorder_diagram_alert.description"),actionLabel:p("reorder_diagram_alert.reorder"),closeLabel:p("reorder_diagram_alert.cancel"),onAction:Ie})},[p,F,Ie]),Ye=i.useMemo(()=>Array.from(G.graph).some(([,M])=>M.length>0),[G]),Kt=i.useCallback(()=>{Y(!0),setTimeout(()=>Y(!1),600)},[]);return s.jsx(Xp,{children:s.jsxs("div",{className:"relative flex h-full",children:[s.jsxs(dl,{colorMode:D,className:"canvas-cursor-default nodes-animated",nodes:te,edges:fe,onNodesChange:B,onEdgesChange:J,maxZoom:5,minZoom:.1,onConnect:U,proOptions:{hideAttribution:!0},fitView:!1,nodeTypes:ee,edgeTypes:Zp,defaultEdgeOptions:{animated:!1,type:"relationship-edge"},panOnScroll:T==="pan",children:[s.jsx(Jt,{position:"top-left",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 md:flex-row",children:[s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(Q,{variant:"secondary",className:"size-8 p-1 shadow-none",onClick:De,children:s.jsx(ul,{className:"size-4"})})})}),s.jsx(pe,{children:p("toolbar.reorder_diagram")})]}),s.jsx("div",{className:`transition-opacity duration-300 ease-in-out ${Ye?"opacity-100":"opacity-0"}`,children:s.jsxs(de,{children:[s.jsx(ue,{asChild:!0,children:s.jsx("span",{children:s.jsx(Q,{variant:"default",className:"size-8 p-1 shadow-none",onClick:Kt,children:s.jsx(Al,{className:"size-4 text-white"})})})}),s.jsx(pe,{children:p("toolbar.highlight_overlapping_tables")})]})})]})}),le?s.jsx(Jt,{position:"top-center",orientation:"horizontal",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",children:s.jsx(pl,{variant:"default",className:"bg-pink-600 text-white",children:p("loading_diagram")})}):null,X?null:s.jsx(Jt,{position:"bottom-left",orientation:"horizontal",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",children:s.jsx(Q,{className:"size-11 bg-pink-600 p-2 hover:bg-pink-500",onClick:I,children:s.jsx(bn,{})})}),s.jsx(Jt,{position:X?"bottom-center":"top-center",orientation:"horizontal",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",children:s.jsx(Kp,{})}),s.jsx(fl,{style:{width:X?100:60,height:X?100:60}}),s.jsx(hl,{variant:ml.Dots,gap:16,size:1})]}),s.jsx(qp,{})]})})};export{cf as C,af as S,Ke as a};
